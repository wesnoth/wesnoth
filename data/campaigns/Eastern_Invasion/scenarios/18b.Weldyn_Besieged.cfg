#textdomain wesnoth-ei
[scenario]
    id=Reject
    name= _ "Weldyn Besieged"
    map_data="{campaigns/Eastern_Invasion/maps/Weldyn_Besieged.map}"
    turns=30
    next_scenario=Epilog

    {DEFAULT_SCHEDULE}

    {DEFAULT_MUSIC_PLAYLIST}

    {campaigns/Eastern_Invasion/utils/deaths.cfg}

    [side]
        type=Lieutenant
        id=Gweddry
        user_description= _ "Gweddry"
        side=1
        canrecruit=yes
        controller=human
    [/side]

    # Gweddry gets the villages within the moat.
    # The ones outside he'll actually have to take.
    {STARTING_VILLAGES 1 3}

    [side]
        type=Lich
        id=Mal-Akranbral
        user_description= _ "Mal-Akranbral"
        side=2
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 150 200 250}
        team_name=bad
    [/side]

    [side]
        type=Lich
        id=Mal-Drakanal
        user_description= _ "Mal-Drakanal"
        side=3
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 150 200 250}
        team_name=bad
    [/side]

    [side]
        type=Lich
        id=Mal-Larakan
        user_description= _ "Mal-Larakan"
        side=4
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 150 200 250}
        team_name=bad
    [/side]

    [side]
        type=Lich
        id=Mal-Ravanal
        user_description= _ "Mal-Ravanal"
        side=5
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 200 250 300}
        team_name=bad
        profile=portraits/mal-ravanal.png
    [/side]

    [side]
        type=Lich
        id=Mal-Xaskanat
        user_description= _ "Mal-Xaskanat"
        side=6
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 150 200 250}
        team_name=bad
    [/side]

    [side]
        type=Lich
        id=Mal-Katklagad
        user_description= _ "Mal-Katklagad"
        side=7
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 150 200 250}
        team_name=bad
    [/side]

    [side]
        type=Lich
        id=Mal-Hadanak
        user_description= _ "Mal-Hadanak"
        side=8
        canrecruit=yes
        controller=ai
        recruit=Bone Shooter,Revenant,Wraith,Shadow
        {GOLD 150 200 250}
        team_name=bad
    [/side]

    [event]
        name=prestart
        [objectives]
            side=1
            [objective]
                description= _ "Defeat Mal-Ravanal"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Gweddry"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Dacyn"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Owaec"
                condition=lose
            [/objective]
            [objective]
                description= _ "Letting any enemy unit on to your keep"
                condition=lose
            [/objective]
        [/objectives]
    [/event]

    [event]
        name=start
        [recall]
            id=Dacyn
        [/recall]
        [recall]
            id=Owaec
        [/recall]
        [recall]
            id=Grug
        [/recall]
        [message]
            speaker=Mal-Drakanal
            message= _ "You people are fools! You rejected my master's offer to duel... very well, you will ALL die! And know this; my master is here to enjoy your demise. For he does not fear you at all, and knows that you will never be able to find him and kill him! There are seven of us, and only ONE of us is the real leader! ha ha ha ha! To be fair about it, we will all tell you our names."
        [/message]
        [message]
            speaker=Dacyn
            message= _ "Remember, we have to kill Mal-Ravanal. He's here somewhere..."
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=Mal-Ravanal
        [/filter]
        [message]
            speaker=Mal-Ravanal
            profile=portraits/mal-ravanal.png
            message= _ "How did you know...?"
        [/message]
        [endlevel]
            result=victory
        [/endlevel]
    [/event]

    # Enemy unit reaches the Weldyn keep

    [event]
        name=moveto
        [filter]
            x=24
            y=14
            [not]
                side=1
            [/not]
        [/filter]
        [message]
            speaker=unit
            message= _ "Kill the king!"
        [/message]
        [message]
            speaker=Gweddry
            message= _ "They killed Konrad... now, even if we save Weldyn, Wesnoth has fallen."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]
