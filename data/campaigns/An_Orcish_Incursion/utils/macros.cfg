#textdomain wesnoth-aoi

#define HINT MESSAGE
    notes_string= _ "Hint:"

    [note]
        description={MESSAGE}
    [/note]
#enddef

#define IS_MAGE
    side=1
    type="Red Mage,White Mage,Mage,Arch Mage,Silver Mage,Mage of Light,Great Mage"
    [not]
        canrecruit=yes
    [/not]
#enddef

#define CAN_ADVISE
    side=1
    race=elf
    [not]
        canrecruit=yes
    [/not]
#enddef

#define PROMOTE SIDENUMBER ROLENAME FILTERWML RECALLWML
    [if]
        [not]
            [have_unit]
                side={SIDENUMBER}
                role={ROLENAME}
            [/have_unit]
        [/not]
        [then]
            [if]
                [have_unit]
                    side={SIDENUMBER}
                    {FILTERWML}
                [/have_unit]
                [then]
                    [role]
                        side={SIDENUMBER}
                        {FILTERWML}
                        role={ROLENAME}
                    [/role]
                [/then]
                [else]
                    {RECALLWML}
                [/else]
            [/if]
        [/then]
    [/if]
#enddef

#define PROMOTE_MAGE
    {PROMOTE 1 mage {IS_MAGE} {RECALL_MAGE}}
#enddef

#define PROMOTE_ADVISOR
    {PROMOTE 1 advisor {CAN_ADVISE} {RECALL_ADVISOR}}
#enddef

#define AOI_RECALL SIDENUMBER ROLENAME FILTERWML UNITWML
    [if]
        [have_unit]
            side={SIDENUMBER}
            role={ROLENAME}
            search_recall_list=yes
        [/have_unit]
        [then]
            [recall]
                side={SIDENUMBER}
                role={ROLENAME}
            [/recall]
        [/then]
        [elseif]
            [have_unit]
                side={SIDENUMBER}
                {FILTERWML}
                search_recall_list=yes
            [/have_unit]
            [then]
                [role]
                    side={SIDENUMBER}
                    {FILTERWML}
                    role={ROLENAME}
                [/role]
                [recall]
                    side={SIDENUMBER}
                    role={ROLENAME}
                [/recall]
            [/then]
        [/elseif]
        [else]
            {UNITWML}
            [+unit]
                role={ROLENAME}
            [/unit]
        [/else]
    [/if]
#enddef

#define RECALL_MAGE
    {AOI_RECALL 1 mage {IS_MAGE} (
        [unit]
            type=Mage
            side=1
            animate=yes
            placement=leader
        [/unit]
    )}
#enddef

#define RECALL_ADVISOR
    {AOI_RECALL 1 advisor {CAN_ADVISE} (
        [unit]
            type=Elvish Fighter
            side=1
            animate=yes
            placement=leader
        [/unit]
    )}
#enddef
