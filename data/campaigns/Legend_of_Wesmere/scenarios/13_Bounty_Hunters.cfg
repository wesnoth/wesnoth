#textdomain wesnoth-low
[scenario]
    id=13_Bounty_Hunters
    next_scenario=14_Cliffs_of_Thoria
    name= _ "Bounty Hunters"
    {LOW_MAP 12_Bounty_Hunters.map}
    victory_when_enemies_defeated=no
    experience_modifier=100
    carryover_percentage=40
    carryover_add=yes
    {TURNS 28 25 22}
    {DEFAULT_SCHEDULE}

    {INTRO_AND_SCENARIO_MUSIC revelation.ogg traveling_minstrels.ogg}
    {EXTRA_SCENARIO_MUSIC                           nunc_dimittis.ogg}
    {EXTRA_SCENARIO_MUSIC                            journeys_end.ogg}
    {EXTRA_SCENARIO_MUSIC                                  battle.ogg}

    [story]
        [part]
            # The space at the end stops the last letter from getting cut off. Newlines at the end offset the text to slightly above centered.
            title="<span font_family='WesScript' size='60000'><i>" + _"Chapter Four: The Book of Crelanu" + " </i></span>

"
            title_position=centered
        [/part]
        [part]
            story= _ "The heroes started off on the long and dangerous trip to the great mage of Thoria. They discovered that peril was closer than they had reckoned..."
        [/part]
    [/story]
    {LOW_TRACK {SCENARIO_12} }

    [side]
        side=1
        {SIDE_1_ESSENTIALS}
        {KALENZ}
        {SIDE_1_GOLD_FIXED 280 200}
        income=-2
        village_gold=1
        fog=no
        shroud=no
#ifndef MULTIPLAYER
        [unit]
            {LANDAR}
            location_id=2
        [/unit]
        [unit]
            {OLURF_COMPANION}
            placement=leader
        [/unit]
#endif
        [unit]
            {CLEODIL_COMPANION}
            placement=leader
        [/unit]
    [/side]
    [side]
        side=2
        {SIDE_2_ESSENTIALS}
        {LANDAR}
        gold=200
        income=-2
        village_gold=1
        fog=no
        shroud=no
#ifdef MULTIPLAYER
        [unit]
            {OLURF_COMPANION}
            placement=leader
        [/unit]
#endif
    [/side]

    [side]
        side=3
        {UNPLAYABLE_SIDE}
        team_name=lizards
        user_team_name= _ "Enemies"
        {FLAG_VARIANT undead}
        type=Saurian Flanker
        id=Huurgh
        name=_ "Huurgh"
        {GOLD 360 460 540}
        {INCOME 20 30 40}
#ifdef EASY
        recruit=Saurian Augur, Saurian Skirmisher, Saurian Ambusher, LoW Saurian Impaler
#else
        recruit=Saurian Augur, Saurian Skirmisher, Saurian Ambusher, Saurian Oracle, Saurian Soothsayer, Saurian Flanker, LoW Saurian Impaler, LoW Saurian Pikebearer
#endif
        [ai]
            passive_leader=yes
            {NO_SCOUTS}
#ifdef EASY
            recruitment_pattern=fighter, scout, scout, healer, scout
#else
            recruitment_pattern=fighter, scout, scout, healer, archer, archer, scout
#endif
            grouping=no
            aggression=0.8
            [avoid]
                terrain=Ww
            [/avoid]
        [/ai]
    [/side]

    [side]
        side=4
        {UNPLAYABLE_SIDE}
        team_name=lizards
        user_team_name= _ "Enemies"
        {FLAG_VARIANT undead}
        type=Saurian Oracle
        id=Shhar
        name=_ "Shhar"
        {GOLD 360 460 540}
        {INCOME 20 30 40}
#ifdef EASY
        recruit=Saurian Augur, Saurian Skirmisher, Saurian Ambusher, LoW Saurian Impaler
#else
        recruit=Saurian Augur, Saurian Skirmisher, Saurian Ambusher, Saurian Oracle, Saurian Soothsayer, Saurian Flanker, LoW Saurian Impaler, LoW Saurian Pikebearer
#endif
        [ai]
            passive_leader=yes
            {NO_SCOUTS}
#ifdef EASY
            recruitment_pattern=fighter, scout, scout, healer, scout
#else
            recruitment_pattern=fighter, scout, scout, healer, archer, archer, scout
#endif
            grouping=no
            aggression=0.8
            [avoid]
                terrain=W*
            [/avoid]
        [/ai]
    [/side]

    [side]
        side=5
        {UNPLAYABLE_SIDE}
        team_name=lizards
        user_team_name= _ "Creatures"
        {FLAG_VARIANT undead}
        no_leader=yes
        faction=Custom
        [ai]
            aggression=1.0
            caution=-100.0
            grouping=no
            village_value=0
            [avoid]
                [not]
                    terrain=W*
                [/not]
            [/avoid]
        [/ai]
    [/side]

    [event]
        name=prestart

        {MODIFY_UNIT side=3 facing se}
        {MODIFY_UNIT side=4 facing sw}

        [if]
            [variable]
                name=fizz_died
                not_equals=yes
            [/variable]
            [then]
                [modify_unit]
                    [filter]
                        id=Shhar
                    [/filter]
                    id=Fizz
                    name= _ "Fizz"
                    experience=$fizz_stored.experience
                [/modify_unit]
            [/then]
        [/if]
    [/event]

    [event]
        name=start

        [message]
            id=Shhar
            # wmllint: local spelling Yess
            message= _ "Yess! It’s the elves who invaded our capital! The bounty is mine!"
        [/message]
        [message]
            id=Fizz
            # wmllint: local spelling Yess
            message= _ "Yess! It’s the elves who killed my master! The bounty is mine!"
        [/message]
        [message]
            id=Huurgh
            message= _ "I saw them first, fool! The bounty is all mine."
        [/message]
        [message]
            id=Olurf
            message= _ "What are they talking about?"
        [/message]
        [message]
            id=Landar
            message= _ "It would seem the saurians put a bounty on our heads for having the effrontery to rescue our lord from their musty swamps. Are you interested?"
        [/message]
        [message]
            id=Olurf
            message= _ "No, but my axe is interested in some saurian heads! They ha’ been too friendly with the orcs for my liking!"
        [/message]
        [message]
            id=Kalenz
            message= _ "Remember, we are here on a mission. We will fight these saurians if we must, but our mission is to get to Thoria. Let’s cross the river!"
        [/message]
        [message]
            id=Olurf
            message= _ "We can outrun them in the woods and mountains beyond the north shore. But crossing the river without a bridge? We dwarves know water is a very dangerous thing!"
        [/message]
        [message]
            id=Cleodil
            #TODO check
            message= _ "Indeed, this river is, I believe, Arkan-Thoria. There are fell legends about it. Maybe they are but children’s tales... Still, be very careful when you cross it."
        [/message]
        [message]
            id=Kalenz
            message= _ "You speak my thought, Cleodil. Close in behind me; I’ll guard you from harm myself. Look to your weapons as we cross, all! And be wary."
        [/message]

        [objectives]
            side=1,2
            [objective]
                description= _ "Kalenz or Landar crosses the river"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Kalenz"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Landar"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Cleodil"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Olurf"
                condition=lose
            [/objective]

            {TURNS_RUN_OUT}

            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]
        [/objectives]
    [/event]
    [event]
        name=moveto
        [filter]
            id=Kalenz,Landar
            [filter_location]
                y=1-5
                [not]
                    terrain=W*
                [/not]
            [/filter_location]
        [/filter]

        [message]
            speaker=unit
            message= _ "We made it. Onwards to Thoria!"
        [/message]
        [message]
            id=Olurf
            message= _ "At last!"
        [/message]
        [message]
            id=Landar
            message= _ "We’ll need to settle things with these saurians once and for all!"
        [/message]
        [message]
            id=Cleodil
            message= _ "Hasn’t enough blood been shed? I think we can compose matters with them after the threat of the orcs has been met."
        [/message]
        [message]
            id=Landar
            message= _ "We need to teach them a lesson, that attacking us elves is fatally stupid. Otherwise, they will infest our lands like rats!"
        [/message]

        [endlevel]
            result=victory
#ifdef MULTIPLAYER
            bonus=0.5
#else
            bonus=yes
#endif
            {NEW_GOLD_CARRYOVER 40}
        [/endlevel]
        {CLEAR_VARIABLE moved_into_water}
    [/event]

    [event]
        name=victory

        [if]
            [have_unit]
                id=Fizz
            [/have_unit]
            [then]
                [store_unit]
                    [filter]
                        id=Fizz
                    [/filter]
                    kill=no
                    variable=fizz_stored
                [/store_unit]
            [/then]
        [/if]
    [/event]

    [event]
        name=enter hex
        [filter]
            side=1,2
            [filter_location]
                terrain=W*
            [/filter_location]
        [/filter]

        [cancel_action][/cancel_action]

        {VARIABLE moved_into_water yes}

        [sound]
            name=water-blast.wav
        [/sound]

        {RANDOM_PLACEMENT 2 8 1 (
            type=Water Serpent
            id=Sealurr
            name= _ "Sealurr"
            side=5
        ) }

        [message]
            speaker=unit
            message= _ "The legends are true! Sea creatures are upon us!"
        [/message]

        [scroll_to_unit]
            id=Sealurr
        [/scroll_to_unit]

        {RANDOM_PLACEMENT 35 7 1 (
            type=Water Serpent
            id=Kallub
            name= _ "Kallub"
            side=5
        ) }

        [message]
            side=$unit.side
            [not]
                id=$unit.id
            [/not]
            scroll=no
            message= _ "They are coming at us from all sides!"
        [/message]

        [scroll_to_unit]
            id=Kallub
        [/scroll_to_unit]

        {RANDOM_PLACEMENT 17 8 2 (
            type=Water Serpent
            id=Scardeep
            name= _ "Scardeep"
            side=5
        ) }

        [message]
            side=$unit.side
            canrecruit=no
            scroll=no
            message= _ "Watch for the serpent!"
        [/message]

        [scroll_to_unit]
            id=Scardeep
        [/scroll_to_unit]

        {RANDOM_PLACEMENT 6 4 1 (
            type=Cuttle Fish
            id=Kalimar
            name= _ "Kalimar"
            side=5
        ) }

        [scroll_to_unit]
            id=Kalimar
        [/scroll_to_unit]

        {RANDOM_PLACEMENT 22 11 2 (
            type=Water Serpent
            id=Needlefang
            name= _ "Needlefang"
            side=5
        ) }

        [scroll_to_unit]
            id=Kalimar
        [/scroll_to_unit]

        {RANDOM_PLACEMENT 29 5 1 (
            type=Cuttle Fish
            id=Alkamar
            name= _ "Alkamar"
            side=5
        ) }

        [scroll_to_unit]
            id=Alkamar
        [/scroll_to_unit]

        [modify_unit]
            [filter]
                side=5
            [/filter]
            [modifications]
#ifndef EASY
                {TRAIT_RESILIENT}
#endif
#ifdef HARD
                {TRAIT_STRONG}
#endif
            [/modifications]
        [/modify_unit]

        [if]
            [have_unit]
                side=4
                canrecruit=yes
            [/have_unit]
            [then]
                [message]
                    side=4
                    canrecruit=yes
                    message= _ "These are the monsters of Arkan-Thoria! Stay away from the water!"
                [/message]
            [/then]
            [else]
                [message]
                    race=lizard
                    message= _ "These are the monsters of Arkan-Thoria! Stay away from the water!"
                [/message]
            [/else]
        [/if]
    [/event]

    [event]
        name=die

        [filter]
            side=1,2
            [filter_location]
                terrain=W*
            [/filter_location]
        [/filter]

        [message]
            race=lizard
            message= _ "Yes, yes, may the monsters tear you all to pieces!"
        [/message]
    [/event]

    [event]
        name=new turn
        first_time_only=no

        [filter_condition]
            [not]
                [have_unit]
                    side=5
                    count=4-6
                [/have_unit]
            [/not]
            [and]
                [variable]
                    name=moved_into_water
                    equals=yes
                [/variable]
            [/and]
        [/filter_condition]

        {VARIABLE_OP spawn_loc rand 1..3}

        [fire_event]
            name=first_respawn
        [/fire_event]

        [sound]
            name=water-blast.wav
        [/sound]

        [switch]
            variable=spawn_loc
            [case]
                value=1

                {RANDOM_PLACEMENT 2 8 2 (
                    type=Cuttle Fish
                    side=5
                    animate=yes
                ) }
            [/case]
            [case]
                value=2

                {RANDOM_PLACEMENT 17 8 2 (
                    type=Cuttle Fish
                    side=5
                    animate=yes
                ) }
            [/case]
            [case]
                value=3

                {RANDOM_PLACEMENT 35 7 2 (
                    type=Cuttle Fish
                    side=5
                    animate=yes
                ) }
            [/case]
        [/switch]
        {CLEAR_VARIABLE spawn_loc}
    [/event]

    [event]
        name=last breath

        [filter]
            id=Fizz
        [/filter]

        {VARIABLE fizz_died yes}

        [message]
            speaker=unit
            message= _ "Hateful elves, may your race be cursed!"
        [/message]
    [/event]

    [event]
        name=first_respawn

        [message]
            race=elf
            message= _ "More monsters are rising from the depths!"
        [/message]
    [/event]
    {campaigns/Legend_of_Wesmere/utils/deaths.cfg}
[/scenario]
