#textdomain wesnoth-low
[scenario]
    id=26_Northern_Battle
    next_scenario=27_End_of_War
    name= _ "Northern Battle"
    {LOW_MAP 24_Northern_Battle.map}
    victory_when_enemies_defeated=yes
    carryover_percentage=40
    carryover_add=yes
    {TURNS 40 36 32}
    {DEFAULT_SCHEDULE}
    current_time=2

    {INTRO_AND_SCENARIO_MUSIC revelation.ogg revelation.ogg}

    [story]
        [part]
            background="story/characters/kalenz.webp"
            scale_background=no
            story={CAPTION ( _ "Kalenz")} + _ "Eradion, I keep trying to understand, why did you follow Landar?"
        [/part]
        [part]
            background="portraits/elves/hero.webp"
            scale_background=no
            story={CAPTION ( _ "Eradion")} + _ "In recent years, it seemed to me our people had grown weak, that we were not ready for new challenges. Our Council became weak and cowardly. I feared that under their rule, Wesmere would meet its end... And suddenly Landar appeared, a great warrior who defied the Council! I remember his speech on the balcony of the northern tower. He spoke of what had troubled many of us for years. He convinced us that to save the elves we must become strong. We must make a great sacrifice and destroy our enemies, and then the elves would live again in peace and prosperity. I believed him then, but now I see this is a path to oblivion. Forgive me, friends... I tried to kill you."
        [/part]
        [part]
            background="story/characters/kalenz.webp"
            scale_background=no
            story={CAPTION ( _ "Kalenz")} + _ "I forgive you, Eradion. But you must help us stop this curse."
        [/part]
        [part]
            background="portraits/elves/hero.webp"
            scale_background=no
            story={CAPTION ( _ "Eradion")} + _ "Of course! I swear, Kalenz, I will fight for you until my last breath!"
        [/part]
        [part]
            background="story/characters/galtrid.webp"
            scale_background=no
            story={CAPTION ( _ "Galtrid")} + _ "Glad we are on the same side again, friend."
        [/part]
        [part]
            background="story/characters/kalenz.webp"
            scale_background=no
            story={CAPTION ( _ "Kalenz")} + _ "Do you know what Landar has planned?"
        [/part]
        [part]
            background="portraits/elves/hero.webp"
            scale_background=no
            story={CAPTION ( _ "Eradion")} + _ "After you refused him, he decided to subjugate the northern elves. His main forces are now marching towards Elensiria."
        [/part]
        [part]
            background="story/characters/kalenz.webp"
            scale_background=no
            story={CAPTION ( _ "Kalenz")} + _ "That is where we were headed as well. Let us hurry! If Landar's army outpaces us, there will be no hope."
        [/part]
    [/story]

    {LOW_TRACK {SCENARIO_24} }

    # wmllint: validate-off
    [side]
        side=1
        {SIDE_1_ESSENTIALS}
        {KALENZ_LORD}
        {SIDE_1_GOLD_FIXED 225 140}
        income=-2
        fog=no
        shroud=no
        [unit]
            {GALTRID_COMPANION}
            placement=leader
        [/unit]
#ifndef MULTIPLAYER
        [unit]
            {CLEODIL_INLOVE}
            location_id=2
        [/unit]
        [unit]
            {ERADION_COMPANION}
            location_id=2
        [/unit]
#endif
    [/side]

    [side]
        side=2
        {SIDE_2_ESSENTIALS}
        {CLEODIL_INLOVE}
        location_id=2
        gold=140
        income=-2
        fog=no
        shroud=no
#ifdef MULTIPLAYER
        [unit]
            {ERADION_COMPANION}
            placement=leader
        [/unit]
#endif
    [/side]

    [side]
        side=3
        {UNPLAYABLE_SIDE}
        team_name=assassins
        user_team_name= _ "Enemies"
        {FLAG_VARIANT long}
        type=Elvish Captain
        canrecruit=yes
        {GOLD 140 170 200}
        {INCOME 5 10 15}
        recruit=Elvish Fighter, Elvish Archer
        [ai]
            passive_leader=yes
            recruitment_pattern=fighter,fighter,archer
            aggression=0.75
            caution=0.0
            grouping=offensive
        [/ai]
    [/side]

    [side]
        side=4
        {UNPLAYABLE_SIDE}
        team_name=assassins
        user_team_name= _ "Enemies"
        {FLAG_VARIANT long}
        type=Elvish Marshal
        canrecruit=yes
        {GOLD 200 240 280}
        {INCOME 15 25 35}
#ifdef EASY
        recruit=Elvish Fighter, Elvish Archer, Elvish Scout, Elvish Captain
#else
        recruit=Elvish Fighter, Elvish Archer, Elvish Scout, Elvish Captain, Elvish Ranger
#endif
        [ai]
            passive_leader=yes
            aggression=0.75
            caution=0.0
            grouping=offensive
        [/ai]
    [/side]

    [side]
        side=5
        {UNPLAYABLE_SIDE}
        team_name=assassins
        user_team_name= _ "Enemies"
        {FLAG_VARIANT long}
        type=Elvish Marshal
        canrecruit=yes
        {GOLD 200 240 280}
        {INCOME 15 25 35}
#ifdef EASY
        recruit=Elvish Fighter, Elvish Archer, Elvish Scout, Elvish Captain
#else
        recruit=Elvish Fighter, Elvish Archer, Elvish Scout, Elvish Captain, Elvish Ranger, Elvish Rider
#endif
        [ai]
            passive_leader=yes
            aggression=0.75
            caution=0.0
            grouping=offensive
        [/ai]
    [/side]

    [side]
        side=6
        {UNPLAYABLE_SIDE}
        team_name=assassins
        user_team_name= _ "Enemies"
        {FLAG_VARIANT long}
        no_leader=yes
        {GOLD 300 350 400}
        {INCOME 20 40 60}
#ifdef EASY
        recruit=Elvish Fighter, Elvish Archer, Elvish Scout, Elvish Captain
#else
        recruit=Elvish Fighter, Elvish Archer, Elvish Scout, Elvish Captain, Elvish Ranger, Elvish Hero
#endif
        [ai]
            passive_leader=yes
            aggression=0.75
            caution=0.0
            grouping=offensive
        [/ai]

        {GENERIC_UNIT 6 (Elvish Champion) 5 4}{GUARDIAN}
        {GENERIC_UNIT 6 (Elvish Avenger) 5 5}{GUARDIAN}
        {GENERIC_UNIT 6 (Elvish Champion) 5 6}{GUARDIAN}
        {GENERIC_UNIT 6 (Elvish Champion) 3 9}{GUARDIAN}
        {GENERIC_UNIT 6 (Elvish Avenger) 4 8}{GUARDIAN}
        {GENERIC_UNIT 6 (Elvish Champion) 5 8}{GUARDIAN}
    [/side]

    [side]
        side=7
        {UNPLAYABLE_SIDE}
        {PLAYER_TEAM}
        {FLAG_VARIANT wood-elvish}
        type=Elvish Outrider
        id=Glorimfel
        name=_ "Glorimfel"
        canrecruit=yes
        {GOLD 100 130 160}
        {INCOME 4 8 12}
#ifdef EASY
        recruit=Elvish Scout
#else
        recruit=Elvish Scout, Elvish Rider
#endif
        [ai]
            passive_leader=yes
            aggression=0.75
            caution=0.0
            grouping=no
        [/ai]
    [/side]

    [side]
        side=8
        {UNPLAYABLE_SIDE}
        {PLAYER_TEAM}
        {FLAG_VARIANT wood-elvish}
        color=white
        {URADREDIA}
        gold=300
        {INCOME 20 15 10}
        recruit=Elvish Fighter, Elvish Archer, Elvish Shaman, Elvish Hero, Elvish Ranger, Elvish Druid, Elvish Marksman, Elvish Sorceress
        [ai]
            passive_leader=yes
            {NO_SCOUTS}
            recruitment_pattern=fighter,fighter,archer,mixed fighter,healer
            grouping=defensive
            [avoid]
                terrain=R*,W*,Gg
            [/avoid]
        [/ai]
    [/side]

    {STARTING_VILLAGES_ALL 8}

    [event]
        name=prestart

        {NEED_LANDAR_STORED 1 6 6}
        {NEED_KALENZ_LORD}
        {NEED_CLEODIL_LEADER}

        {MODIFY_UNIT id=Kalenz facing se}
        {MODIFY_UNIT id=Cleodil facing sw}
        {MODIFY_UNIT side=3,7,8 facing sw}
        {MODIFY_UNIT side=4,5,6 facing ne}

        [objectives]
            side=1,2
            [objective]
                description= _ "Defeat Landar"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Kalenz"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Cleodil"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Eradion"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Galtrid"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Uradredia"
                condition=lose
            [/objective]

            {TURNS_RUN_OUT}

            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]
        [/objectives]
    [/event]

    [event]
        name=start

        {REPLACE_SCENARIO_MUSIC         siege_of_laurelmor.ogg}
        {APPEND_MUSIC                 legends_of_the_north.ogg}
        {APPEND_MUSIC                         elvish-theme.ogg}
        {APPEND_MUSIC                       the_city_falls.ogg}
        {APPEND_MUSIC                        nunc_dimittis.ogg}
        {APPEND_MUSIC                     silvan_sanctuary.ogg}
        {APPEND_MUSIC                    weight_of_revenge.ogg}
        {APPEND_MUSIC                    casualties_of_war.ogg}

        [message]
            sound=horn-signals/horn-3.ogg
            id=Kalenz
            message= _ "I hear the battle horn! Landar's army is here!"
        [/message]
        [message]
            id=Landar
            message= _ "Lord Uradredia! This is Landar, High Lord of Wesmere, speaking! The fate of our people hangs in the balance. The accursed orcs are multiplying in the north. When they regain their strength, they will once again bring death and destruction to our forests! We must stand united and exterminate them. But there are traitors among your subjects. They divide our people with cowardly words and prevent us from doing what must be done! I speak of Kalenz and Cleodil. Hand them over to me and join my army."
        [/message]
        [message]
            id=Uradredia
            message= _ "You have changed greatly, Landar. Your boldness has degenerated into black malice. Can't you see? It is not the orcs, but you yourself who brings death and destruction to your own home. Go away, the northern elves will never join your army of fratricides!"
        [/message]
        [message]
            speaker=Glorimfel
            message= _ "My lord, but the orcs have brought us so much grief! Must we quarrel with the elves of Wesmere instead of uniting and destroying them?"
        [/message]
        [message]
            id=Uradredia
            message= _ "Landar has spilled elvish blood. Now he and his minions are no better than orcs."
        [/message]
        [message]
            speaker=Glorimfel
            message= _ "No, this sacrifice is justified. Those who hinder unity are the main threat. Landar, I am with you!"
        [/message]
        [modify_side]
            side=7
            team_name=assassins
            user_team_name= _ "Enemies"
            {FLAG_VARIANT long}
        [/modify_side]
        [redraw][/redraw]
        [message]
            id=Uradredia
            message= _ "Then you will die today, Glorimfel. Prepare for battle! Let us cleanse Lintanir of this filth!"
        [/message]
        [message]
            id=Kalenz
            message= _ "The North Elves raise their banners. Lord Uradredia has refused to join Landar!"
        [/message]
        [message]
            id=Cleodil
            message= _ "The elves of Wesmere are also forming battle lines. Blood will be shed..."
        [/message]
        [message]
            id=Eradion
            message= _ "There is no other choice. They will not listen to us now."
        [/message]
        [message]
            id=Galtrid
            message= _ "We will do what we must."
        [/message]
    [/event]

    [event]
        name=attack

        [filter]
            side=1,2
        [/filter]
        [filter_second]
            id=Landar
        [/filter_second]

        [message]
            id=Kalenz
            message= _ "Landar, listen to me! It does not have to come to this. I know about the potion. Let us help!"
        [/message]
        [message]
            id=Landar
            message= _ "Here is Kalenz! Why is he still alive? Kill him!"
        [/message]
    [/event]

    [event]
        name=last breath

        [filter]
            id=Landar
        [/filter]

        [message]
            id=Landar
            message= _ "Things are not going well! Retreat! We will meet again, traitors!"
        [/message]

        {FULL_HEAL id=Landar}

        [store_unit]
            [filter]
                id=Landar
            [/filter]
            variable=landar_stored
            kill=yes
        [/store_unit]

        [endlevel]
            result=victory
#ifdef MULTIPLAYER
            bonus=0.5
#else
            bonus=yes
#endif
            {NEW_GOLD_CARRYOVER 40}
        [/endlevel]
    [/event]
    {campaigns/Legend_of_Wesmere/utils/deaths.cfg}
[/scenario]
