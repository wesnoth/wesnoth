#textdomain wesnoth-wof

#define WEAPON_SPECIAL_BLAST
    [damage]
        id=blast
        name= _ "blast"
        name_inactive= _ "blast"
        description= _ "This attack also harms everyone near the opponent."
        [event]
            id=special_blast_attacker_hits
            name=attacker_hits
            first_time_only=no
            [filter_attack]
                special_id = blast
            [/filter_attack]
            [harm_unit]
                [filter]
                    [filter_location]
                        x,y=$x2,$y2
                        radius=1
                    [/filter_location]
                    [not]
                        x,y=$x1,$y1
                    [/not]
                    [and]
                        [not]
                            x,y=$x2,$y2
                        [/not]
                    [/and]
                [/filter]
                amount=$weapon.damage
                damage_type=$weapon.type
                fire_event=yes
                animate=yes
            [/harm_unit]
        [/event]
        [event]
            id=special_blast_defender_hits
            name=defender_hits
            first_time_only=no
            [filter_second_attack]
                special_id = blast
            [/filter_second_attack]
            [harm_unit]
                [filter]
                    [filter_location]
                        x,y=$x1,$y1
                        radius=1
                    [/filter_location]
                    [not]
                        x,y=$x1,$y1
                    [/not]
                    [and]
                        [not]
                            x,y=$x2,$y2
                        [/not]
                    [/and]
                [/filter]
                amount=$second_weapon.damage
                damage_type=$second_weapon.type
                fire_event=yes
                animate=yes
            [/harm_unit]
        [/event]
    [/damage]
#enddef
