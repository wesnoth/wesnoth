#textdomain wesnoth-wc
## macros may not be used inside translatable strings.

#define WC_II_CAMPAIGN_NAME_1P
_ "World Conquest 1p" #enddef

#define WC_II_CAMPAIGN_NAME_2P
_ "World Conquest 2p" #enddef

#define WC_II_CAMPAIGN_NAME_3P
_ "World Conquest 3p" #enddef

#define WC_II_CAMPAIGN_DESC_1P
    _ "A randomly generated campaign for 1 player. It has 6 level of difficulties.
(Expert level, 5 scenarios.)" #enddef

#define WC_II_CAMPAIGN_DESC_2P
    _ "A randomly generated cooperative campaign for 2 players. It has 6 level of difficulties.
(Expert level, 5 scenarios.)" #enddef

#define WC_II_CAMPAIGN_DESC_3P
    _ "A randomly generated cooperative campaign for 3 players. It has 6 level of difficulties.
(Expert level, 5 scenarios.)" #enddef

#define WC2_CAMPAIGN_NEW PLAYERS
    ## Everything that usually goes into [scenario] like [event], [load_ressource], map_data
    ## etc is generated by lua. This is also why there is only one [multiplayer] tag: the next
    ## scenario is again "WC_II_{PLAYERS}p" and the lua code detects that is was called a second
    ## time and generated the second scenario. (same for third, fourth and fifth). All the lua
    ## code inside ./lua/map does map/scenario generation.
    [multiplayer]
        id = "WC_II_{PLAYERS}p{ID_SUFFIX}"
        name= {WC_II_CAMPAIGN_NAME_{PLAYERS}P} + "{ID_SUFFIX}"
        description = {WC_II_CAMPAIGN_DESC_{PLAYERS}P}
        allow_new_game=yes
        require_scenario=no
        scenario_generation=lua
        [generator]
            id="WC_II_{PLAYERS}p{ID_SUFFIX}"
            config_name={WC_II_CAMPAIGN_NAME_{PLAYERS}P} + "{ID_SUFFIX}"
            create_scenario = "
			local a = ...
			local function doit()
				wesnoth.dofile('{WC2_DIR}/lua/map/main.lua'); return wc_ii_generate_scenario({PLAYERS}, a)
			end

			local status, res = xpcall(doit, function(e) std_print(e, debug.traceback()) end)
			if status then
				return res
			else
				std_print(res)
			end
		"
#ifdef EDITOR
            user_config = "
			local a = ...
			local function doit()
				wesnoth.dofile('{WC2_DIR}/lua/map/main.lua');
				wesnoth.dofile('{WC2_DIR}/lua/map/settings/settings_dialog.lua');
				return wc2_debug_settings({PLAYERS})
			end

			local status, res = xpcall(doit, function(e) std_print(e, debug.traceback()) end)
			if status then
				return res
			else
				std_print(res)
			end
		"
#endif
            id_suffix={ID_SUFFIX}
            [scenario]
                {DEFAULT_SCHEDULE}
                {DEFAULT_MUSIC_PLAYLIST}
            [/scenario]
        [/generator]
    [/multiplayer]
#enddef

{WC2_CAMPAIGN_NEW 1}
{WC2_CAMPAIGN_NEW 2}
{WC2_CAMPAIGN_NEW 3}
