#textdomain wesnoth-l
[scenario]

    id=the_hunters
    name= _ "The Hunters"
    map_data="{campaigns/Liberty/maps/the_hunters.map}"
    {TURNS 36 31 26}

    next_scenario=glory
    {SCENARIO_MUSIC "breaking_the_chains.ogg"}
    {VICTORY_AND_DEFEAT_MUSIC}
    victory_when_enemies_defeated=no

    [story]
        [part]
            story= _ "Baldras and his men quickly left the Gray Woods, not entirely convinced of their safety even after eradicating the lich."
            music="breaking_the_chains.ogg"
        [/part]
        [part]
            story= _ "As they marched, many men and women from the small hamlets peppering the area around Carcyn and the Gray Woods approached the group, asking to join them. The ascent of the Queen had cast an uneasy pall over the citizens of Wesnoth, and some of them were willing to resist it."
        [/part]
        [part]
            story= _ "Knowing they too would be labeled criminals, he reluctantly accepted their help. Baldras is now able to recruit outlaws."
        [/part]
        [part]
            story= _ "Camped at the edge of the forest, they quietly observed substantial troop movements coming from the direction of Aldril, a nearby city, and marching to the northwest. Unsure what to make of it, they debated their next course of action..."
        [/part]
        [part]
            show_title=yes
            background="maps/wesnoth-liberty.png"
            {L_DOT 282 435}
            {L_DOT 260 439}
            {L_DOT 238 431}
            {L_CROSS 223 412}
        [/part]
    [/story]

    {DUSK}
    {FIRST_WATCH}
    {SECOND_WATCH}
    {DAWN}
    {MORNING}
    {AFTERNOON}

    [side]
        side=1
        type=Highwayman
        description=Baldras
        canrecruit=yes
        controller=human
        gold=100
    [/side]

    [side]
        side=2
        type=Royal Guard
        description=Archarel
        user_description= _ "Archarel"
        canrecruit=yes
        recruit=Swordsman,Red Mage,Horseman,Bowman,Cavalryman
        {GOLD 100 150 200}
        controller=ai
        [ai]
            recruitment_pattern=mixed fighter,fighter,fighter,archer,scout
            village_value=0
        [/ai]
        team_name=bad_guys
    [/side]

    [side]
        side=3
        type=Iron Mauler
        description=Linneus
        user_description= _ "Linneus"
        facing=sw
        canrecruit=yes
        recruit=Heavy Infantryman,Mage,Spearman
        gold=100
        controller=ai
        team_name=bad_guys
    [/side]

    [event]
        name=prestart

        # {SCATTER_IMAGE (terrain=Gg) 14 scenery/oak-leaning.png}
        {PLACE_IMAGE scenery/rock1.png 12 22} 

        [objectives]
            side=1
            [objective]
                description= _ "Kill all enemy forces"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Baldras"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Harper"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                condition=lose
            [/objective]
        [/objectives]

        #Hide both leaders initially
        [store_unit]
            variable=stored_Archarel
            kill=yes
            [filter]
                description=Archarel
            [/filter]
        [/store_unit]
        [store_unit]
            variable=stored_Linneus
            kill=yes
            [filter]
                description=Linneus
            [/filter]
        [/store_unit]
        #set up units
        [recall]
            description=Harper
        [/recall]
        {LOYAL_UNIT 1 Outlaw Jingo ( _ "Jingo") 30 17} 
        {LOYAL_UNIT 1 Outlaw Majel ( _ "Majel") 32 17}
        # wmllint: recognize Jingo
        # wmllint: recognize Majel
    [/event]

    #
    # Starting conversation and actions
    #
    [event]
        name=start

        [allow_recruit]
            side=1
            type=Outlaw
        [/allow_recruit]

        [message]
            description=Baldras
            message= _ "The words of Lord Maddock have weighed heavy on me these past few days. It has dawned on me that we can never win. We will never defeat the entire army of Wesnoth. Idiocy! If the noble lord of Elensefar is unwilling to resist the Queen, how should I ever expect to?"
        [/message]
        [message]
            description=Harper
            message= _ "What's worse is that she appears to have taken notice. We have counted five platoons of heavy infantry marching towards the garrison in just the last 2 hours."
        [/message]
        [message]
            description=Baldras
            message= _ "The garrison. The towers of Halstead are more than a garrison, nephew, they are a fortress. They used to protect this area from the enemies of Wesnoth; I never imagined they would house the enemies of Wesnoth."
        [/message]

        {LOYAL_UNIT 1 Dragoon Pitcher ( _ "Pitcher") 11 1} 
        # wmllint: recognize Pitcher

        {MOVE_UNIT description=Pitcher 20 14}

        [message]
            description=Pitcher
            message= _ "(Baldras!)"
        [/message]
        [message]
            description=Harper
            message= _ "Uncle, he wears the crest of the Elense. We should answer."
        [/message]
        [message]
            description=Baldras
            message= _ "Rider, quiet down before we are discovered! Quickly, approach."
        [/message]

        {MOVE_UNIT description=Pitcher 28 18}

        [message]
            description=Pitcher
            message= _ "Master Baldras, I bring news from the north. During the past week, several patrols have again ventured across the Great River into Annuvin. A man named Relnan opposed them with a small militia. He was victorious."
        [/message]
        [message]
            description=Majel
            message= _ "This is surely good news!"
        [/message]
        [message]
            description=Pitcher
            message= _ "I am afraid it is not. The Queen is sending a branch of her main field army directly from Weldyn. As soon as they arrive, they will burn every village to the ground. No one will live."
        [/message]
        [message]
            description=Baldras
            message= _ "The troop movements all make sense now. We must stop this army from reaching the garrison. We cannot swallow them whole, but we can gnaw away at them. They mustn't take one step without us being there to harass and delay them. When they reach Halstead they must be exhausted or dying."
        [/message]
        [message]
            description=Harper
            message= _ "You just said we can't beat their entire army!"
        [/message]
        [message]
            description=Baldras
            message= _ "Do you propose surrender? It's this or nothing. All we can do is see it through to the end."
        [/message]
        [message]
            description=Pitcher
            message= _ "May you prevail in peace and war. I must depart before I am seen so far from my Lord's borders."
        [/message]

        {MOVE_UNIT description=Pitcher 20 14}

        [kill]
            description=Pitcher
        [/kill]

        [message]
            description=Jingo
            message= _ "Another platoon approaches..."
        [/message]

        {GENERIC_UNIT 3 (Heavy Infantryman) 36 23}
        {MOVE_UNIT x,y=36,23 34 23}

        {GENERIC_UNIT 3 (Heavy Infantryman) 36 24}
        {MOVE_UNIT x,y=36,24 35 23}

        {GENERIC_UNIT 3 (Heavy Infantryman) 36 23}
        {MOVE_UNIT x,y=36,23 35 24}

        {GENERIC_UNIT 3 (Heavy Infantryman) 36 24}
        {MOVE_UNIT x,y=36,24 34 22}

        {GENERIC_UNIT 3 (Heavy Infantryman) 36 23}

        {GENERIC_UNIT 3 (Heavy Infantryman) 36 24}

        [move_unit_fake]
            type=$stored_Linneus.type
            side=$stored_Linneus.side
            x=36,32
            y=23,22
        [/move_unit_fake]
        [unstore_unit]
            variable=stored_Linneus
        [/unstore_unit]
        {CLEAR_VARIABLE stored_Linneus}

        [message]
            description=Baldras
            message= _ "When we are done, no one will fear the open roads and night sky more than the army of the usurper. Strike fast, strike silently... and leave no one alive."
        [/message]
    [/event]

    #
    # Special Event - when you attack the bad guys for the first time they react
    #
    [event]
        name=attack
        [filter_second]
            side=3
        [/filter_second]
        [message]
            description=Linneus
            message= _ "It's an ambush! Hold your ground!"
        [/message]
    [/event]

    #
    # Special Event - after 4 turns, the outpost detachment returns to fight you
    #
    [event]
        name=turn 4
        [message]
            speaker=narrator
            message= _ "The next morning, the local night patrol returned to the nearby outpost. They were surprised to see their fellow soldiers engaged in combat with the band of thugs of which they had heard so much."
            image="wesnoth-icon.png"
        [/message]
        [unstore_unit]
            variable=stored_Archarel
        [/unstore_unit]
        [message]
            description=Archarel
            message= _ "Troops, to arms! These peasant scum think they are above the law. We will show them the law!"
        [/message]
        {CLEAR_VARIABLE stored_Archarel}
    [/event]

    #
    # Special Event - don't step on the fire
    #
    [event]
        name=moveto
        [allow_undo]
        [/allow_undo]
        [filter]
            x,y=31,18
        [/filter]
        [message]
            id=fire_hot
            speaker=unit
            message= _ "Ow! Fire hot! No step in fire!"
        [/message]
    [/event]

    #
    # Victory
    #
    [event]
        name=die
        first_time_only=no
        [filter]
            side=2,3
        [/filter]
        [if]
            [have_unit]
                side=2,3
            [/have_unit]
            [else]
                [message]
                    description=Baldras
                    message= _ "What a bloody mess. We must attack Halstead next. If we wait, they will become invincible. If we can burn it to the ground before that happens, our people may have a chance. Rest well tonight, because tomorrow's battle will decide the fate of our homes, our families, and our freedom."
                [/message]

                [if]
                    [variable]
                        name=Helicrom_status
                        numerical_equals=3
                    [/variable]
                    [then]
                        [message]
                            description=Baldras
                            message= _ "Send word to Helicrom that we are ready. It is time for him to repay his debt."
                        [/message]
                    [/then]
                [/if]

                [endlevel]
                    result=victory
                    bonus=yes
                [/endlevel]
            [/else]
        [/if]
    [/event]

    #
    # Loss conditions - turns run out
    #
    [event]
        name=time over
        [message]
            description=Baldras
            message= _ "We have spent too much time here. Surely the entire Wesnoth army marches on our position. We are done for!"
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    # This is used to create the animated campfire, by having a terrain rule
    # that only matches that one location on the whole map.

    [terrain_graphics]
        map="
, 1
2 , 2
, 3"
        [tile]
            pos,type=2,Ce
        [/tile]
        [tile]
            pos,type=3,Gs^Fp
        [/tile]
        [tile]
            pos=1
            type=Gg
            [image]
                layer=10
                base=36,72
                name="../scenery/fire1:140,../scenery/fire2:140,../scenery/fire3:140,../scenery/fire4:140,../scenery/fire5:140,../scenery/fire6:140,../scenery/fire7:140,../scenery/fire8:140"
            [/image]
        [/tile]
    [/terrain_graphics]

    {LIBERTY_DEATHS}
[/scenario]
