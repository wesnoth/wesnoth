#textdomain wesnoth-dod

[scenario]
    id=02_A_Dream
    name= _ "A Dream"
    map_file=02_A_Dream.map
    turns=14
    next_scenario=03_Fateful_Day
    victory_when_enemies_defeated=no
    theme=Default

    {UNDERGROUND}

    {SCENARIO_MUSIC wanderer.ogg}
    {EXTRA_SCENARIO_MUSIC journeys_end.ogg}
    {EXTRA_SCENARIO_MUSIC silvan_sanctuary.ogg}

    [story]
        [part]
            music=revelation.ogg
            {DOD_STORY}
            story= "<i>" + _"Soon Ougl saw that they had come to a dead end. The way forward was blocked by rock and stone." + "</i>"
        [/part]
        [part]
            {DOD_STORY}
            story= "<i>" + _"There were two options. The trolls could either turn back the way they came or... break through." + "</i>"
        [/part]
        [part]
            show_title=yes
            {DOD_STORY}
            story= "<i>" + _"Of course, they chose the latter." + "</i>"
        [/part]
    [/story]

    # wmllint: validate-off
    [side]
        side=1
        controller=human
        recruit="Troll Whelp, Fire Guardian, Troll Initiate"
        {GOLD 0 165 145}
        income=0
        team_name=good
        color=brightorange
        user_team_name= _ "Golden Flame Tribe"
        {FLAG_VARIANT6 ragged}
        shroud=yes

        # wmllint: recognize Ougl
        {CHARACTER_STATS_OUGL}

        facing=sw

        [unit]
            type=Fire Wraith
            id=SK
            name=_"Spark"
            canrecruit=no

            x,y=15,2
            facing=sw

            [modifications]
                {TRAIT_LOYAL_HERO}
            [/modifications]
        [/unit]
    [/side]
    # wmllint: validate-on

    [side]
        side=2
        controller=ai
        recruit="Wose Sapling"
        {GOLD 0 180 180}
        income=22
        team_name=bad
        color=brightgreen
        user_team_name= _ "Grove Guardians"
        {FLAG_VARIANT wood-elvish}

        [ai]
            grouping=offensive
            passive_leader=yes

            {AI_SIMPLE_NIGHT_ASPECT aggression 0.5}
            {AI_SIMPLE_DAY_ASPECT aggression 0.5}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.0}

            [goal]
                [criteria]
                    side=1
                [/criteria]
                value=5
            [/goal]

#ifdef HARD
            [aggression]
                value=5
            [/aggression]
#endif
        [/ai]

        {NAMED_LOYAL_UNIT 2 (Elder Wose) 3 14 EM _"Emmm the Oak"}
        {NAMED_LOYAL_UNIT 2 (Elder Wose) 13 13 UM _"Ummm the Birch"}
        {NAMED_LOYAL_UNIT 2 (Elder Wose) 14 22 IM _"Immm the Linden"}

        [unit]
            type=Wose Shaman
            id=OM
            name= _ "Ommm the Oldest"
            canrecruit=no

            x,y=7,20
            facing=sw

            [modifications]
                {TRAIT_LOYAL_HERO}
                {TRAIT_INTELLIGENT}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
    [/side]

    [event]
        name=prestart

        [tunnel]
            bidirectional=no
            [filter]
                side=2
            [/filter]
            [source]
                x,y=7,20
            [/source]
            [target]
                x,y=3,14
            [/target]
        [/tunnel]

        [tunnel]
            bidirectional=no
            [filter]
                side=2
            [/filter]
            [source]
                x,y=7,20
            [/source]
            [target]
                x,y=13,13
            [/target]
        [/tunnel]

        [tunnel]
            bidirectional=no
            [filter]
                side=2
            [/filter]
            [source]
                x,y=7,20
            [/source]
            [target]
                x,y=14,22
            [/target]
        [/tunnel]

        {OBJ_WOSE_BRANCH 11 14 WB}

        [objectives]
            [objective]
                description= _ "Survive until turns run out"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Ougl"
                condition=lose
            [/objective]

            [gold_carryover]
                bonus=no
                carryover_percentage=40
            [/gold_carryover]

            [note]
                description= _ "If a Fire Guardian or Fire Wraith moves on a forest or grass tile it will partially burn down. Enter a tile twice to completely burn it down."
            [/note]

            [note]
                description= _ "The grove area has a special ToD: Mystic Light, which gives lawful units bonus +25%, and chaotic -25%."
            [/note]

            [note]
                description= _ "Woses teleport from the castle through Great Trees."
            [/note]
        [/objectives]

        [set_variable]
            name=tree_tiles_burned_counter
            value=0
        [/set_variable]
    [/event]

    [event]
        name=start

        [modify_unit]
            [filter]
                id=OM,EM,UM,IM
            [/filter]
            [object]
                id=om_em_um_im_movement
                duration=forever
                [effect]
                    apply_to=movement
                    set=0
                [/effect]
            [/object]
        [/modify_unit]

        [modify_unit]
            [filter]
                id=EM,UM,IM
            [/filter]
            [object]
                id=no_ambush
                duration=forever
                [effect]
                    apply_to=remove_ability
                    [abilities]
                        {ABILITY_AMBUSH}
                    [/abilities]
                [/effect]
            [/object]
        [/modify_unit]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Now that Ougl was able to control his inner flame, he could easily break through stone walls." + "</i>"
        [/message]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        [animate_unit]
            flag=attack
            [filter]
                id=SK
            [/filter]

            [facing]
                x,y=14,2
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [animate_unit]
            flag=attack
            [filter]
                id=OL
            [/filter]

            [facing]
                x,y=14,2
            [/facing]

            [primary_attack]
                range=melee
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {QUAKE (rumble.ogg)}

        [terrain]
            x,y=14,2
            terrain=Xur
        [/terrain]

        [redraw]
        [/redraw]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [animate_unit]
            flag=attack
            [filter]
                id=SK
            [/filter]

            [facing]
                x,y=14,2
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [animate_unit]
            flag=attack
            [filter]
                id=OL
            [/filter]

            [facing]
                x,y=14,2
            [/facing]

            [primary_attack]
                range=melee
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {QUAKE (rumble.ogg)}

        [remove_shroud]
            side=1
            x,y=14,2
            radius=1
        [/remove_shroud]

        [terrain]
            x,y=14,2
            terrain=Uh^Dr
        [/terrain]

        [redraw]
        [/redraw]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [modify_unit]
            [filter]
                id=OL
            [/filter]
            facing=sw
        [/modify_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"First the stone wall was heated, and then Ougl smashed it." + "</i>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"I have no idea why such a thing should work, but it made sense to Ougl." + "</i>"
        [/message]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {MOVE_UNIT id=SK 14 2}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [animate_unit]
            flag=attack
            [filter]
                id=SK
            [/filter]

            [facing]
                x,y=13,2
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [animate_unit]
            flag=attack
            [filter]
                id=OL
            [/filter]

            [facing]
                x,y=13,2
            [/facing]

            [primary_attack]
                range=melee
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {QUAKE (rumble.ogg)}

        [terrain]
            x,y=13,2
            terrain=Xur
        [/terrain]

        [redraw]
        [/redraw]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [animate_unit]
            flag=attack
            [filter]
                id=SK
            [/filter]

            [facing]
                x,y=13,2
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [animate_unit]
            flag=attack
            [filter]
                id=OL
            [/filter]

            [facing]
                x,y=13,2
            [/facing]

            [primary_attack]
                range=melee
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {QUAKE (rumble.ogg)}

        [remove_shroud]
            side=1
            x,y=13,2
            radius=1
        [/remove_shroud]

        [terrain]
            x,y=13,2
            terrain=Uh^Dr
        [/terrain]

        [redraw]
        [/redraw]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {MOVE_UNIT id=OL 13 2}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [animate_unit]
            flag=attack
            [filter]
                id=SK
            [/filter]

            [facing]
                x,y=13,3
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [animate_unit]
            flag=attack
            [filter]
                id=OL
            [/filter]

            [facing]
                x,y=13,3
            [/facing]

            [primary_attack]
                range=melee
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {QUAKE (rumble.ogg)}

        [terrain]
            x,y=13,3
            terrain=Xur
        [/terrain]

        [redraw]
        [/redraw]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [animate_unit]
            flag=attack
            [filter]
                id=SK
            [/filter]

            [facing]
                x,y=13,3
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [animate_unit]
            flag=attack
            [filter]
                id=OL
            [/filter]

            [facing]
                x,y=13,3
            [/facing]

            [primary_attack]
                range=melee
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {QUAKE (rumble.ogg)}

        [remove_shroud]
            side=1
            x,y=13,3
            radius=1
        [/remove_shroud]

        [terrain]
            x,y=13,3
            terrain=Uh^Dr
        [/terrain]

        [redraw]
        [/redraw]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        {MOVE_UNIT id=OL 13 3}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [remove_shroud]
            side=1
            x,y=13,4
            radius=1
        [/remove_shroud]

        [remove_shroud]
            side=1
            x,y=11,6
            radius=3
        [/remove_shroud]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Ougl broke through the rocks again and again until he opened a way to a very mysterious place." + "</i>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"They were no longer as deep underground as before and the darkness was not as thick." + "</i>"
        [/message]

        {MOVE_UNIT id=OL 11 6}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {MOVE_UNIT id=SK 12 4}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {MOVE_UNIT id=OL 8 5}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [remove_shroud]
            side=1
            x,y=8,5
            radius=4
        [/remove_shroud]

        {MOVE_UNIT id=SK 9 8}

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [message]
            speaker=OL
            message= "<b>" + _"..." + "</b>"
        [/message]

        {SCROLL_TO 7 20}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [remove_shroud]
            side=1
            x,y=7,20
            radius=4
        [/remove_shroud]

        [remove_shroud]
            side=1
            x,y=10,18
            radius=4
        [/remove_shroud]

        [remove_shroud]
            side=1
            x,y=6,17
            radius=4
        [/remove_shroud]

        [remove_shroud]
            side=1
            x,y=8,20
            radius=4
        [/remove_shroud]

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [sound]
            name="data/core/sounds/troll-die-1.ogg"
        [/sound]

        [message]
            speaker=OL
            message= "<b>" + _"Ougl!!" + "</b>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Ougl loved this strange new green color, and there was plenty of it here." + "</i>"
        [/message]

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [unit]
            type=Wose
            id=AM
            name=_"Ammm the Maple"
            canrecruit=yes
            side=2

            x,y=4,11
            animate=no
            facing=ne
        [/unit]

        {MOVE_UNIT id=AM 5 8}

        [modify_unit]
            [filter]
                id=AM
            [/filter]
            facing=ne
        [/modify_unit]

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [message]
            speaker=AM
            message= "<b>" + _"A m m m...?" + "</b>"
        [/message]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        [message]
            speaker=OL
            message= "<b>" + _"...?" + "</b>"
        [/message]

        {MOVE_UNIT id=AM 6 7}

        [modify_unit]
            [filter]
                id=AM
            [/filter]
            facing=ne
        [/modify_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [message]
            speaker=AM
            message= "<b>" + _"A m m m...!" + "</b>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Ougl could not guess what the leafy creature might want from him and his brothers, for Ougl could not speak or understand the language of other beings. He only knew feelings and emotions." + "</i>"
        [/message]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"...And from moment to moment he felt more and more anger from the tree folk, which waved its branches menacingly at the nearby Fire Wraith." + "</i>"
        [/message]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        {MOVE_UNIT id=AM 4 11}

        {TELEPORT_UNIT (id=AM) 8 20}

        [message]
            speaker=OL
            message= "<b>" + _"Ougl...?" + "</b>"
        [/message]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        [kill]
            id=SK
        [/kill]
        {FAKE_UNIT_MOVE 9 8 8 5 1 "Fire Wraith" ()}

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"There was nothing left for the trolls to do but defend themselves." + "</i>"
        [/message]
    [/event]

#ifdef HARD
    [event]
        name=recruit
        [filter]
            side=2
        [/filter]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Units recruited by an enemy leader are always assigned the fearless trait." + "</i>"
        [/message]
    [/event]
#endif

    [event]
        name=moveto
        first_time_only=no
        [filter]
            type=Fire Guardian, Fire Wraith
            [filter_location]
                terrain=Gd^Fdw
            [/filter_location]
        [/filter]

        [sound]
            name=flame-big.ogg
        [/sound]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [sound]
            name=wose-die.ogg
        [/sound]

        [terrain]
            x,y=$x1,$y1
            terrain=Gll
        [/terrain]

        [redraw]
        [/redraw]

        [if]
            [variable]
                name=tree_tiles_burned_counter
                greater_than_equal_to=10
            [/variable]
            [else]
                [set_variable]
                    name=tree_tiles_burned_counter
                    add=1
                [/set_variable]
            [/else]
        [/if]

        [if]
            [variable]
                name=tree_tiles_burned_counter
                greater_than_equal_to=10
            [/variable]
            [then]
                [set_achievement]
                    content_for=dusk_of_dawn
                    id="dod_se"
                [/set_achievement]

                {CLEAR_VARIABLE tree_tiles_burned_counter}
            [/then]
        [/if]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            type=Fire Guardian, Fire Wraith
            [filter_location]
                terrain=Gs^Fds,Gg^Fds
            [/filter_location]
        [/filter]

        [sound]
            name=flame-big.ogg
        [/sound]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [sound]
            name=wose-die.ogg
        [/sound]

        [terrain]
            x,y=$x1,$y1
            terrain=Gd^Fdw
        [/terrain]

        [redraw]
        [/redraw]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            type=Fire Guardian, Fire Wraith
            [filter_location]
                terrain=Gs^Fet,Gg^Fet
            [/filter_location]
        [/filter]

        [sound]
            name=flame-big.ogg
        [/sound]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [sound]
            name=wose-die.ogg
        [/sound]

        [terrain]
            x,y=$x1,$y1
            terrain=Gd^Fetd
        [/terrain]

        [redraw]
        [/redraw]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            type=Fire Guardian, Fire Wraith
            [filter_location]
                terrain=Gs,Gg,Gs^Em,Gg^Em,Gs^Efm,Gg^Efm
            [/filter_location]
        [/filter]

        [sound]
            name=flame-big.ogg
        [/sound]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [terrain]
            x,y=$x1,$y1
            terrain=Gd
        [/terrain]

        [redraw]
        [/redraw]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            type=Fire Guardian, Fire Wraith
            [filter_location]
                terrain=Gs^Es,Gg^Es
            [/filter_location]
        [/filter]

        [sound]
            name=flame-big.ogg
        [/sound]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [terrain]
            x,y=$x1,$y1
            terrain=Gd^Es
        [/terrain]

        [redraw]
        [/redraw]
    [/event]

    [event]
        name=moveto
        [filter]
            type=Troll Shaman, Troll Initiate, Fire Guardian, Fire Wraith, Fire Ant, Firebane Ant, Firebomb Ant
            x,y=5,7
        [/filter]

        [animate_unit]
            flag=attack
            [filter]
                id=$unit.id
            [/filter]

            [facing]
                x,y=4,6
            [/facing]

            [primary_attack]
                range=ranged
            [/primary_attack]
        [/animate_unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [terrain]
            x,y=5,7
            terrain=Urb^Ebn
        [/terrain]

        [redraw]
        [/redraw]
    [/event]

    [event]
        name=post advance
        [filter]
            side=1
            type=Fire Wraith
        [/filter]

        [set_achievement]
            content_for=dusk_of_dawn
            id="dod_ltb"
        [/set_achievement]
    [/event]

    [event]
        name=moveto
        [filter]
            side=1
            x,y=3,6
        [/filter]

        [unit]
            type=Wild Saurian
            id=RE
            name=_"Refumee the Swampling"
            canrecruit=no
            unrenamable=yes
            side=1

            x,y=3,6
            animate=yes
            passable=yes

            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [message]
            speaker=RE
            message= "<b>" + _"S y s y...!" + "</b>"
        [/message]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"The Saurian’s speech meant nothing to Ougl, but Ougl felt that he could trust and rely on her. He felt that the swamp dweller was not hostile and wanted to support him." + "</i>"
        [/message]
    [/event]

    [event]
        name=last breath
        [filter]
            id=RE
        [/filter]

        [message]
            speaker=RE
            message= "<b>" + _"S y s y..." + "</b>"
        [/message]
    [/event]

    [event]
        name=sighted
        [filter]
            id=EM,UM,IM
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"The young trolls spotted a huge tree within the underground forest. This was one of the great woses, the guardians of the grove, and it glared menacingly at the stone creatures who it believed were threatening saplings." + "</i>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Ougl was quick to guess that the death of any Elder Wose would only further enrage the treefolk, and resolved to keep his distance from them." + "</i>"
        [/message]

        [objectives]
            [objective]
                description= _ "Survive until turns run out"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Ougl"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of any of the Elder Woses located on the Great Trees"
                condition=lose
            [/objective]

            [gold_carryover]
                bonus=no
                carryover_percentage=40
            [/gold_carryover]

            [note]
                description= _ "If a Fire Guardian or Fire Wraith moves on a forest or grass tile it will partially burn down. Enter a tile twice to completely burn it down."
            [/note]

            [note]
                description= _ "The grove area has a special ToD: Mystic Light, which gives lawful units bonus +25%, and chaotic -25%."
            [/note]

            [note]
                description= _ "Woses teleport from the castle through Great Trees."
            [/note]
        [/objectives]
    [/event]

    [event]
        name=die
        [filter]
            id=EM,UM,IM
        [/filter]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"With the death of one of the three great guardians of the grove, the woses went into a frenzy. The trolls, helpless in the face of these strange new creatures, knew it was their end." + "</i>"
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

#ifdef HARD
    [event]
        name=recruit
        first_time_only=no
        [filter]
            type=Wose Sapling
        [/filter]

        [modify_unit]
            [filter]
                id=$unit.id
            [/filter]
            [modifications]
                {TRAIT_FEARLESS}
            [/modifications]
        [/modify_unit]
    [/event]
#endif

    [event]
        name=die
        [filter]
            race=wose
        [/filter]

        [set_variable]
            name=wose_vanished
            value=1
        [/set_variable]
    [/event]

    [event]
        name=turn 1, turn 5, turn 9, turn 12
        first_time_only=no

        {GENERIC_UNIT 2 (Wose) 6 19 }
    [/event]

    [event]
        name=turn 10

        [gold]
            side=2
            amount=75
        [/gold]
    [/event]

    [event]
        name=turn 14

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [modify_side]
            side=2
            team_name=good
        [/modify_side]

        [message]
            speaker=OM
            message= "<b>" + _"O m m m...!!" + "</b>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"As the sound of battle echoed through the grove, a great old tree finally began to stir." + "</i>"
        [/message]

        [message]
            speaker=AM
            message= "<b>" + _"A m m m...?" + "</b>"
        [/message]

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        [message]
            speaker=OM
            message= "<b>" + _"O m m m..." + "</b>"
        [/message]

        [message]
            speaker=OL
            message= "<b>" + _"Ougl ?" + "</b>"
        [/message]

        [message]
            speaker=OM
            message= "<b>" + _"O m m m..." + "</b>"
        [/message]

        [kill]
            side=2
            [not]
                id=OM,AM
            [/not]
        [/kill]

        [put_to_recall_list]
            side=1
            [not]
                id=OL
            [/not]
        [/put_to_recall_list]

        {FADE_TO_BLACK}

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        {SCROLL_TO 7 20}

        {TELEPORT_UNIT (id=OL) 6 17}

        [delay]
            time=1000
            accelerate=yes
        [/delay]

        {FADE_IN}

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"The awakened Wose Shaman spoke to Ougl in a strange way, and Ougl understood. The Wose’s name was Ommm, and it was the leader of the tree folk." + "</i>"
        [/message]

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Ommm used a mysterious magic to see the purpose of the troll’s journey, and whether they had evil intentions towards the green grove." + "</i>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"It soon realized that the trolls were not to blame for the unfortunate skirmish." + "</i>"
        [/message]

        [message]
            speaker=OM
            message= "<b>" + _"O m m m...?" + "</b>"
        [/message]

        [delay]
            time=500
            accelerate=yes
        [/delay]

        [message]
            speaker=OL
            message= "<b>" + _"Ougl..." + "</b>"
        [/message]

        [message]
            speaker=OM
            message= "<b>" + _"O m m m..." + "</b>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"Ougl wanted to travel further upwards, but the Wose Shaman advised him against it. The woses warned that the surface held many creatures who were not guided by goodness of heart, but by the law of strength." + "</i>"
        [/message]

        [message]
            speaker=narrator
            image=wesnoth-icon.png
            message= "<i>" + _"But Ougl had seen green lands now, and he began to dream of seeing more. The higher he climbed, the more green there would be." + "</i>"
        [/message]

        [delay]
            time=1500
            accelerate=yes
        [/delay]

        [if]
            [variable]
                name=wose_vanished
                greater_than_equal_to=1
            [/variable]
            [then]
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message= "<i>" + _"After some thought, the Wose Shaman agreed to give the trolls directions to the surface. But the trolls were to first plant new trees in place of the ones that had fallen during the battle." + "</i>"
                [/message]

                {CLEAR_VARIABLE wose_vanished}
            [/then]
            [else]
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message= "<i>" + _"After some thought, the Wose Shaman agreed to give the trolls directions to the surface, but again warned Ougl that sometimes dreams are better left in the realm of dreams." + "</i>"
                [/message]
            [/else]
        [/if]

        [endlevel]
            result=victory
            bonus=no
            {NEW_GOLD_CARRYOVER 40}
        [/endlevel]
    [/event]

    [event]
        name=post advance
        [filter]
            id=SK
            type=Fire Wraith
        [/filter]

        [modify_unit]
            [filter]
                id=SK
            [/filter]
            id=FE
            name=_"Flame"
        [/modify_unit]
    [/event]

    [time_area]
        x="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16"
        y="11-24,11-24,11-24,10-24,10-24,11-24,10-24,11-24,10-24,10-24,10-24,11-24,12-24,12-24,11-24,12-24,12-24"
        {MYSTIC_LIGHT}
    [/time_area]

    {PLACE_IMAGE "scenery/monolith1.png" 8 8}

    {PLACE_IMAGE "scenery/rock4.png" 4 11}

    {HERODEATH_OUGL}
[/scenario]
