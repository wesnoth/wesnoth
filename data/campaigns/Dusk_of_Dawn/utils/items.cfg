#define OBJ_BLUE_POTION X Y ID
    {PLACE_IMAGE items/potion-blue.png ({X}) ({Y})}
    {VARIABLE potion_drank 0}
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x,y={X},{Y}
        [/filter]

        [if]
            [variable]
                name=potion_drank
                numerical_equals=0
            [/variable]
            [then]
                [message]
                    speaker=narrator
                    image="wesnoth-icon.png"
                    caption="Should $unit.name| drink the potion?"
                    message= _ "Potion grants steadfast ability and 20% resistance to impact."
                    [option]
                        label= _ "Yes"
                        [command]
                            [object]
                                id={ID}
                                name= _ "Blue Potion"
                                image=items/potion-blue.png
                                description= _ "A potion of unknown origin."
                                cannot_use_message= _ ""
                                duration=forever
                                [filter]
                                    side=1
                                    x,y={X},{Y}
                                [/filter]
                                [then]
                                    [remove_item]
                                        x,y={X},{Y}
                                    [/remove_item]
                                    [message]
                                        speaker=$unit.id|
                                        image="wesnoth-icon.png"
                                        caption=""
                                        male_message= _ "Potion grants steadfast ability and 20% resistance to impact."
                                        female_message= _ "Potion grants steadfast ability and 20% resistance to impact."
                                    [/message]
                                    {VARIABLE potion_drank 1}
                                [/then]

                                [effect]
                                    apply_to=new_ability
                                    [abilities]
                                        {ABILITY_STEADFAST}
                                    [/abilities]
                                [/effect]

                                [effect]
                                    apply_to=resistance
                                    replace=yes
                                    [resistance]
                                        impact=80
                                    [/resistance]
                                [/effect]
                            [/object]
                        [/command]
                    [/option]
                    [option]
                        label= _ "No"
                    [/option]
                [/message]
            [/then]
        [/if]
    [/event]
#enddef

#define OBJ_WOSE_BRANCH X Y ID
    {PLACE_IMAGE items/branch.png ({X}) ({Y})}
    {VARIABLE branch_taken 0}
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x,y={X},{Y}
        [/filter]

        [if]
            [variable]
                name=branch_taken
                numerical_equals=0
            [/variable]
            [then]
                [message]
                    speaker=narrator
                    image="wesnoth-icon.png"
                    caption="Should $unit.name| take the branch?"
                    message= _ "This magical branch grants +2 damage to melee attacks."
                    [option]
                        label= _ "Yes"
                        [command]
                            [object]
                                id={ID}
                                name= _ "Wose Branch"
                                image=items/branch.png
                                description= _ "The magical branch of some great Wose."
                                cannot_use_message= _ ""
                                duration=forever
                                [filter]
                                    side=1
                                    x,y={X},{Y}
                                [/filter]
                                [then]
                                    [remove_item]
                                        x,y={X},{Y}
                                    [/remove_item]
                                    [message]
                                        speaker=$unit.id|
                                        image="wesnoth-icon.png"
                                        caption=""
                                        message= _ "This magical branch grants +2 damage to melee attacks."
                                    [/message]
                                    {VARIABLE branch_taken 1}
                                [/then]

                                [effect]
                                    apply_to=attack
                                    range=melee
                                    increase_damage=2
                                [/effect]
                            [/object]

                            [set_achievement]
                                content_for=dusk_of_dawn
                                id="dod_gs"
                            [/set_achievement]
                        [/command]
                    [/option]
                    [option]
                        label= _ "No"
                    [/option]
                [/message]
            [/then]
        [/if]
    [/event]
#enddef

#define EVENT_ECHOES_OF_THE_EARTH X Y ID
    {PLACE_IMAGE scenery/monolith3.png ({X}) ({Y})}
    {VARIABLE echoes_gifted 0}
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x,y={X},{Y}
        [/filter]

        [if]
            [variable]
                name=echoes_gifted
                numerical_equals=0
            [/variable]
            [then]
                [message]
                    speaker=narrator
                    image="wesnoth-icon.png"
                    caption="Should $unit.name| touch the monolith?"
                    message= _ "This unit will gain the stun weapon special on melee attacks."
                    [option]
                        label= _ "Yes"
                        [command]
                            [object]
                                id={ID}
                                name= _ "Echoes of the Earth"
                                image=scenery/monolith3.png
                                description= _ "Powerful echoes from the bowels of the earth."
                                cannot_use_message= _ ""
                                duration=forever
                                [filter]
                                    side=1
                                    x,y={X},{Y}
                                [/filter]
                                [then]
                                    [message]
                                        speaker=$unit.id|
                                        image="wesnoth-icon.png"
                                        caption=""
                                        message= _ "The unit gains the stun weapon special on melee attacks."
                                    [/message]
                                    {VARIABLE echoes_gifted 1}
                                [/then]

                                [effect]
                                    apply_to=attack
                                    range=melee
                                    [set_specials]
                                        mode=append
                                        {WEAPON_SPECIAL_STUN}
                                    [/set_specials]
                                [/effect]
                            [/object]

                            [message]
                                speaker=narrator
                                image=wesnoth-icon.png
                                message= "<i>" + _"After $unit.name| absorbed the stoneâ€™s power, the monolith lost its magical properties." + "</i>"
                            [/message]
                        [/command]
                    [/option]
                    [option]
                        label= _ "No"
                    [/option]
                [/message]
            [/then]
        [/if]
    [/event]
#enddef
