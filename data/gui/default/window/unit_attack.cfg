#textdomain wesnoth-lib
###
### Definition of the window select which unit to attack
###

#define _GUI_BIG_ATTACKER_PANEL
[grid]
	id = "attacker"
	linked_group = "unit"

	[row]
		grow_factor = 1

		[column]
			horizontal_alignment = "center"
			vertical_alignment = "center"

			border = "all"
			border_size = 5

			[image]
				id = "attacker_image"
			[/image]

		[/column]

		[column]
			grow_factor = 1
			horizontal_alignment = "right"

			[grid]

				[row]
					grow_factor = 1

					[column]
						horizontal_alignment = "right"

						border = "all"
						border_size = 5

						[label]
							id = "attacker_stats"
							definition = "default"

							text_alignment = "right"
						[/label]

					[/column]

				[/row]

				[row]

					[column]
						horizontal_alignment = "right"
						border = "all"
						border_size = 5

						[button]
							id = "attacker_profile"
							definition = "default"

							label = _ "Profile"
						[/button]

					[/column]

				[/row]

			[/grid]

		[/column]

	[/row]

[/grid]
#enddef

#define _GUI_BIG_DEFENDER_PANEL
[grid]
	id = "defender"
	linked_group = "unit"

	[row]
		grow_factor = 1

		[column]
			grow_factor = 1
			horizontal_alignment = "left"

			[grid]

				[row]
					grow_factor = 1

					[column]
						horizontal_alignment = "left"

						border = "all"
						border_size = 5

						[label]
							id = "defender_stats"
							definition = "default"

							text_alignment = "left"
						[/label]

					[/column]

				[/row]

				[row]
					grow_factor = 1

					[column]
						horizontal_alignment = "left"
						border = "all"
						border_size = 5

						[button]
							id = "defender_profile"
							definition = "default"

							label = _ "Profile"
						[/button]

					[/column]

				[/row]

			[/grid]

		[/column]

		[column]
			horizontal_alignment = "center"
			vertical_alignment = "center"
			border = "all"
			border_size = 5

			[image]
				id = "defender_image"
			[/image]

		[/column]

	[/row]

[/grid]
#enddef

#define _GUI_BIG_UNIT_PANEL
[grid]

	[row]

		[column]
			horizontal_grow = "true"
			{_GUI_BIG_ATTACKER_PANEL}
		[/column]

		[column]

			[spacer]
				width = 10
			[/spacer]

		[/column]

		[column]
			horizontal_grow = "true"
			{_GUI_BIG_DEFENDER_PANEL}
		[/column]

	[/row]

[/grid]
#enddef

#define _GUI_BIG_WEAPON_PANEL
[grid]

	[row]

		[column]
			horizontal_grow = "true"
			border = "all"
			border_size = 5

			[listbox]
				id = "weapon_list"
				definition = "default"

				[list_definition]

					[row]

						[column]
							vertical_grow = "true"
							horizontal_grow = "true"

							[toggle_panel]
								definition = "default"

								return_value_id = "ok"
								[grid]

									[row]
										grow_factor = 1

										[column]
											grow_factor = 0
											horizontal_alignment = "left"

											border = "all"
											border_size = 5

											[image]
												id = "attacker_weapon_icon"
												definition = "default"
											[/image]

										[/column]

										[column]
											grow_factor = 1
											horizontal_alignment = "left"
											vertical_alignment = "center"

											border = "all"
											border_size = 5

											[label]
												id = "attacker_weapon"
												definition = "default"
												linked_group = "weapon"
											[/label]

										[/column]

										[column]
											grow_factor = 1
											horizontal_alignment = "center"
											vertical_alignment = "center"

											border = "all"
											border_size = 5

											[label]
												id = "range"
												definition = "default"

												text_alignment = "center"
											[/label]

										[/column]

										[column]
											grow_factor = 1
											horizontal_alignment = "right"
											vertical_alignment = "center"

											border = "all"
											border_size = 5

											[label]
												id = "defender_weapon"
												definition = "default"
												linked_group = "weapon"

												text_alignment = "right"
											[/label]

										[/column]

										[column]
											grow_factor = 0
											horizontal_alignment = "right"
											border = "all"
											border_size = 5

											[image]
												id = "defender_weapon_icon"
												definition = "default"
											[/image]

										[/column]

									[/row]

								[/grid]

							[/toggle_panel]

						[/column]

					[/row]

				[/list_definition]

			[/listbox]

		[/column]

	[/row]

[/grid]
#enddef

#define _GUI_BUTTON_ROW
[grid]

	[row]

		[column]
			grow_factor = 1

			border = "all"
			border_size = 5
			horizontal_alignment = "right"

			[button]
				id = "damage_calculation"
				definition = "default"

				label = _ "Damage Calculation"
			[/button]

		[/column]

	[/row]

	[row]

		[column]
			grow_factor = 1
			horizontal_alignment = "right"

			[grid]

				[row]

					[column]
						grow_factor = 1

						border = "all"
						border_size = 5
						horizontal_alignment = "right"

						[button]
							id = "ok"
							definition = "default"

							label = _ "Attack"
						[/button]

					[/column]

					[column]
						border = "all"
						border_size = 5

						[button]
							id = "cancel"
							definition = "default"

							label = _ "Cancel"
						[/button]

					[/column]

				[/row]

			[/grid]

		[/column]

	[/row]

[/grid]
#enddef

[window]
	id = "unit_attack"
	description = "Unit attack dialog."

	[resolution]
		definition = "default"

		automatic_placement = "true"
		vertical_placement = "center"
		horizontal_placement = "center"

		# Both unit panels are the same width.
		[linked_group]
			id = "unit"
			fixed_width = "true"
		[/linked_group]

		[linked_group]
			id = "unit_image"
			fixed_height = "true"
		[/linked_group]

		# All weapons share the same size, regardless whether attacker or
		# defender.
		[linked_group]
			id = "weapon"
			fixed_width = "true"
		[/linked_group]

		[tooltip]
			id = "tooltip_large"
		[/tooltip]

		[helptip]
			id = "tooltip_large"
		[/helptip]

		[grid]

			[row]

				[column]
					grow_factor = 1

					border = "all"
					border_size = 5
					horizontal_alignment = "left"
					[label]
						definition = "title"

						label = _ "Attack Enemy"
					[/label]

				[/column]

			[/row]

			[row]

				[column]
					horizontal_grow = "true"
					{_GUI_BIG_UNIT_PANEL}
				[/column]

			[/row]

			[row]

				[column]
					grow_factor = 1

					border = "all"
					border_size = 5
					horizontal_alignment = "left"

					[label]
						label = _ "Choose weapon:"
					[/label]

				[/column]
				
			[/row]

			[row]

				[column]
					horizontal_grow = "true"
					{_GUI_BIG_WEAPON_PANEL}
				[/column]

			[/row]

			[row]

				[column]
					horizontal_grow = "true"
					{_GUI_BUTTON_ROW}
				[/column]

			[/row]

		[/grid]

	[/resolution]

[/window]

#undef _GUI_BIG_ATTACKER_PANEL
#undef _GUI_BIG_DEFENDER_PANEL
#undef _GUI_BIG_UNIT_PANEL
#undef _GUI_BIG_WEAPON_PANEL
#undef _GUI_BUTTON_ROW

