#textdomain wesnoth-multiplayer

# wmllint: local spelling Kah Ruuk Oni Onis
[test]
    id=ai_arena_small
    name= _ "AI Arena - small"
    description= _ "This most unusual of caves was once known as the Chamber of Laughing Devils, and was the inner citadel of the Kah Ruuk Oni. The Kah Ruuk were a wicked and cunning race of man-eating demons, who terrorized the people of the Eastern Lands for nearly four hundred years, before vanishing from Irdya without a trace. Since that time, many factions have vied for dominion over the Den of Onis, hoping to unlock the strange and mysterious magics of its creators."
    map_data="{ai/maps/scenario-AI_Arena_small.map}"
    random_start_time="no"
    turns=-1

    {DEFAULT_SCHEDULE}
    {DEFAULT_MUSIC_PLAYLIST}

    {PLACE_IMAGE items/burial.png 15 13}
    {PLACE_IMAGE items/burial.png 26 16}
    {PLACE_IMAGE items/burial.png 4 9}

    [event]
        name=preload
        [set_variable]
            name=test_path_to_ai
            value=ai/ais/default_ai.cfg
        [/set_variable]
        [set_variable]
            name=test_path_to_idle_ai
            value=ai/dev/idle_ai.cfg
        [/set_variable]
        [set_variable]
            name=test_path_to_default_ai
            value=ai/ais/default_ai.cfg
        [/set_variable]
        [set_variable]
            name=test_path_to_formula_ai
            value=ai/ais/formula_ai.cfg
        [/set_variable]
        [set_variable]
            name=test_id
            value=2
        [/set_variable]
    [/event]

    [side]
        side=1
        name="AI Developer"
        type=Nightgaunt
        canrecruit=yes
        controller=human
        team_name=master
        user_team_name= _ "teamname^Master"
        fog=no
        [modifications]
            {TRAIT_INTELLIGENT}
            {TRAIT_QUICK}
            {TRAIT_LOYAL}
        [/modifications]
    [/side]
    [side]
        side=2
        name="Challenger AI"
        type=White Mage
        canrecruit=yes
        controller=ai
        team_name=north
        user_team_name= _ "teamname^North"
        fog=yes
    [/side]
    [side]
        side=3
        name="Champion AI"
        type=Dark Adept
        canrecruit=yes
        controller=ai
        team_name=south
        user_team_name= _ "teamname^South"
        fog=yes
    [/side]

    [label]
        x,y=6,21
        text=_ "test!"
    [/label]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y,side=6,21,1
        [/filter]
        [message]
            speaker=unit
            message=_ "Which test do you want to run, oh Mightly AI Developer ?"
            [option]
                message=_ "Repeat last test [$test_id]"
            [/option]
            [option]
                message=_ "Clean the Arena [0]"
                [command]
                    [set_variable]
                        name=test_id
                        value=0
                    [/set_variable]
                [/command]
            [/option]
            [option]
                message=_ "Healing: Simple healing use [1]"
                [command]
                    [set_variable]
                        name=test_id
                        value=1
                    [/set_variable]
                [/command]
            [/option]
            [option]
                message=_ "Poison: Spreading poison around [2]"
                [command]
                    [set_variable]
                        name=test_id
                        value=2
                    [/set_variable]
                [/command]
            [/option]
        [/message]
        [message]
            speaker=unit
            message=_ "Which AI do you want to use, oh Mightly AI Developer ?"
            [option]
                message=_ "I am happy with the current AI of team 3, [$test_path_to_ai]"
            [/option]
            [option]
                message=_ "My AI is DEFAULT AI, and it strikes fear into the hearts of mortals."
                [command]
                    [set_variable]
                        name=test_path_to_ai
                        value=$test_path_to_default_ai
                    [/set_variable]
                [/command]
            [/option]
            [option]
                message=_ "I am the king of FORMULA AI, and I will use its vast powers for world domination."
                [command]
                    [set_variable]
                        name=test_path_to_ai
                        value=$test_path_to_formula_ai
                    [/set_variable]
                [/command]
            [/option]
            [option]
                message=_ "I've come with my own AI, and I am ready to test its strength"
                [command]
                    [message]
                        speaker=unit
                        message=_ "and where is it located ? (path follows the usual WML convention)"
                        [text_input]
                            label=_ "AI Location:"
                            variable="test_path_to_ai"
                        [/text_input]
                    [/message]
                [/command]
            [/option]
            [option]
                message=_ "I want to test formulaAI-based poisoning improvements written by Velory"
                [command]
                    [set_variable]
                        name=test_path_to_ai
                        value=ai/dev/formula_ai_poisoning.cfg
                    [/set_variable]
                [/command]
            [/option]
        [/message]
        [command]
            [fire_event]
                name="do_clean_arena"
            [/fire_event]
        [/command]
        [command]
            [fire_event]
                name="do_setup_test"
            [/fire_event]
        [/command]
        [command]
            [fire_event]
                name="do_replace_ai_2"
            [/fire_event]
        [/command]
    [/event]

    [event]
        name=do_clean_arena
        first_time_only=no
        [kill]
            animate=no
            fire_event=no
            canrecruit=no
        [/kill]
        [capture_village]
            x,y=5,9
        [/capture_village]
        [capture_village]
            x,y=6,19
        [/capture_village]
        [capture_village]
            x,y=9,17
        [/capture_village]
        [capture_village]
            x,y=10,20
        [/capture_village]
        [capture_village]
            x,y=11,4
        [/capture_village]
        [capture_village]
            x,y=14,8
        [/capture_village]
        [capture_village]
            x,y=16,17
        [/capture_village]
        [capture_village]
            x,y=19,22
        [/capture_village]
        [capture_village]
            x,y=20,5
        [/capture_village]
        [capture_village]
            x,y=21,9
        [/capture_village]
        [capture_village]
            x,y=24,6
        [/capture_village]
        [capture_village]
            x,y=25,17
        [/capture_village]
        [label]
            x="9"
            y="17"
        [/label]
        [label]
            x="19"
            y="6"
        [/label]
        [label]
            x="25"
            y="19"
        [/label]
        [label]
            x="26"
            y="14"
        [/label]
    [/event]

    [event]
        name=do_setup_test
        first_time_only=no
        [switch]
            variable=test_id
            [case]
                value="0"
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message=_ "The Arena has been cleaned..."
                [/message]
            [/case]
            [case]
                value="1"
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message=_ "This situation should test the ability of AI to heal efficiently..."
                [/message]
                [unit]
                    side=2
                    x,y=10,11
                    type=Peasant
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=16,16
                    type="Mage of Light"
                [/unit]
                [unit]
                    side=2
                    x,y=19,13
                    type="Heavy Infantryman"
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=21,13
                    type="General"
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=21,14
                    type="Grand Knight"
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=10,12
                    type="Halberdier"
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=9,17
                    type=Pikeman
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=20,12
                    type="Master at Arms"
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=10,13
                    type=Peasant
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=21,9
                    type=Peasant
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=16,17
                    type=Peasant
                    hitpoints=1
                [/unit]
                [unit]
                    side=2
                    x,y=9,17
                    type=Peasant
                    hitpoints=1
                [/unit]
                [capture_village]
                    side=2
                    x,y=5,9
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=6,19
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=9,17
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=10,20
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=11,4
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=14,8
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=16,17
                [/capture_village]
                [capture_village]
                    x,y=19,22
                    side=2
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=20,5
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=21,9
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=24,6
                [/capture_village]
                [capture_village]
                    side=2
                    x,y=25,17
                [/capture_village]
                [modify_side]
                    side=2
                    gold=10000
                [/modify_side]
            [/case]
            [case]
                value="2"
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message=_ "This situation should test the ability of AI to spread poison around..."
                [/message]
                [unit]
                    side=2
                    x,y=23,14
                    type="Orcish Assassin"
                [/unit]
                [unit]
                    side=2
                    x,y=25,17
                    type="Orcish Assassin"
                [/unit]
                [unit]
                    side=2
                    x,y=19,7
                    type="Orcish Assassin"
                [/unit]
                [unit]
                    side=2
                    x,y=10,14
                    type="Orcish Assassin"
                [/unit]
                [unit]
                    side=2
                    x,y=20,7
                    type="Orcish Assassin"
                [/unit]
                [unit]
                    side=3
                    x,y=20,5
                    type="Drake Warden"
                    random_traits="no"
                    [modifications]
                        {TRAIT_RESILIENT}
                    [/modifications]
                [/unit]
                [unit]
                    side=3
                    x,y=21,7
                    type="Drake Warden"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    x,y=23,16
                    type="Drake Warden"
                    random_traits=0
                    [modifications]
                        {TRAIT_RESILIENT}
                    [/modifications]
                [/unit]
                [unit]
                    side=3
                    x,y=17,5
                    type="Drake Warden"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    x,y=15,7
                    type="Drake Warden"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    x,y=17,8
                    type="Drake Warden"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    x,y=19,9
                    type="Drake Warden"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    x,y=26,18
                    type="Ancient Wose"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    hitpoints=3
                    x,y=26,14
                    type="Drake Warden"
                    random_traits=0
                [/unit]
                [unit]
                    side=3
                    x,y=9,17
                    type="Skeleton"
                [/unit]
                [label]
                    colour="255,0,0,0"
                    text="Undead target test"
                    visible_in_fog="yes"
                    x="9"
                    y="17"
                [/label]
                [label]
                    colour="255,0,0,0"
                    text="Target choose test"
                    visible_in_fog="yes"
                    x="19"
                    y="6"
                [/label]
                [label]
                    colour="255,0,0,0"
                    text="Regeneration attack test"
                    visible_in_fog="yes"
                    x="25"
                    y="19"
                [/label]
                [label]
                    colour="255,0,0,0"
                    text="Weapon test with low hp target"
                    visible_in_fog="yes"
                    x="26"
                    y="14"
                [/label]
                [modify_side]
                    side=2
                    gold=10000
                [/modify_side]
                [modify_side]
                    side=3
                    gold=10000
                    redeploy_ai_from_location=$test_path_to_idle_ai
                [/modify_side]
            [/case]
            [else]
                [message]
                    speaker=narrator
                    message=_ "sadly, this test is not yet known in the land of Wesnoth..."
                    image=wesnoth-icon.png
                [/message]
            [/else]
        [/switch]
    [/event]

    [event]
        name=do_replace_ai_2
        first_time_only=no
        [modify_side]
            side=2
            redeploy_ai_from_location=$test_path_to_ai
        [/modify_side]
        [message]
            speaker=narrator
            message=_ "and so, the AI for team 2 was redeployed from file '$test_path_to_ai'"
        [/message]
    [/event]
[/test]
