# This test checks if the last_breath and die events are triggered when a unit on the recall list is killed with [kill] tag
# The default behavior is that only units on the map trigger the events, so this test will fail with alice_breath and alice_die
{GENERIC_UNIT_TEST "kill_fires_events" (
    [event]
        name=last_breath
		[set_variable]
			name=$unit.id|_breath
			value=yes
		[/set_variable]
    [/event]
    [event]
        name=die
		[set_variable]
			name=$unit.id|_die
			value=yes
		[/set_variable]
    [/event]
    [event]
        name=start
		[put_to_recall_list]
			id=alice
		[/put_to_recall_list]
		[kill]
			id=alice,bob
			fire_event=yes
		[/kill]
        {ASSERT ({VARIABLE_CONDITIONAL bob_die equals yes})}
        {ASSERT ({VARIABLE_CONDITIONAL alice_die equals yes})}
        {ASSERT ({VARIABLE_CONDITIONAL bob_breath equals yes})}
        {ASSERT ({VARIABLE_CONDITIONAL alice_breath equals yes})}
        {SUCCEED}
    [/event]
)}

