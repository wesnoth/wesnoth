#textdomain wesnoth
# This file needs to be processed *after* all others in this directory
#
# The following flags are defined to have a meaning
#
# * base : the corresponding tile has already graphics for the terrain
# base. No other one should be added.
# * transition-$direction : the corresponding tile already has the transition
# in the given direction (or should not have one). No other one should be
# added.
#
# when adding new probabilities update the commented line
# the proper way to calculate the propabilities is described here
# http://www.wesnoth.org/wiki/TerrainGraphicsTutorial#Cumulative_Probabilities

# NOTE the terrain _off^_usr gets its definition from the code since it's
# themable


    # These are temporary rules for developing and testing a new fake map edge
    # terrain
    [terrain_graphics]
        map="
    , 2
    2 , 2
    , 1
    2 , 2
    , 2"
        [tile]
            pos=1
            type=*^_fme
            set_no_flag=fakemapedge
        [/tile]
        [tile]
            pos=2
            type=*^_fme
        [/tile]

        [image]
            layer=1000
            name=off-map/border.png
            center=90,144
        [/image]
    [/terrain_graphics]
    {TRANSITION_COMPLETE_L (!,*^_fme) (*^_fme) 1000 off-map/border}


 # TRACK LAYOUT MUST STAY ON TOP
 # they set flags that will be used by other macros later.
 # they don't set any image by themselves.
 {LAYOUT_TRACKS_F               *^Bw\ *^Bw| *^Bw/  overlay}
 {LAYOUT_TRACKS_F               *^Br\ *^Br| *^Br/  overlay}
 {LAYOUT_TRACKS_STRAIGHT_F      *^Bsb\ *^Bsb| *^Bsb/  overlay}

 #{TRACK_TEST_FLAG      (*^Br\,*^Br|,*^Br/)  overlay-connect}


 # basic images for the bridge
 {TRACK_COMPLETE      *^Bw\ *^Bw| *^Bw/  overlay bridge/wood}
 # add transition bridges<->bridges wherever images are missing
 {TRACK_BORDER_RESTRICTED_PLF (*Bw|,*^Bw/,*^Bw\) (*^Bw|,*^Bw/,*^Bw/) 100 -80 overlay bridge/wood-end}
 # add dock-style ends to bridges ending in water
 {TRACK_BORDER_RESTRICTED_PLF (*^Bw|,*^Bw/,*^Bw\) (W*^,Ss^,Ai^) 100 -80 overlay bridge/wood-dock}
 # add ramps where straight bridges end on land
 {TRACK_BORDER_RESTRICTED_PLF (*^Bw|,*^Bw/,*^Bw\) (!,C*,K*,*^F*) 100 -80 overlay bridge/wood-end}

 # Mine rail tracks
 {TRACK_COMPLETE              *^Br\ *^Br| *^Br/  overlay misc/rails}
 # add transition rail<->rail wherever images are missing
 {TRACK_BORDER_RESTRICTED_PLF (*^Br/,*^Br\) *^Br| 100 -80 overlay misc/rails-switch-ns}
 {TRACK_BORDER_RESTRICTED_PLF (*^Br|,*^Br/) *^Br\ 100 -80 overlay misc/rails-switch-nwse}
 {TRACK_BORDER_RESTRICTED_PLF (*^Br|,*^Br\) *^Br/ 100 -80 overlay misc/rails-switch-nesw}
 #add transitions at rail end
 {TRACK_BORDER_RESTRICTED_PLF (*^Br|,*^Br/,*^Br\) * 100 -80 overlay misc/rails-end}

 {TRACK_RESTRICTED_PLFB  (*^Bsb|,*^Bsb/,*^Bsb\) * * W* 100 -80 overlay IMAGE_SINGLE bridge/stonebridge-dock}
 {TRACK_RESTRICTED_PLFB  (*^Bsb|,*^Bsb/,*^Bsb\) * * (C*,K*,*^F*) 100 -80 overlay IMAGE_SINGLE bridge/stonebridge-small}
 {TRACK_SINGLE_PLFB  (*^Bsb|,*^Bsb/,*^Bsb\) (C*,K*,*^F*) * (C*,K*,*^F*) 100 -80 overlay IMAGE_SINGLE bridge/stonebridge-small-both}
 {TRACK_SINGLE_PLFB  (*^Bsb|,*^Bsb/,*^Bsb\) (C*,K*,*^F*) * * 100 -80 overlay IMAGE_SINGLE bridge/stonebridge-small-single}
 {TRACK_COMPLETE      *^Bsb\ *^Bsb| *^Bsb/  overlay bridge/stonebridge}
 #{TRACK_TEST_FLAG (*^Bsb|,*^Bsb/,*^Bsb\) overlay-connected}


# Forests
{OVERLAY_COMPLETE       Hh*^Fp           (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/pine-sparse}
{OVERLAY_COMPLETE       *^Fp             (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/pine}

{OVERLAY_COMPLETE       *^Ft             (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/tropical}

{OVERLAY_COMPLETE       Ha*^Fpa          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/snow-forest-sparse}
{OVERLAY_COMPLETE       *^Fpa            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/snow-forest}

{OVERLAY_COMPLETE       Hh*^Fds          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-summer-sparse}
{OVERLAY_COMPLETE       *^Fds            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-summer}

{OVERLAY_COMPLETE       Hh*^Fdf          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-fall-sparse}
{OVERLAY_COMPLETE       *^Fdf            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-fall}

{OVERLAY_COMPLETE       Hh*^Fdw          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-winter-sparse}
{OVERLAY_COMPLETE       *^Fdw            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-winter}

{OVERLAY_COMPLETE       Ha*^Fda          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-winter-snow-sparse}
{OVERLAY_COMPLETE       *^Fda            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/deciduous-winter-snow}

{OVERLAY_COMPLETE       Hh*^Fms          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-summer-sparse}
{OVERLAY_COMPLETE       *^Fms            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-summer}

{OVERLAY_COMPLETE       Hh*^Fmf          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-fall-sparse}
{OVERLAY_COMPLETE       *^Fmf            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-fall}

{OVERLAY_COMPLETE       Hh*^Fmw          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-winter-sparse}
{OVERLAY_COMPLETE       *^Fmw            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-winter}

{OVERLAY_COMPLETE       Ha*^Fma          (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-winter-snow-sparse}
{OVERLAY_COMPLETE       *^Fma            (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)         forest/mixed-winter-snow}

{OVERLAY_COMPLETE       *^Uf*           (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,Hd,*^V*)      forest/mushrooms}

# Great-tree
{OVERLAY_RANDOM          *^Fet                                                     forest/great-tree}

# Oasis
{OVERLAY_P               (*^Do,Do)                              30                 village/desert-oasis-1}
{OVERLAY_P               (*^Do,Do)                              43                 village/desert-oasis-2}
{OVERLAY_P               (*^Do,Do)                              100                village/desert-oasis-3}

# Swamp
{OVERLAY_COMPLETE        Ss              (!,Xv,!,C*,K*,H*,M*,X*,Q*,A*)             swamp/reed}
{OVERLAY_COMPLETE        Chs             (!,Chs,Chw,Chr,Cha)                       swamp/reed}

# Large volcano
{VOLCANO_2x2             Qv              Mm,Md                  100       overlay  mountains/volcano6}

# Mountains
{OVERLAY_RESTRICTED3     Mm              (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/basic-castle-n}
{OVERLAY_ROTATION_RESTRICTED2  Mm        (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/basic-castle}
{OVERLAY_RESTRICTED2     Mm              (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/basic-castle-n}
{OVERLAY_ROTATION_RESTRICTED   Mm        (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/basic-castle}

{MOUNTAINS_2x4_NW_SE     Mm                                     18        overlay  mountains/basic_range3}
{MOUNTAINS_2x4_SW_NE     Mm                                     26        overlay  mountains/basic_range4}

{MOUNTAINS_1x3_NW_SE     Mm                                     20        overlay  mountains/basic_range1}
{MOUNTAINS_1x3_SW_NE     Mm                                     20        overlay  mountains/basic_range2}

{MOUNTAINS_2x2           Mm                                     40        overlay  mountains/basic5}
{MOUNTAINS_2x2           Mm                                     30        overlay  mountains/basic6}

{MOUNTAIN_SINGLE         Mm                                     33        overlay  mountains/basic3}
{MOUNTAIN_SINGLE         Mm                                     50        overlay  mountains/basic2}
{MOUNTAIN_SINGLE         Mm                                     100       overlay  mountains/basic}

# Dry Mountains
{OVERLAY_RESTRICTED3     Md              (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/dry-castle-n}
{OVERLAY_ROTATION_RESTRICTED2  Md        (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/dry-castle}
{OVERLAY_RESTRICTED2     Md              (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/dry-castle-n}
{OVERLAY_ROTATION_RESTRICTED   Md        (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/dry-castle}

{MOUNTAINS_2x4_NW_SE     Md                                     18        overlay  mountains/dry_range3}
{MOUNTAINS_2x4_SW_NE     Md                                     26        overlay  mountains/dry_range4}

{MOUNTAINS_1x3_NW_SE     Md                                     20        overlay  mountains/dry_range1}
{MOUNTAINS_1x3_SW_NE     Md                                     20        overlay  mountains/dry_range2}

{MOUNTAINS_2x2           Md                                     40        overlay  mountains/dry5}
{MOUNTAINS_2x2           Md                                     30        overlay  mountains/dry6}

{MOUNTAIN_SINGLE         Md                                     33        overlay  mountains/dry3}
{MOUNTAIN_SINGLE         Md                                     50        overlay  mountains/dry2}
{MOUNTAIN_SINGLE         Md                                     100       overlay  mountains/dry}

# Single-hex volcano
{OVERLAY_COMPLETE        Qv              (!,Xv,Qv,!,C*,K*,X*,Q*)             mountains/volcano}

# Snow mountains (uncomment rules as the corresponding tiles are added)
#{OVERLAY_RESTRICTED3     Ms              (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/snow-castle-n}
#{OVERLAY_ROTATION_RESTRICTED2  Ms        (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/snow-castle}
#{OVERLAY_RESTRICTED2     Ms              (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/snow-castle-n}
#{OVERLAY_ROTATION_RESTRICTED   Ms        (!,Xv,!,C*,K*,X*,Ql,Qx*)                         mountains/snow-castle}

#{MOUNTAINS_2x4_NW_SE     Ms                                     18        overlay  mountains/snow_range3}
#{MOUNTAINS_2x4_SW_NE     Ms                                     26        overlay  mountains/snow_range4}

#{MOUNTAINS_1x3_NW_SE     Ms                                     20        overlay  mountains/snow_range1}
#{MOUNTAINS_1x3_SW_NE     Ms                                     20        overlay  mountains/snow_range2}

{MOUNTAINS_2x2           Ms                                     15        overlay  mountains/snow5}
{MOUNTAINS_2x2           Ms                                     25        overlay  mountains/snow6}

{MOUNTAIN_SINGLE         Ms                                     33        overlay  mountains/snow3}
{MOUNTAIN_SINGLE         Ms                                     50        overlay  mountains/snow2}
{MOUNTAIN_SINGLE         Ms                                     100       overlay  mountains/snow}

#This one is to fill any "gaps" there might be when next to castles or walls
{TERRAIN_BASE            Mm                                                        hills/regular}
{TERRAIN_BASE            Md                                                        hills/dry}
{TERRAIN_BASE            Ms                                                        hills/snow}

{OVERLAY_LF              *^Xm                                         1   clouds1  mountains/cloud1_1}
{OVERLAY_LF              *^Xm                                         1   clouds2  mountains/cloud1_3}

#33% 33% 33%
{OVERLAY_PLF             *^Xm                                   33    1   clouds3  mountains/cloud1_2}
{OVERLAY_PLF             *^Xm                                   50    1   clouds3  mountains/cloud2_2}
{OVERLAY_LF              *^Xm                                         1   clouds3  mountains/cloud3_2}

{PEAKS_1x2_SW_NE         *^Xm                                   15        peaks    mountains/peak_range1}
{PEAKS_LARGE             *^Xm                                   25        peaks    mountains/peak_large1}
{PEAKS_LARGE             *^Xm                                   33        peaks    mountains/peak_large2}
{OVERLAY_RANDOM_LF       *^Xm                                         2   peaks    mountains/peak}

#
#       >  V I L L A G E   B U I L D I N G S   <

# Flagged as 'village' so they can be placed on
# top of both 'base' and 'overlay'

#Human villages
{VILLAGE_RANDOM          *^Vh                                                      village/human}
{VILLAGE_RANDOM          *^Vha                                                     village/human-snow}

{VILLAGE                 *^Vhh                                                     village/human-hills}
{VILLAGE                 *^Vhha                                                    village/human-snow-hills}

{VILLAGE_RANDOM          *^Vhc                                                     village/human-city}
{VILLAGE_RANDOM          *^Vhca                                                    village/human-city-snow}

#tropical village
{VILLAGE                 *^Vht                                                     village/tropical-forest}

#Crude villages (grassland)
{VILLAGE_RANDOM          *^Vc                                                      village/hut}

{VILLAGE_RANDOM          *^Vca                                                     village/hut-snow}

{VILLAGE_RANDOM          *^Vl                                                      village/log-cabin}
{VILLAGE                 *^Vla                                                     village/log-cabin-snow}

{VILLAGE_RANDOM          *^Vct                                                     village/tent}

#Drake villages
#20% 20% 20% 20% 20%
{VILLAGE_PB             *^Vd                                    20    ANIMATION_03 village/drake1}
{VILLAGE_PB             *^Vd                                    25    ANIMATION_04 village/drake2}
{VILLAGE_P              *^Vd                                    33                 village/drake3}
{VILLAGE_P              *^Vd                                    50                 village/drake4}
{VILLAGE_P              *^Vd                                    100                village/drake5}

#Orcish villages
{VILLAGE_RANDOM         *^Vo                                                       village/orc}

{VILLAGE_RANDOM         *^Voa                                                      village/orc-snow}

#Elven villages
#10% 25% 25% 40%
{VILLAGE_P               *^Ve                                   10                 village/elven}
{VILLAGE_P               *^Ve                                   28                 village/elven3}
{VILLAGE_P               *^Ve                                   38                 village/elven4}
{VILLAGE_P               *^Ve                                   100                village/elven2}

#10% 25% 25% 40%
{VILLAGE_P               *^Vea                                  10                 village/elven-snow}
{VILLAGE_P               *^Vea                                  28                 village/elven-snow3}
{VILLAGE_P               *^Vea                                  38                 village/elven-snow4}
{VILLAGE_P               *^Vea                                  100                village/elven-snow2}

#Desert villages
{VILLAGE_RANDOM          *^Vda                                                     village/desert}
{VILLAGE                 *^Vdt                                                     village/desert-camp}

#Cave villages
{VILLAGE_RANDOM          *^Vu                                                      village/cave}
{VILLAGE_RANDOM          *^Vud                                                     village/dwarven}

#Swamp village
{VILLAGE_RANDOM          *^Vhs                                                     village/swampwater}

#Merfolk village
{VILLAGE_P               *^Vm                                   20                 village/coast}
{VILLAGE_P               *^Vm                                   24                 village/coast2}
{VILLAGE_P               *^Vm                                   29                 village/coast3}
{VILLAGE_P               *^Vm                                   35                 village/coast4}
{VILLAGE_PB              *^Vm                                   100 ANIMATION_04_140 village/coast5}

#
#       >  O V E R L A Y S <
#

# Illuminated caves
{OVERLAY_RANDOM_LF       (*^Ufi,*^Ii)                                  1  light    cave/beam}

#Farmland
{OVERLAY_RANDOM_L        *^Gvs                                        -10          embellishments/farm-veg-spring}

# Windmill decoration
{OVERLAY_B               *^Wm                              ANIMATION_18_70 misc/windmill}

{OVERLAY_COMPLETE        *^Efm      (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)              embellishments/flowers-mixed}

#Rubble
{OVERLAY_RANDOM          *^Dr                                                      misc/rubble}


{OVERLAY_RANDOM          *^Es                                                      embellishments/stones-small}

{OVERLAY_RANDOM          *^Em                                                      embellishments/mushroom}
{OVERLAY_COMPLETE        *^Emf         (C*,K*,X*,Ql*,Qx*,Gv*,W*,M*,*^V*)           embellishments/mushroom-farm}

# Chasm bridges -  for now they don't tile
{OVERLAY_F               Ql*^Bs\                                          bridge   cave/chasm-lava-stone-bridge-se-nw}
{OVERLAY_F               Ql*^Bs|                                          bridge   cave/chasm-lava-stone-bridge-s-n}
{OVERLAY_F               Ql*^Bs/                                          bridge   cave/chasm-lava-stone-bridge-sw-ne}

{OVERLAY_F               *^Bs\                                            bridge   cave/chasm-stone-bridge-se-nw}
{OVERLAY_F               *^Bs|                                            bridge   cave/chasm-stone-bridge-s-n}
{OVERLAY_F               *^Bs/                                            bridge   cave/chasm-stone-bridge-sw-ne}

# stone wall transitions to cavewall. Note that these have no graphics,
# so currently this is commented out for ugly, but vaguely working behaviour
#{TERRAIN_CORNER_STATIC cave Xos Xu* (!,X*) BASE1 BASE2 IMAGESTEM}

# draw the walls!

{WALL_ADJACENT Xol (!,Xo*, Xu*) ANIMATION_10 walls/wall-stone-lit walls/wall-stone-base}
{WALL_ADJACENT Xo* (!,Xo*, Xu*) IMAGE_SINGLE walls/wall-stone walls/wall-stone-base}
#
#       >  B A S E   T E R R A I N S  <
#

# Flat base terrains

# Crazy terrains for testing purposes
#{TERRAIN_BASE            Jm                                                        test/m}
#{TERRAIN_BASE            Jy                                                        test/y}
#{TERRAIN_BASE            Jb                                                        test/b}

# The first grass tile of each kind is the most standard and generic one, thus it appears more frequently to space out the rest
{TERRAIN_BASE_P          Gg                                     20                 grass/green}
{TERRAIN_BASE_RANDOM     Gg                                                        grass/green}
{TERRAIN_BASE_P          Gs                                     25                 grass/semi-dry}
{TERRAIN_BASE_RANDOM     Gs                                                        grass/semi-dry}
{TERRAIN_BASE_P          Gd                                     25                 grass/dry}
{TERRAIN_BASE_RANDOM     Gd                                                        grass/dry}
{TERRAIN_BASE_RANDOM     Gll                                                       grass/leaf-litter}

#Depricated
{TERRAIN_BASE_RANDOM     Ggf                                                       grass/flowers}


{TERRAIN_BASE_RANDOM     Re                                                        flat/dirt}
{TERRAIN_BASE_RANDOM     Rb                                                        flat/dirt-dark}

{TERRAIN_BASE_RANDOM     Rr                                                        flat/road}
{TERRAIN_BASE_RANDOM     Rrc                                                       flat/road-clean}
{TERRAIN_BASE_RANDOM     Rp                                                        flat/stone-path}

# Hills base terrain
{TERRAIN_BASE_RANDOM     Hh                                                        hills/regular}
{TERRAIN_BASE_RANDOM     Hhd                                                       hills/dry}

# Cave base terrains

{TERRAIN_BASE_RANDOM     Uu                                                        cave/floor}
{TERRAIN_BASE_RANDOM     Uue                                                       cave/earthy-floor}
{TERRAIN_BASE_RANDOM     Ur                                                        cave/path}
{TERRAIN_BASE_RANDOM     Urb                                                       cave/flagstones-dark}
{TERRAIN_BASE_RANDOM     Uh                                                        cave/hills-variation}

{TERRAIN_BASE            Xu*                                                        cave/wall-rough}

{TERRAIN_BASE_RANDOM     Qxua                                                      chasm/abyss}
{TERRAIN_BASE            Qx*                                                       chasm/depths}
{TERRAIN_BASE_RANDOM     Ql,Qlf                                                    unwalkable/lava}

{OVERLAY_L               Wwr                                         -320          water/reef}

# Desert base terrains

{TERRAIN_BASE_RANDOM     Dd                                                        sand/desert}

# only use the smaller plant tiles when adjacent to castles, chasms etc
{OVERLAY_RESTRICTED_P    *^Edp,*^Edpp   (C*,K*,Q*)                       33        embellishments/desert-plant}
{OVERLAY_RESTRICTED_P    *^Edp,*^Edpp   (C*,K*,Q*)                       50        embellishments/desert-plant2}
{OVERLAY_RESTRICTED_P    *^Edp,*^Edpp   (C*,K*,Q*)                       100       embellishments/desert-plant3}
# and then any plant tile elsewhere
{OVERLAY_P               *^Edp,*^Edpp                                    9         embellishments/desert-plant1}
{OVERLAY_P               *^Edp,*^Edpp                                    10        embellishments/desert-plant2}
{OVERLAY_P               *^Edp,*^Edpp                                    11        embellishments/desert-plant3}
{OVERLAY_P               *^Edp,*^Edpp                                    12        embellishments/desert-plant4}
{OVERLAY_P               *^Edp                                           14        embellishments/desert-plant5} # This one contains bones
{OVERLAY_P               *^Edp,*^Edpp                                    16        embellishments/desert-plant6}
{OVERLAY_P               *^Edp                                           20        embellishments/desert-plant7} # This one contains bones
{OVERLAY_P               *^Edp,*^Edpp                                    24        embellishments/desert-plant8}
{OVERLAY_P               *^Edp,*^Edpp                                    32        embellishments/desert-plant9}
{OVERLAY_P               *^Edp,*^Edpp                                    48        embellishments/desert-plant10}
{OVERLAY_P               *^Edp,*^Edpp                                    100       embellishments/desert-plant11}


{TERRAIN_BASE_RANDOM     Ds                                                        sand/beach}

{TERRAIN_BASE_RANDOM     Rd                                                        flat/desert-road}

{TERRAIN_BASE_F          *^Dc                                             overlay  sand/crater}

{TERRAIN_BASE_RANDOM     Hd                                                        hills/desert}

# Frozen base terrain

{TERRAIN_BASE_RANDOM     Aa                                                        frozen/snow}

#10% 10% 10% 10% 25% 35%
{TERRAIN_BASE_P          Ai                                     10                 frozen/ice2}
{TERRAIN_BASE_P          Ai                                     11                 frozen/ice3}
{TERRAIN_BASE_P          Ai                                     13                 frozen/ice5}
{TERRAIN_BASE_P          Ai                                     14                 frozen/ice6}
{TERRAIN_BASE_P          Ai                                     42                 frozen/ice4}
{TERRAIN_BASE            Ai                                                        frozen/ice}

{TERRAIN_BASE_RANDOM     Ha                                                        hills/snow}

{TERRAIN_BASE_RANDOM     Iwr                                                       interior/wood-regular}

# Water base terrains
{OVERLAY_RANDOM_LF       Wwf,Sm                                      -519 ford     water/ford}




#ANIMATED

# experimental macro using 1-hex rule to optimize water animation
{GENERIC_SINGLEHEX_PLFB (Wo)         100 -1000 base ANIMATION_15_SLOW           water/ocean}
{GENERIC_SINGLEHEX_PLFB (Wot)        100 -1000 base ANIMATION_15_SLOW           water/ocean-tropical}
{GENERIC_SINGLEHEX_PLFB (Ww,Wwr)     100 -1000 base ANIMATION_15           water/coast}
# water animation under ford is not really visible, so we disable it for now
{GENERIC_SINGLEHEX_PLFB (Wwf)        100 -1000 base ANIMATION_01           water/coast}
{GENERIC_SINGLEHEX_PLFB (Wwt)        100 -1000 base ANIMATION_15           water/coast-tropical}
# water animation under swamp is not really visible, so we disable it for now
{GENERIC_SINGLEHEX_PLFB (S*)         100 -1000 base ANIMATION_01           swamp/water}

#temporary disabled normal multihex macro
#{TERRAIN_BASE_B           Wo             ANIMATION_15           water/ocean}
#{TERRAIN_BASE_B           Ww,Wwf,Wwr     ANIMATION_15           water/coast}
#{TERRAIN_BASE_B           Wwt            ANIMATION_15           water/coast-tropical}

#{TERRAIN_BASE_B           Ss             ANIMATION_15           swamp/water}


# Castle base terrains

{TERRAIN_BASE            Ch,Chr,Cha                                                flat/road}
{KEEP_BASE               Kh*                                                       castle/cobbles-keep}
{TERRAIN_BASE            Chw                                                       castle/sunken-ruin}
{TERRAIN_BASE_B          Chs                                ANIMATION_15           swamp/water}

{TERRAIN_BASE            Cv                                                        castle/elven/grounds}
{KEEP_BASE               Kv                                                        castle/elven/keep}

{TERRAIN_BASE            (Ce*,Ke*)                                                 flat/dirt}
{OVERLAY_RANDOM          Ke                                                        village/tent}
{OVERLAY_RANDOM          Kea                                                       village/tent-snow}

{TERRAIN_BASE            Co*                                                       flat/dirt-dark}
{KEEP_BASE               Ko                                                        castle/orcish/keep}
{KEEP_BASE               Koa                                                       castle/winter-orcish/keep}

{TERRAIN_BASE            Cud                                                       castle/dwarven-castle-floor}
{KEEP_BASE               Kud                                                       castle/dwarven-keep-floor}
{OVERLAY                 Kud                                                       castle/dwarven-keep}

{TERRAIN_BASE            Cd                                                        castle/sand/dirt}
{KEEP_BASE               Kd                                                        castle/sand/cobbles}

#{TERRAIN_BASE       ~                 fog/fog}

#
#     >  T R A N S I T I O N S   B E T W E E N   T E R R A I N S  <
#


# Elven castle

{WALL_TRANSITION      Cv                 (!,C*,K*)                   castle/elven/castle}
{WALL_TRANSITION2     Kv                 C*,Ke*      (!,C*,K*)       castle/elven/keep-castle}
{WALL_TRANSITION      Kv                 (!,Kv)                      castle/elven/keep}


# Orcish castles

{WALL_TRANSITION      Co,Cv             (!,C*,K*)                     castle/orcish/fort}
{WALL_TRANSITION2     Ko,Kv             C*,Ke*       (!,C*,K*)        castle/orcish/keep-fort}
{WALL_TRANSITION      Ko                (!,Ko*)                       castle/orcish/keep}

{WALL_TRANSITION      (Co*,Cv)          (!,C*,K*)                     castle/winter-orcish/fort}
{WALL_TRANSITION2     (Ko*,Kv)          C*,Ke*      (!,C*,K*)         castle/winter-orcish/keep-fort}
{WALL_TRANSITION      (Ko*)             (!,Ko*)                       castle/winter-orcish/keep}


# Desert castle

{WALL_TRANSITION      Cd,Cv,Co*          (!,C*,K*)                    castle/sand/castle}
{WALL_TRANSITION2     Kd,Kv,Ko*          C*,Ke*        (!,C*,K*)      castle/sand/keep-castle}
{WALL_TRANSITION      Kd                 (!,Kd)                       castle/sand/keep}

#
# Human castles
#

{WALL_TRANSITION      Ch,Cv,Co,Cd       (!,C*,K*)                            castle/castle}
{WALL_TRANSITION2     Kh,Kv,Ko,Kd       C*,Ke*             (!,C*,K*)          castle/keep-castle}
{WALL_TRANSITION      Kh                (!,Kh*)                              castle/keep}

{WALL_TRANSITION      Ch,Cha,Coa           (!,C*,K*)                            castle/snowy/castle}
{WALL_TRANSITION2     Kh,Kha,Koa           C*,Ke*              (!,C*,K*)         castle/snowy/keep-castle}
{WALL_TRANSITION      Kh,Kha               (!,Kh*)                              castle/snowy/keep}


# sunken/swamp ruins (submerged part)
# Show sunken graphics for sunken castle only when next to water terrain
# Show sunken graphics for sunken/swamp keep also when next to swamp

# (!,Chr,Chs,!,Ch*) is used to catch convex transitions between Chw and Ch* without lots of additional rules
# don't do this at home
#17% 17% 17% 17% 17% 17%
{WALL_TRANSITION_P    (!,Chr,Chs,Cha,Ce*,Ke*,!,Ch*)  (W*)                        17  castle/sunken-ruin5}
{WALL_TRANSITION_P    (!,Chr,Chs,Cha,Ce*,Ke*,!,Ch*)  (W*)                        20  castle/sunken-ruin4}
{WALL_TRANSITION_P    (!,Chr,Chs,Cha,Ce*,Ke*,!,Ch*)  (W*)                        25  castle/sunken-ruin3}
{WALL_TRANSITION_P    (!,Chr,Chs,Cha,Ce*,Ke*,!,Ch*)  (W*)                        33  castle/sunken-ruin2}
{WALL_TRANSITION_P    (!,Chr,Chs,Cha,Ce*,Ke*,!,Ch*)  (W*)                        50  castle/sunken-ruin1}
{WALL_TRANSITION      (!,Chr,Chs,Cha,Ce*,Ke*,!,Ch*)  (W*)                            castle/sunken-ruin}

{WALL_TRANSITION2_P   (Khw,Khs)          C*,K*           (W*,Ss)         75          castle/sunken-ruinkeep1-castle}
{WALL_TRANSITION2_P   (Khw,Khs)          C*,K*           (W*,Ss)         100         castle/sunkenkeep-castle}

{WALL_TRANSITION_P    (!,Khr,!,Kh*)      (W*,Ss,Chw,Chs)                         75  castle/sunken-ruinkeep1}
{WALL_TRANSITION_P    (!,Khr,!,Kh*)      (W*,Ss,Chw,Chs)                         100 castle/sunkenkeep}

# ruined castle and non-sumberged parts of sunken/swamp ruins


# There are no more human castles left, so we can just use Ch* here, which makes sure
# that all ruin<->non-ruin transitions are drawn
#17% 17% 17% 17% 17% 17%
{WALL_TRANSITION_P    Ch*                (!,C*,K*)                 17  castle/ruin5}
{WALL_TRANSITION_P    Ch*                (!,C*,K*)                 20  castle/ruin4}
{WALL_TRANSITION_P    Ch*                (!,C*,K*)                 25  castle/ruin3}
{WALL_TRANSITION_P    Ch*                (!,C*,K*)                 33  castle/ruin2}
{WALL_TRANSITION_P    Ch*                (!,C*,K*)                 50  castle/ruin1}

# For any non-encampment, non-dwarvish castle that's left use the regular human castle here
{WALL_TRANSITION      !,Ce*,Ke*,Cu*,Ku*,!,C*     (!,C*,K*)                     castle/castle}

{WALL_TRANSITION2_P   (Khr,Khw,Khs)      (C*)           (!,Ch*,Kh*) 75  castle/ruinkeep1-castle}
{WALL_TRANSITION2     (Khr,Khw,Khs)      (C*)           (!,Ch*,Kh*)     castle/keep-castle}

{WALL_TRANSITION_P    Kh*                (!,K*)                     75  castle/ruinkeep1}
{WALL_TRANSITION      Kh*                (!,K*)                         castle/keep}


# Encampment

{WALL_TRANSITION      (Ce,Ke,Ch*,Kh*,Cv,Kv,Co*,Ko*,Cd,Kd)          (!,C*,K*)   castle/encampment/regular}
{WALL_TRANSITION      (Ce*,Ke*,Ch*,Kh*,Cv,Kv,Co*,Ko*,Cd,Kd)        (!,C*,K*)   castle/encampment/snow}


# Castle & Encampment Base Transtions

{TRANSITION_COMPLETE_L     Ch,Chr,Cha             (!,Ch,Chr,Cha,Q*)           -300                  flat/road}

{TRANSITION_COMPLETE_LF    Cd                Ce*,Ke*,Co*,Cv,Chw,Chs,Khw,Khs      -360     inside    flat/desert-road}
{TRANSITION_COMPLETE_L     Ce*,Ke*,Co*,Cv,Chw,Chs,Khw,Khs        Cd,Kd           -360               flat/desert-road}

{TRANSITION_COMPLETE_LF    (!,Ce*,Ke*,Q*)            Ce*,Ke*                  -374     inside       flat/dirt}
{TRANSITION_COMPLETE_L     Ce*,Ke*                (!,Ce*,Ke*,Q*)              -378                  flat/dirt}

{TRANSITION_COMPLETE_LF    (!,Co*,Q*)            Co*                     -384     inside       flat/dirt-dark}
{TRANSITION_COMPLETE_L     Co*                   (!,Co*,Q*)              -388                  flat/dirt-dark}


#
# Cave
# (including dwarven castle, chasm, lava)
#

{DISABLE_BASE_TRANSITIONS  Qx*}
{DISABLE_BASE_TRANSITIONS  Ql}
{DISABLE_BASE_TRANSITIONS  Xu*}
{DISABLE_BASE_TRANSITIONS  (Cud,Kud)}

#dwarven castle transitions
{WALL_TRANSITION3     (Cud,Kud)        Ql                  Qx*                unwalkable/dcastle-lava-chasm}

{WALL_TRANSITION2     (Cud,Kud)        X*                 (!,Cud,Kud,X*)      castle/dwarven-castle-wall}
{WALL_TRANSITION2     (Cud,Kud)        Ql                 (!,Cud,Kud,Ql)      unwalkable/dcastle-lava}
{WALL_TRANSITION2     (Cud,Kud)        Qx*                (!,Cud,Kud,Qx*)     unwalkable/dcastle-chasm}

{WALL_TRANSITION      (Cud,Kud)        (!,Cud,Kud)                            castle/dwarven-castle}

{WALL_TRANSITION      Xuce           (Qx*,Ql)                               cave/earthy-wall-rough-chasm}
{WALL_TRANSITION      Xuce           (!,Xu*)                                cave/earthy-wall-hewn}
{WALL_TRANSITION      Xue,Xuce       (Qx*,Ql)                               cave/earthy-wall-rough-chasm}
{WALL_TRANSITION      Xue,Xuce       (!,Xu*)                                cave/earthy-wall-rough}
{WALL_TRANSITION      Xuc,Xue,Xuce   (Qx*,Ql)                               cave/wall-rough-chasm}
{WALL_TRANSITION      Xuc,Xue,Xuce   (!,Xu*)                                cave/wall-hewn}
{WALL_TRANSITION      Xu*            (Qx*,Ql)                               cave/wall-rough-chasm}
{WALL_TRANSITION      Xu*            (!,Xu*)                                cave/wall-rough}


# New Generic Castle-to Chasm transition
{TRANSITION_COMPLETE_LF (Cha,Kha,Coa,Koa,Cea,Kea)        Qx*                   -80    transition2   chasm/regular-snow-castle}
{TRANSITION_COMPLETE_LF (!,Cud,Kud,!,C*,K*)              Qxe                   -80    transition2   chasm/earthy-castle}
{TRANSITION_COMPLETE_LF (!,Cud,Kud,!,C*,K*)              Qx*                   -80    transition2   chasm/regular-castle}
{TRANSITION_COMPLETE_LF (!,Cud,Kud,!,C*,K*)              Ql                    -80    transition2   unwalkable/castle-lava-chasm}

# Special Mountain to Chasm Blend transition
{TRANSITION_COMPLETE_LF    (Qx*,Ql)       (M*,Qv)              2   transition3   mountains/blend-from-chasm}

#chasm/lava transitions always below castles/walls
{WALL_TRANSITION2_LF  Ql               Qx*,Xv,_off^_usr       (!,Ql,Qx*)   -90  ground  unwalkable/lava-chasm}
{WALL_TRANSITION_LF   Qlf              Qx*,Xv,_off^_usr                    -90  ground  unwalkable/lava-chasm}
{WALL_TRANSITION_LF   Ql               (!,Ql,Xv,_off^_usr)                 -90  ground  unwalkable/lava}
{WALL_TRANSITION_LF   Qx*              (Ai*,Aa*,Ha*,Ms*,)                  -90  ground  chasm/regular-snow}
{WALL_TRANSITION_LF   Qxe              (!,Qx*,Xv,_off^_usr)                -90  ground  chasm/earthy}
{WALL_TRANSITION_LF   Qx*              (!,Qx*,Xv,_off^_usr)                -90  ground  chasm/regular}


#
#       > B A S E   T R A N S I T I O N S. <
#

# The order mostly controls which overlap which, some
# TRANSITION_COMPLETE_Ls and varying layer numbers are used to make some
# special transitions to layer in more complex ways.
# Default layer ist -500, so anything layering above should be higher.


{TRANSITION_COMPLETE_L     (Md,Qv)          (!,Md,Hhd,Qv)                -166     mountains/dry}

# Special mountain to dry/desert terrain trans
{TRANSITION_COMPLETE_LF    (Hd,Hhd,Rb,Re,Rd,D*,Gd,Ha,A*,U*,Qlf)      Mm           0   transition3   mountains/blend-from-dry}
{TRANSITION_COMPLETE_LF    (Hd,Hhd,Rb,Re,Rd,D*,Gd,U*,Qlf)            Ms           0   transition3   mountains/blend-from-dry}
{TRANSITION_COMPLETE_L     (Mm)          (Hd,Hhd,Rb,Re,Rd,D*,Gd,Ha,A*,U*,Qlf)    -166               hills/dry}
{TRANSITION_COMPLETE_L     (Ms)          (Hd,Hhd,Rb,Re,Rd,D*,Gd,U*,Qlf)          -166               hills/dry}

{TRANSITION_COMPLETE_L     (Ms,Ha)          Hh*                         -170               hills/snow-to-hills}
{TRANSITION_COMPLETE_L     (Ms,Ha)          (W*,Ss)                     -171               hills/snow-to-water}
{TRANSITION_COMPLETE_L     (Ms,Ha)          (!,Ha,Qx*,Mm,Ms,Md)         -172               hills/snow}

{TRANSITION_COMPLETE_L     (Mm,Hh)          (!,Hh,W*,Ss)                -180               hills/regular}
{TRANSITION_COMPLETE_LF    (Mm,Hh)          (W*,Ss)                     -181  transition2  hills/regular}
{TRANSITION_COMPLETE_L     (Hhd)            (!,Hhd,W*,Ss)               -183               hills/dry}
{TRANSITION_COMPLETE_LF    (Hhd)            (W*,Ss)                     -184  transition2  hills/dry}
{TRANSITION_COMPLETE_L     Hd               (!,Hd,Qx*)                  -190               hills/desert}
{TRANSITION_COMPLETE_L     Uh               (!,Uh,W*,Ai)                -200               cave/hills}

{TRANSITION_COMPLETE_L     Qlf              (!,Ql,Qlf,Qx*,X*,_off^_usr) -210               unwalkable/lava}
{TRANSITION_COMPLETE_L     (Uu,Uh)          (!,Uu,Uh,W*,Ai)             -220               cave/floor}
{TRANSITION_COMPLETE_L     Ur               (!,Ur,W*,Ai)                -221               cave/floor}
#{TRANSITION_COMPLETE_LF    (!,Ur)           Ur                         -222     inside    cave/floor}
{TRANSITION_COMPLETE_L     (Uue)            (!,Uue,W*,Ai)               -223               cave/earthy-floor}
{TRANSITION_COMPLETE_L     Urb              (!,Urb,W*,Ai)               -224                cave/flagstones-dark}


# water animation under swamp is not really visible, so we disable it for now
{TRANSITION_COMPLETE_LB     (Ss,Chs)         (!,S*,W*,D*,H*,M*,A*)         -230    ANIMATION_01    swamp/water-to-land}



# Crazy Test Terrains

#{TRANSITION_COMPLETE_LF    Jm              Jb,Jy                               -240     inside     test/m}  # inside
#{TRANSITION_COMPLETE_LF    Jy              Jb,Jm                               -241     inside     test/y}  # inside
#{TRANSITION_COMPLETE_LF    Jb              Jy,Jm                               -242     inside     test/b}  # inside

#{TRANSITION_COMPLETE_L     Jb               (!,Jb)                             -343                 test/b}   # outside
#{TRANSITION_COMPLETE_L     Jy               (!,Jy)                             -344                 test/y}   # outside
#{TRANSITION_COMPLETE_L     Jm               (!,Jm)                             -345                 test/m}   # outside

{TRANSITION_COMPLETE_LF    *^Efm            G*                                 -240   transition4   embellishments/flowers-mixed}

# New Super-cool gradual Grass blending

{TRANSITION_COMPLETE_LF     Gs              Gg,Gd,Gll,Re,Rb,Rd,Rp              -250     inside      grass/semi-dry-long}
{TRANSITION_COMPLETE_LF     Gg              Gs,Gd,Gll,Re,Rb,Rd,Rp              -251     inside      grass/green-long}
{TRANSITION_COMPLETE_LF     Gd              Gg,Gs,Gll,Re,Rb,Rd,Rp              -252     inside      grass/dry-long}
{TRANSITION_COMPLETE_LF     Gll             Gg,Gs,Gd,Re,Rb,Rd,Rp               -253     inside      grass/leaf-litter-long}

{TRANSITION_COMPLETE_L      Gll             Gg,Gs,Gd                           -254                 grass/leaf-litter-long}
{TRANSITION_COMPLETE_L      Gd              Gg,Gs,Gll                          -255                 grass/dry-long}
{TRANSITION_COMPLETE_L      Gg              Gs,Gd,Gll                          -256                 grass/green-long}
{TRANSITION_COMPLETE_L      Gs              Gg,Gd,Gll                          -257                 grass/semi-dry-long}


{TRANSITION_COMPLETE_L     Gs               (Rr*,D*,Aa)                       -260                  grass/semi-dry-medium}
{TRANSITION_COMPLETE_L     Gg               (Rr*,D*,Aa)                       -261                  grass/green-medium}
{TRANSITION_COMPLETE_L     Gd               (Rr*,D*,Aa)                       -262                  grass/dry-medium}


{TRANSITION_COMPLETE_L     Gll              (!,Gll,Qx*,W*,Ai,C*)              -270                  grass/leaf-litter}
{TRANSITION_COMPLETE_L     (Gg*,Qx*)        (!,Gg*,Qx*,Mm,Ms,Hh,C*)           -271                  grass/green-abrupt}
{TRANSITION_COMPLETE_L     Gs               (!,Gs,Qx*,C*)                     -272                  grass/semi-dry-abrupt}
{TRANSITION_COMPLETE_L     Gd               (!,Gd,Qx*,C*)                     -273                  grass/dry-abrupt}

# Deprecated
{TRANSITION_COMPLETE_LF    (!,Ggf)          Ggf                              -274                   flower-transition grass/green}


{TRANSITION_COMPLETE_L     Aa               (W*,Ss)                          -280                   frozen/snow-to-water}
{TRANSITION_COMPLETE_L     Aa               (!,Aa,Qx*,G*)                    -281                   frozen/snow}


{TRANSITION_COMPLETE_L     (W*,Ai)          (!,Rb,!,R*,Gll)                  -298                   flat/bank}


{TRANSITION_COMPLETE_L     Rr               (!,Rr,W*,Ai)                      -300                  flat/road}
{TRANSITION_COMPLETE_L     Rrc              (!,Rr,W*,Ai)                      -301                  flat/road-clean}
{TRANSITION_COMPLETE_L     Rp               (!,Rp,W*,Ai)                      -310                  flat/stone-path}

{TRANSITION_COMPLETE_LF    *^Gvs          (!,*^Gvs,C*,K*,*^F*,M*,H*,W*)       -320   transition2    embellishments/farm-veg-spring}
{TRANSITION_COMPLETE_LF    *^Emf          (!,*^Emf,C*,K*,*^F*,M*,H*,W*)       -320   transition2    embellishments/mushroom-farm}



{TRANSITION_COMPLETE_L     Ds               (!,Ds,W*,S*)                       -330                 sand/beach}
{TRANSITION_COMPLETE_L     Dd               (!,R*,Dd,W*,S*)                    -360                 sand/desert}
{TRANSITION_COMPLETE_L     Dd               R*                                 -361                 sand/desert}

#  Dirt transitions are double sided
{TRANSITION_COMPLETE_LF    (!,Rd,Rr*,Hh*,M*,Q*)           Rd                   -370     inside      flat/desert-road}
{TRANSITION_COMPLETE_L     Rd               (!,Rd,,W*,Ai,Q*)                   -371                 flat/desert-road}

{TRANSITION_COMPLETE_LF    (!,Re,Rr*,Hh*,M*,Q*)           Re                   -379     inside      flat/dirt}
{TRANSITION_COMPLETE_L     Re               (!,Re,Rr*,W*,Ai,Q*)                -380                 flat/dirt}

{TRANSITION_COMPLETE_LF    (!,Rb,Rr*,W*,Ai,Q*)        Rb                       -384     inside      flat/dirt-dark}
{TRANSITION_COMPLETE_L     Rb               (!,Rb,Rr*,W*,Ai,Q*)                -388                 flat/dirt-dark}


# This complicated part keeps the submerged part of ice or a bank from drawing over the above-water parts of banks or ice

{TRANSITION_COMPLETE_LF    (!,Chw,Khw,Khs,!,C*,K*)       (Ai,W*)          -480  non_submerged_part  castle/castle-to-ice}

{TRANSITION_COMPLETE_LF    (R*,G*)              Ai,W*                     -483  non_submerged_part  flat/bank-to-ice}
{TRANSITION_COMPLETE_LF    (U*,Xu*,Ql)          Ai,W*                     -486  non_submerged_part  cave/bank-to-ice}


{TRANSITION_COMPLETE_LF    Aa,Ha,Ms,Ai                   (W*,S*)          -490  non_submerged_part  frozen/ice}
{TRANSITION_COMPLETE_LF    Aa,Ha,Ms,Ai                   (W*,S*)          -505  submerged_part      frozen/ice-to-water}

# we just draw this again (invisible below the base layer) to set the transition flags
{TRANSITION_COMPLETE_L     Aa,Ha,Ms,Ai                        (W*,Ss)     -1001                     frozen/ice-to-water}

{TRANSITION_COMPLETE_LF    (!,Chw,Khw,Khs,!,C*,K*)          W*            -510  submerged_part      castle/castle-to-water}

{TRANSITION_COMPLETE_LF    (R*,G*)                          W*            -511   submerged_part     flat/bank-to-water}
{TRANSITION_COMPLETE_LF    (U*,Xu*,Ql)                      W*            -512   submerged_part     cave/bank-to-water}



# Water Transitions below everything else

{TRANSITION_COMPLETE_LF     Wwf           (!,Wwf,Sm,!,W*,S*,D*,Xv,_off^_usr)           -515  transition2  water/ford}
{TRANSITION_COMPLETE_LF     Sm            (!,Wwf,Sm,!,W*,S*,D*,Xv,_off^_usr)           -515  transition3  water/ford}
{TRANSITION_COMPLETE_LB     Sm            (!,Wwf,Sm,!,W*,S*,D*,Xv,_off^_usr)           -520    ANIMATION_15    swamp/water-to-land}

# Double-sided animated transitions for water-to-water and sand-to-water
# >>> The following chunk controls animated water.
# animation are temporary disabled to increase performance.
# to reanimate them comment these lines out, and un-comment the following chunk

{TRANSITION_COMPLETE_LF     Dd,Ds              (!,D*,!,W*,S*)                     -550   transition3                sand/sand-to-water}
{TRANSITION_COMPLETE_LFB    Wo                 (!,Wo,!,W*,S*,D*)                  -551   transition3  ANIMATION_01  water/ocean-blend}
{TRANSITION_COMPLETE_LFB    Wot                (!,Wot,!,W*,S*,D*)                 -551   transition3  ANIMATION_01  water/ocean-tropical-blend}
{TRANSITION_COMPLETE_LFB    Ww,Wwf,Wwr         (!,Ww,Wwf,Wwr,!,W*,S*,D*)          -552   transition3  ANIMATION_01  water/coast-long}
{TRANSITION_COMPLETE_LFB    Wwt                (!,Wwt,!,W*,S*,D*)                 -553   transition3  ANIMATION_01  water/coast-tropical-long}
{TRANSITION_COMPLETE_LFB    Ss                 (!,Ss,!,W*,D*)                     -554   transition3  ANIMATION_01  swamp/water-long}
{TRANSITION_COMPLETE_LB     Ss                 (!,Ss,!,W*,D*)                     -555            ANIMATION_01      swamp/water-long}
{TRANSITION_COMPLETE_LB     Wwt                (!,Wwt,!,W*,S*,D*)                 -556            ANIMATION_01      water/coast-tropical-long}
{TRANSITION_COMPLETE_LB     Ww,Wwf,Wwr         (!,Ww,Wwf,Wwr,!,W*,S*,D*)          -557            ANIMATION_01      water/coast-long}
{TRANSITION_COMPLETE_LB     Wot                (!,Wot,!,W*,S*,D*)                 -558            ANIMATION_01      water/ocean-tropical-blend}
{TRANSITION_COMPLETE_LB     Wo                 (!,Wo,!,W*,S*,D*)                  -558            ANIMATION_01      water/ocean-blend}
{TRANSITION_COMPLETE_L      Dd,Ds              (!,D*,!,W*,Ss)                     -559                              sand/sand-to-water}


# {TRANSITION_COMPLETE_LF     Dd,Ds              (!,D*,!,W*,S*)                     -550   transition3                sand/sand-to-water}
# {TRANSITION_COMPLETE_LFB    Wo                 (!,Wo,!,W*,S*,D*)                  -551   transition3  ANIMATION_15_SLOW  water/ocean-blend}
# {TRANSITION_COMPLETE_LFB    Wot                (!,Wot,!,W*,S*,D*)                 -551   transition3  ANIMATION_15_SLOW  water/ocean-tropical-blend}
# {TRANSITION_COMPLETE_LFB    Ww,Wwf,Wwr         (!,Ww,Wwf,Wwr,!,W*,S*,D*)          -552   transition3  ANIMATION_15  water/coast-long}
# {TRANSITION_COMPLETE_LFB    Wwt                (!,Wwt,!,W*,S*,D*)                 -553   transition3  ANIMATION_15  water/coast-tropical-long}
# {TRANSITION_COMPLETE_LFB    Ss                 (!,Ss,!,W*,D*)                     -554   transition3  ANIMATION_15  swamp/water-long}
# {TRANSITION_COMPLETE_LB     Ss                 (!,Ss,!,W*,D*)                     -555            ANIMATION_15      swamp/water-long}
# {TRANSITION_COMPLETE_LB     Wwt                (!,Wwt,!,W*,S*,D*)                 -556            ANIMATION_15      water/coast-tropical-long}
# {TRANSITION_COMPLETE_LB     Ww,Wwf,Wwr         (!,Ww,Wwf,Wwr,!,W*,S*,D*)          -557            ANIMATION_15      water/coast-long}
# {TRANSITION_COMPLETE_LB     Wot                (!,Wot,!,W*,S*,D*)                 -558            ANIMATION_15_SLOW      water/ocean-tropical-blend}
# {TRANSITION_COMPLETE_LB     Wo                 (!,Wo,!,W*,S*,D*)                  -558            ANIMATION_15_SLOW      water/ocean-blend}
# {TRANSITION_COMPLETE_L      Dd,Ds              (!,D*,!,W*,Ss)                     -559                              sand/sand-to-water}



{TRANSITION_COMPLETE_LB    Wo               (Xv,_off^_usr)                               -560   ANIMATION_15_SLOW   water/ocean-long}
{TRANSITION_COMPLETE_LB    Wot              (Xv,_off^_usr)                               -561   ANIMATION_15_SLOW   water/ocean-tropical-long}

# Animated transitions that meld the edges of out-of-sync animating tiles
# but engine doesn't synchronize animation yet and there is a problem with transition direction
# >>> The following includes water animations that may be seldom seen, or that are subtile.
# Uncomment out the following 5 lines for a slower experience with an only slightly improved experience.

# {TRANSITION_COMPLETE_LB    Wo               (Wo,!,Wo*,Ww*,G*,R*,H*,M*,U*,!,*)            -562   ANIMATION_15   water/ocean}
# {TRANSITION_COMPLETE_LB    Wot              (Wot,!,Wo*,Ww*,G*,R*,H*,M*,U*,!,*)           -563   ANIMATION_15   water/ocean-tropical}
# {TRANSITION_COMPLETE_LB    Ww,Wwf,Wwr       (Ww,Wwf,Wwr,!,Wwt,Wo,G*,R*,H*,M*,U*,!,*)     -564   ANIMATION_15   water/coast}
# {TRANSITION_COMPLETE_LB    Wwt              (Wwt,!,Ww,Wo,Wwr,Wwf,G*,R*,H*,M*,U*,!,*)     -565   ANIMATION_15   water/coast-tropical}
# {TRANSITION_COMPLETE_LB    S*               (S*)                                         -566   ANIMATION_15   swamp/water}

# I beleive these are no longer needed, though i don't entirely get how this works -eleazar
#WARNING : castles are at layer -1, probably to be fixed in 1.9 time
#{TRANSITION_COMPLETE_LF    Chw              (Ch,Chr,Cha)                        0     transition2   castle/sunken-ruin}
#{TRANSITION_COMPLETE_LF    Chs              (Ch,Chr,Cha)                        0     transition2   swamp/water}
#{TRANSITION_COMPLETE_L     Chw              (!,Chw,Chr)                        -570                 water/coast}

# chasm to abyss ecetera transition
{TRANSITION_COMPLETE_LF       Qxu,Qxe          Qxua,Xv,_off^_usr               -600     depths      chasm/depths}
{TRANSITION_COMPLETE_LF       Qxua             Xv,_off^_usr                    -601     depths      chasm/abyss-base}

# ugly fillups for missing transitions
{TRANSITION_COMPLETE_L	Ai	Xv,_off^_usr	               -800                 frozen/ice}

{TRANSITION_COMPLETE_L	Xv	_off^_usr	               -810                 void/void}

# Default terrain
{TERRAIN_BASE _s void/void}
{TERRAIN_BASE *  void/void}
