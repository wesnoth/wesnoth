#textdomain wesnoth-units

[unit_type]
    id=Orcish Battle Barge
    name= _ "Orcish Battle Barge"
    race=ship
    image="units/transport/orc/battle-barge.png"
    # small_profile="portraits/transport/mechanical-boat.webp"
    profile="portraits/transport/orcish-barge.webp"
    hitpoints=180
    movement_type=ship
    [resistance]
        pierce=80
        blade=90
        impact=80
    [/resistance]
    {BARGE_MOVES_AND_DEFENSE}
    {TRAIT_PUSH_POLES_MUSTHAVE}
    movement=4
    experience=200
    level=4
    alignment=chaotic
    advances_to=null
    {AMLA_DEFAULT}
    cost=105
    usage=null
    description= _"Despite their simplistic design, barges provide a surprising amount of utility: bulk transport of goods or men, navigability in shallow water or swamp, and a safe space for wounded fighters to rest. They also provide a wide, steady platform on which to mount siege equipment, a fact of which orcs are well aware.

These barges are very ineffective in the high seas; little better than a floating wreck."
    [abilities]
        {ABILITY_CURES}
    [/abilities]

    [attack]
        name=archers
        description=_"archers"
        icon=attacks/bow-orcish.png
        type=pierce
        range=ranged
        damage=6 # Deliberately weak for a L4, although still useful for finishing off low-hp enemies or vs pierce-vulnerable/impact-resistant targets.
        number=7 # Visually, this ship is built around its catapult - that should be the primary weapon.
    [/attack]
    [attack]
        name=catapult
        description=_"catapult"
        icon=attacks/rock_thrown.png
        type=impact
        range=ranged
        damage=28
        number=2
    [/attack]

    {SHIP_ARCHERS_ANIM -15 units/transport/orc/battle-barge.png ()}
    {SHIP_ARCHERS_ANIM   0 units/transport/orc/battle-barge.png ()}
    {SHIP_ARCHERS_ANIM  15 units/transport/orc/battle-barge.png ()}

    [attack_anim]
        [filter_attack]
            name=catapult
        [/filter_attack]
        start_time=-1600
        stone_start_time=-800
        attack_start_time=-1600
        boat_start_time=-1600
        flag_start_time=-1600
        attack_y=-2:300,-2~2:500,2:300,2~-2:500
        boat_y=-2:300,-2~2:500,2:300,2~-2:500
        flag_y=-2:300,-2~2:500,2:300,2~-2:500
        [if]
            hits=yes
            [stone_frame]
                halo="projectiles/stone-large.png:800"
                # halo_x=20~0
                halo_y=2~-32,-32~-40,-40~-30,-30~0
                offset=0.05~1.0
            [/stone_frame]
        [/if]
        [else]
            hits=no
            # at some point, it would be good to make the rock splash when defender is in water
            [stone_frame]
                halo="projectiles/stone-large.png:900"
                halo_y=0~-10,-10~-16,-16~-20,-20~-22,-22~-20,-20~-16,-16~-10,-10~0,0~-4,-4~0,0~-2,-2~0
                offset=0.05~1.5
            [/stone_frame]
        [/else]
        [frame]
            image="misc/blank-hex.png:1300"
        [/frame]
        [attack_frame]
            image="units/transport/orc/battle-barge-attack[1~6,5].png:[150*2,200*2,100*2,200],misc/blank-hex.png:600"
            auto_vflip=no
            layer=21
        [/attack_frame]
        [boat_frame]
            image="units/transport/orc/battle-barge-bob[1~3,2].png:[400*4]"
            auto_vflip=no
            layer=20
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/orc/battle-barge-flag[1~3,2,1~3,2,1~3,2].png:[140*3,110,140*3,120,140*3,110]"
            auto_vflip=no
            layer=22
        [/flag_frame]
    [/attack_anim]

    [standing_anim]
        start_time=0
        terrain_type=W*^*
        boat_start_time=0
        flag_start_time=0
        boat_y=-2:300,-2~2:500,2:300,2~-2:500
        flag_y=-2:300,-2~2:500,2:300,2~-2:500
        [frame]
            image="misc/blank-hex.png:1600"
        [/frame]
        [boat_frame]
            image="units/transport/orc/battle-barge-bob[1~3,2].png:[400*4]"
            auto_vflip=no
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/orc/battle-barge-flag[1~3,2,1~3,2,1~3,2].png:[140*3,110,140*3,120,140*3,110]"
            auto_vflip=no
        [/flag_frame]
    [/standing_anim]
    [standing_anim]
        start_time=0
        terrain_type=S*^*,*^B*
        boat_start_time=0
        flag_start_time=0
        boat_y=-1:300,-1~1:550,1:300,1~-1:550
        flag_y=-1:300,-1~1:550,1:300,1~-1:550
        [frame]
            image="misc/blank-hex.png:1600"
        [/frame]
        [boat_frame]
            image="units/transport/orc/battle-barge-bob[1~3,2].png:[400*4]"
            auto_vflip=no
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/orc/battle-barge-flag[1~3,2,1~3,2,1~3,2].png:[140*3,110,140*3,120,140*3,110]"
            auto_vflip=no
        [/flag_frame]
    [/standing_anim]
    [standing_anim]
        start_time=0
        terrain_type=!,W*^*,S*^*
        boat_start_time=0
        flag_start_time=0
        [frame]
            image="misc/blank-hex.png:1600"
        [/frame]
        [boat_frame]
            image="units/transport/orc/battle-barge-bob1.png:1600"
            auto_vflip=no
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/orc/battle-barge-flag[1~3,2,1~3,2,1~3,2].png:[140*3,110,140*3,120,140*3,110]"
            auto_vflip=no
        [/flag_frame]
    [/standing_anim]
    [movement_anim]
        start_time=0
        boat_start_time=0
        boat_y=0~-2:320,-2~0:320,0~2:320,2~0:320
        boat_offset="0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200"
        [frame]
            image="misc/blank-hex.png:1600"
        [/frame]
        [boat_frame]
            image="units/transport/orc/battle-barge.png:1600"
            auto_vflip=no
            primary=yes
        [/boat_frame]
    [/movement_anim]
    [death]
        start_time=0
        alpha=1.0:800,1.0~0.0:280,0.0:1
        y=0:400,0~16:680,16:1
        # this is a placeholder
        [frame]
            image="units/transport/orc/battle-barge.png:1000"
        [/frame]
        [frame]
            image="misc/blank-hex.png:81"
        [/frame]
    [/death]
    [defend]
        hits=hit,kill
        start_time=-20
        boat_start_time=-20
        boat_y=0~-3:140,-3:60,-3~0:300
        boat_offset=0.0:20,0.0~-0.1:80,-0.1:80,-0.1~0.0:320
        [frame]
            image="misc/blank-hex.png:500"
        [/frame]
        [boat_frame]
            image="units/transport/orc/battle-barge.png:20"
            auto_vflip=no
            primary=yes
        [/boat_frame]
        [boat_frame]
            image="units/transport/orc/battle-barge.png:460"
            #image="units/transport/orc/barge-hit[1,2,1].png:[140,180,140]"
            auto_vflip=no
            primary=yes
        [/boat_frame]
        [boat_frame]
            image="units/transport/orc/battle-barge.png:20"
            auto_vflip=no
            primary=yes
        [/boat_frame]
    [/defend]
[/unit_type]
