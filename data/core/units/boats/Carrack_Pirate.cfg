#textdomain wesnoth-units
[unit_type]
    id=Pirate Carrack
    name= _ "Pirate Carrack"
    race=ship
    image="units/transport/pirate-galleon.png"
    # ideally, we have "crew" that make sense for dialogs, and "mechanical" that depicts the transport
    # but for now, we just have "crew"
    # small_profile="portraits/transport/mechanical-pirate_galleon.webp"
    profile="portraits/transport/crew-pirate_galleon.webp"
    hitpoints=130
    movement_type=ship
    movement=8
    experience=150
    level=3
    alignment=chaotic
    advances_to=null
    {AMLA_DEFAULT}
    cost=90
    usage=null
    description= _ "Pirate galleons are to transport ships what wolves are to sheep. The pirates who crew them are more than happy to help relieve other ships of their weighty cargo, or to fight as privateers in return for coin."

    [attack]
        name=ram
        description=_"ram"
        icon=attacks/naval_ram.png
        type=impact
        range=melee
        [specials]
            {WEAPON_SPECIAL_NAVAL}
            {WEAPON_SPECIAL_CHARGE}
        [/specials]
        damage=18
        number=1
    [/attack]
    [attack]
        name=ballistae
        description=_"ballistae"
        icon=attacks/ballista.png
        type=pierce
        range=ranged
        damage=21
        number=2
    [/attack]
    [attack]
        name=grapple
        description=_"grapple"
        icon=attacks/grapple.png
        type=pierce
        range=ranged
        [specials]
            {WEAPON_SPECIAL_SLOW}
        [/specials]
        damage=6
        number=4
    [/attack]

    {SHIP_RAMMING_ANIM units/transport/pirate-galleon.png "~MASK(units/transport/pirate-galleon-mask.png)"}

#define PIRATE_CARRACK_BALLISTAE_ANIM X
    [attack_anim]
        [filter_attack]
            name=ballistae
        [/filter_attack]
        start_time=-500
        missile_start_time=-150
        boat_start_time=-200
        [missile_frame]
            duration=150
            image="projectiles/missile-n.png"
            image_diagonal="projectiles/missile-ne.png"
            x,y={X},15
        [/missile_frame]
        [boat_frame]
            image="units/transport/pirate-galleon.png:700"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
        [/boat_frame]
        [frame]
            image="misc/blank-hex.png:300"
        [/frame]
        {SOUND:HIT_AND_MISS crossbow.ogg crossbow-miss.ogg -150}
    [/attack_anim]
#enddef
    {PIRATE_CARRACK_BALLISTAE_ANIM -15}
    {PIRATE_CARRACK_BALLISTAE_ANIM   0}
    {PIRATE_CARRACK_BALLISTAE_ANIM  15}

#define PIRATE_CARRACK_GRAPPLE_ANIM X
    [attack_anim]
        [filter_attack]
            name=grapple
        [/filter_attack]
        start_time=-200
        missile_start_time=-150
        boat_start_time=-200
        [missile_frame]
            duration=150
            image=projectiles/bolas-n.png
            image_diagonal=projectiles/bolas-ne.png
            x,y={X},15
            sound={SOUND_LIST:THROW}
        [/missile_frame]
        [boat_frame]
            image="units/transport/pirate-galleon.png:300"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
        [/boat_frame]
        [frame]
            image="misc/blank-hex.png:300"
        [/frame]
    [/attack_anim]
#enddef
    {PIRATE_CARRACK_GRAPPLE_ANIM -15}
    {PIRATE_CARRACK_GRAPPLE_ANIM   0}
    {PIRATE_CARRACK_GRAPPLE_ANIM  15}

    # we put the sprite on a non-primary frame group so we don't need to worry about effects
    # like submerge or making the ellipse bob
    [standing_anim]
        start_time=0
        terrain_type=Wo*^*
        boat_start_time=0
        flag_start_time=0
        boat_y=-2:200,-2~3:440,3:300,3~-2:440
        flag_y=-2:200,-2~3:440,3:300,3~-2:440
        flag_directional_x=0:540,-1:250,-2:340,-1:150
        [frame]
            image="misc/blank-hex.png:1380"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon-bob-[1,2,3,2].png:[540,250,440,150]"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/pirate-galleon-flag[1~3,2,1~3,2].png:[200*3,110,190*3,100]"
            auto_vflip=no
        [/flag_frame]
    [/standing_anim]
    [standing_anim]
        start_time=0
        terrain_type=Ww*^*
        boat_start_time=0
        boat_y=-1:250,-1~2:490,2:250,2~-1:490
        flag_y=-1:250,-1~2:490,2:250,2~-1:490
        flag_directional_x=1:350,0:390,-1:350,0:390
        [frame]
            image="misc/blank-hex.png:1480"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon-[rock-port,bob-1,rock-starboard,bob-1].png:[350,390,350,390]"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/pirate-galleon-flag[1~3,2,1~3,2].png:[210*3,130,200*3,120]"
            auto_vflip=no
        [/flag_frame]
    [/standing_anim]
    [standing_anim]
        start_time=0
        terrain_type=S*^*,*^V*
        boat_start_time=0
        boat_y=0~2:740,2~0:740
        flag_y=0~2:740,2~0:740
        [frame]
            image="misc/blank-hex.png:1480"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon-bob-1.png:1480"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
        [flag_frame]
            image="units/transport/pirate-galleon-flag[1~3,2,1~3,2].png:[210*3,130,200*3,120]"
            auto_vflip=no
        [/flag_frame]
    [/standing_anim]
    [movement_anim]
        start_time=0
        boat_start_time=0
        boat_y=0~-2:320,-2~0:320,0~2:320,2~0:320
        boat_offset="0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200,0~1:200"
        [frame]
            image="misc/blank-hex.png:1280"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon.png:1280"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
    [/movement_anim]
    [defend]
        hits=hit,kill
        start_time=-80
        boat_start_time=-80
        [frame]
            image="misc/blank-hex.png:520"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon.png:120"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
        [/boat_frame]
        [boat_frame]
            image="units/transport/pirate-galleon-roll-[1,3~1].png:[70,120,100,70]"
            sound=wose-hit.ogg
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
        [boat_frame]
            image="units/transport/pirate-galleon.png:40"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
    [/defend]
    [death]
        start_time=0
        boat_start_time=-0
        boat_y=0~-3:425,-3~0:425,0~6:550
        boat_alpha=1.0:850,1.0~0.0:550
        [frame]
            image="misc/blank-hex.png:1400"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon-roll-[1~3].png:[160,130,100]"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
        [boat_frame]
            image="units/transport/pirate-galleon-die-[1~3].png:[120,170,719]"
            auto_vflip=no
            # image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
        [boat_frame]
            image="misc/blank-hex.png:1"
        [/boat_frame]
    [/death]
    [defend]
        hits=miss
        start_time=-80
        boat_start_time=-80
        [frame]
            image="misc/blank-hex.png:120"
        [/frame]
        [boat_frame]
            image="units/transport/pirate-galleon.png:120"
            auto_vflip=no
            image_mod=~MASK(units/transport/pirate-galleon-mask.png)
            primary=yes
        [/boat_frame]
    [/defend]
[/unit_type]

#undef PIRATE_CARRACK_BALLISTAE_ANIM
#undef PIRATE_CARRACK_GRAPPLE_ANIM
