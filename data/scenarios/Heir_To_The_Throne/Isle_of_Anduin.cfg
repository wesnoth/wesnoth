[scenario]

	name="The Isle of Anduin"
	map=map1
	music=wesnoth-8.ogg

    {DAWN}
    {MORNING}
    {AFTERNOON}
    {DUSK}
    {FIRST_WATCH}
    {SECOND_WATCH}

#ifdef EASY
	turns=28
#endif
#ifdef NORMAL
	turns=24
#endif
#ifdef HARD
	turns=20
#endif
	id=The_Isle_of_Anduin
	next_scenario=The_Bay_of_Pearls

	objectives="
Victory:
@Defeat enemy leader
Defeat:
#Death of Konrad
#Death of Delfador
#Turns run out"

	[bigmap]
		image=misc/map.png
		{DOT 219 377}
		{DOT 217 385}
		{DOT 211 390}
		{DOT 205 395}
		{CROSS 198 401}
	[/bigmap]

	[side]
	race=Elves
	type=Commander
	description=Konrad
	hitpoints=45
	experience=0
	side=1
	gold=100
	canrecruit=1
	recruit=Elvish Scout,Elvish Fighter,Elvish Archer,Horseman,Mage,Elvish Shaman
	enemy=2
	controller=human
	[/side]

	[side]
	race=Orcs
	type=Orcish Warrior
	description=Usadar Q'kai
	experience=0
	side=2
	canrecruit=1
	recruit=Orcish Grunt,Wolf Rider,Orcish Archer,Troll Whelp
	recruitment_pattern=scout,scout,fighter,fighter,archer
	{GOLD 80 160 260}
	enemy=1
	[/side]

	#if anyone moves next to the ship, they get a rebuke from Konrad
	[event]
	name=moveto
		[filter]
		side=1
		x=30,30,31
		y=8,9,10
		[/filter]
		[message]
		id=return_to_vessel
		description=Konrad
		message="This is no time to return to our vessel! We must take control of the island!"
		[/message]
	[/event]

	[event]
	name=prestart
		[store_unit]
			variable=konrad_store
			kill=yes
			[filter]
			description=Konrad
			[/filter]
		[/store_unit]
		[store_unit]
			variable=delfador_store
			kill=yes
			[filter]
			description=Delfador
			[/filter]
		[/store_unit]
	[/event]
			
	[event]
	name=start

	#the ship that brought them here
	[move_unit_fake]
	type=Galleon
	x=32,32,32,32,32,31,31,31,31
	y=1,2,3,4,5,6,7,8,9
	[/move_unit_fake]
	[item]
	x=31
	y=9
	image=galleon.png
	[/item]

	#move Konrad out of the ship and onto the keep
	[move_unit_fake]
	type=$konrad_store.type
	x=31,30,29,28,27,26,25
	y=9,9,10,10,11,11,12
	[/move_unit_fake]

	#show Konrad
	[unstore_unit]
	variable=konrad_store
	[/unstore_unit]
	{CLEAR_VARIABLE konrad_store}

	[redraw]
	[/redraw]

	#move Delfador out of the ship and onto the keep
	[move_unit_fake]
	type=$delfador_store.type
	x=31,30,29,28,27,26,25
	y=9,9,10,10,11,11,11
	[/move_unit_fake]

	#set Delfador's position
	{VARIABLE delfador_store.x 25}
	{VARIABLE delfador_store.y 11}

	#show Delfador
	[unstore_unit]
	variable=delfador_store
	[/unstore_unit]
	{CLEAR_VARIABLE konrad_store}

	[redraw]
	[/redraw]

	[command]
		[message]
		id=msg2_1
		speaker=narrator
		message="And so the party landed on the Isle of Anduin."
		[/message]
		[message]
		id=msg2_2
		description=Konrad
		message="So this is Anduin. It looks a little...desolate"
		[/message]
		[message]
		id=msg2_3
		description=Delfador
		message="I fear so, Konrad. It seems that the Orcs have come even here."
		[/message]
		[message]
		id=msg2_4
		description=Usadar Q'kai
		message="Who is that? Oh, a party of elves has landed. We shall drive them back into the sea!"
		[/message]
		[message]
		id=msg2_5
		description=Delfador
		message="I did not think the Orcs would have come here. This island used to be so beautiful. We must recapture it! To arms!"
		[/message]
	[/command]
	[/event]

	[event]
	name=victory
		[unit]
		x=5
		y=34
		type=Elvish Fighter
		description=Glordorf
		side=1
		[/unit]

		[message]
		id=msg2_6
		description=Glordorf
		message="Greetings, friends, and thank you for rescuing my island from the Orcs!"
		[/message]

		[message]
		id=msg2_7
		description=Konrad
		message="It was our duty, friend. I hope you will grant us refuge here in return."
		[/message]

		[message]
		id=msg2_8
		description=Glordorf
		message="Of course. The Orcs are brutal, very brutal. Especially in what they are doing to the poor mermen."
		[/message]

		[message]
		id=msg2_9
		description=Konrad
		message="Oh, what are they doing to the mermen?"
		[/message]

		[message]
		id=msg2_10
		description=Glordorf
		message="Have you not heard? Many mermen have been captured, and are being forced to labor as pearl harvesters at the Bay of Pearls. If only someone would rescue them!"
		[/message]

		[message]
		id=msg2_11
		description=Konrad
		message="Let us go and rescue them then!"
		[/message]

		[message]
		id=msg2_12
		description=Glordorf
		message="My lord, it would be very dangerous..."
		[/message]

		[message]
		id=msg2_13
		description=Delfador
		message="I believe we could do it. We need to strike back at Asheviere somehow anyway."
		[/message]

		[message]
		id=msg2_14
		description=Konrad
		message="Let us leave after we have rested then."
		[/message]

		[kill]
		description=Glordorf
		[/kill]
	[/event]

	{deaths.cfg}
[/scenario]

