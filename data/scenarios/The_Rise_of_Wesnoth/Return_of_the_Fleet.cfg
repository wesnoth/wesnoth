[scenario]
	id=Return_of_the_Fleet
	name= _ "Return of the Fleet"
	map_data="{maps/The_Rise_of_Wesnoth/Return_of_the_Fleet}"
	turns=42

	{DAWN}
	{MORNING}
	{AFTERNOON}
	{DUSK}
	{FIRST_WATCH}
	{SECOND_WATCH}

	next_scenario=The_Plan
	bonus=yes
	
	music=wesnoth-2.ogg
	
	objectives= _ "
Victory:
@Defeat all Enemies
Defeat:
#Death of Prince Haldric or
#Death of Lady Jessica or
#Death of Lt. Aethyr or
#Turns run out"

	{scenarios/The_Rise_of_Wesnoth/trow-deaths.cfg}
	{scenarios/The_Rise_of_Wesnoth/trow-macros.cfg}

	[story]
		[part]
			background=maps/the_great_continent.png
			show_title=yes
			{DOT 283 220}
			{DOT 270 215}
			{DOT 255 210}
			{DOT 245 215}
			{CROSS 236 218}
		[/part]
	[/story]

	[side]
		description=Prince Haldric
		side=1
		type=Noble Commander
		canrecruit=1
		controller=human
		team_name=Haldric
		shroud=yes
	[/side]

	[side]
		type=Death Knight
		description=General Heravan
		side=2
		canrecruit=1
		{GOLD 130 180 230}
		team_name=orcs
#ifdef EASY
		recruit=Skeleton,Skeleton Archer, Vampire Bat
#endif

#ifdef NORMAL	
		recruit=Revenant,Bone Shooter,Skeleton,Skeleton Archer, Vampire Bat
#endif

#ifdef HARD
		recruit=Revenant,Bone Shooter,Skeleton,Skeleton Archer, Vampire Bat, Chocobone
#endif
		
		[ai]
			{NO_SCOUTS}
			recruitment_ignore_bad_movement=yes
			passive_leader=yes
			recruitment_pattern=scout,fighter,archer
			aggression=0.4
		[/ai]
		[ai] 
			time_of_day=dusk,first_watch,second_watch 
			aggression=0.7
		[/ai]
	[/side]
	
	[side]
		type=Orcish Warlord
		description=Tan-Halg
		side=3
		canrecruit=1
#ifdef EASY
		recruit=Orcish Archer, Orcish Assassin, Orcish Grunt, Wolf Rider, Orcish Crossbow, Goblin Pillager, Goblin Knight, Troll Whelp
#endif

#ifdef NORMAL	
		recruit=Orcish Archer, Orcish Assassin, Orcish Grunt, Wolf Rider, Orcish Crossbow, Goblin Pillager, Goblin Knight, Orcish Slayer, Orcish Warrior, Troll Whelp, Troll
#endif

#ifdef HARD
		recruit=Orcish Archer, Orcish Assassin, Orcish Grunt, Wolf Rider, Orcish Crossbow, Orcish Warrior, Goblin Knight, Goblin Pillager, Orcish Slayer, Troll Whelp, Troll, Troll Warrior
#endif
		{GOLD 170 220 270}
		team_name=orcs
		[ai]
			{NO_SCOUTS}
			recruitment_ignore_bad_movement=yes
			recruitment_pattern=scout,fighter,fighter,archer,mixed fighter
		[/ai]
		[ai] 
			time_of_day=dusk,first_watch,second_watch 
			aggression=0.75
			caution=0.0
			grouping=no
		[/ai]
		{INCOME 4 8 12}
	[/side]
	
	[side]
		type=Orcish Warlord
		description=Tan-Rinak
		side=4
		canrecruit=1
#ifdef EASY
		recruit=Orcish Archer, Orcish Assassin, Orcish Grunt, Wolf Rider, Orcish Crossbow, Goblin Pillager, Goblin Knight, Troll Whelp
#endif

#ifdef NORMAL	
		recruit=Orcish Archer, Orcish Assassin, Orcish Grunt, Wolf Rider, Orcish Crossbow, Goblin Pillager, Goblin Knight, Orcish Slayer, Orcish Warrior, Troll Whelp, Troll, Orcish Leader
#endif

#ifdef HARD
		recruit=Orcish Archer, Orcish Assassin, Orcish Grunt, Wolf Rider, Orcish Crossbow, Orcish Warrior, Goblin Knight, Goblin Pillager, Orcish Slayer, Troll Whelp, Troll, Troll Warrior, Orcish Leader
#endif
		{GOLD 170 220 270}
		team_name=orcs
		[ai]
			{NO_SCOUTS}
			recruitment_ignore_bad_movement=yes
			recruitment_pattern=scout,fighter,fighter,archer,mixed fighter
		[/ai]
		[ai] 
			time_of_day=dusk,first_watch,second_watch 
			aggression=0.75
			caution=0.0
			grouping=no
		[/ai]
		{INCOME 4 8 12}
	[/side]

	[event]
	name=prestart

		{STARTING_VILLAGES 2 10}
		{STARTING_VILLAGES 3 10}
		{STARTING_VILLAGES 4 10}

		{PUT_IMG (pirate-galleon.png) 10 27}
		{PUT_IMG (pirate-galleon.png) 7 30}
		{PUT_IMG (pirate-galleon.png) 6 33}
		{PUT_IMG (pirate-galleon.png) 5 36}

		{PUT_IMG (items/fire.png) 8 8}
		{PUT_IMG (items/fire.png) 10 2}
		{PUT_IMG (items/fire.png) 17 8}
		{PUT_IMG (items/fire.png) 39 6}
		{PUT_IMG (items/fire.png) 29 8}
		{PUT_IMG (items/fire.png) 26 11}
		
		{PUT_IMG (items/slab.png) 18 15}

		{PUT_IMG (items/signpost.png) 10 34}

		[recall]
			description=Burin the Lost
		[/recall]
		[recall]
			description=Sir Ruddry
		[/recall]
		[recall]
			description=Sir Ladoc
		[/recall]
		[recall]
			description=Minister Edmond
		[/recall]
		[recall]
			description=Lt. Aethyr
		[/recall]

		[remove_shroud]
			side=1
			x=1-40
			y=1-40
		[/remove_shroud]
	[/event]

	[event]
		name=start
		[message]
			id=msgT19_1
			speaker=narrator
			message= _ "Haldric reaches the site where the fleet is due to return. Several ships have already have already docked. The Orcs are on the frontier."
		[/message]
		[message]
			id=msgT19_2
			description=Lt. Aethyr
			message= _ "Sir, some ships have landed. . . They look like they've been damaged by the voyage. Hmm, it seems that most of the ships are staying at sea."
		[/message]
		[message]
			id=msgT19_3
			description=Prince Haldric
			message= _ "They've undoubtedly spotted the smoke from the Orcish fires. We have to defeat these monsters before everybody starves at sea, or before Jevyan Launches an attack with his fleet."
		[/message]
		[message]
			id=msgT19_4
			description=Lt. Aethyr
			message= _ "Yes Sir! The rest of the refugees have fled South, to our initial landing site. If we fail here they'll get slaughtered."
		[/message]
		[message]
			id=msgT19_5
			description=Burin the Lost
			message= _ "Well, that settles it. Enough talking, time to fight!"
		[/message]
		[message]
			id=msgT19_6
			description=Lt. Aethyr
			message= _ "For the glory of the men of The Green Isle!"
		[/message]
		[message]
			id=msgT19_7
			description=Prince Haldric
			message= _ "No, for the Glory of all of the people of the West North! Charge!"
		[/message]
		[message]
			id=msgT19_8
			description=Tan-Rinak
			message= _ "Bah! Human- we will stomp you under our heels!"
		[/message]
		[message]
			id=msgT19_8b
			description=General Heravan
			message= _ ". . .And raise your dead to serve forever!"
		[/message]
	[/event]

	[event]
	name=attack
		[filter_second]
			team=Haldric
		[/filter_second]

		[move_unit_fake]
			type=Blood Bat
			x=29,28,28
			y=1,1,2
		[/move_unit_fake]

		{UNIT (Blood Bat) (Familiar) 2 28 2}

		[move_unit_fake]
			type=Ancient Lich
			x=25,25,25
			y=1,2,2
		[/move_unit_fake]

		{UNIT (Ancient Lich) (Lich-Lord Jevyan) 2 25 2}

		[message]
			id=msgT19_9
			description=Lich-Lord Jevyan
			message= _ "Give up boy! You can't defeat me- Hmm, what's this? You've learnt to conceal the power of the Ruby of Fire. It makes little difference, your undead corpse will lay it at my feet."
		[/message]
		[message]
			id=msgT19_10
			description=Prince Haldric
			message= _ "We'll see about that. The Fool Prince of Southbay was wrong to start this war, but you're the real monster! You sacrificed you're own people to preserve your immortal un-life."
		[/message]
		[message]
			id=msgT19_11
			description=Lich-Lord Jevyan
			message= _ "Enough of this. A curse of darkness upon you young prince."
		[/message]

		[kill]
			description=Lich-Lord Jevyan
		[/kill]

		[move_unit_fake]
			type=Ancient Lich
			x=25,25,25
			y=2,2,1
		[/move_unit_fake]

		{UNIT (Chocobone) (Undead Rider) 2 26 4}
		{UNIT (Chocobone) (Undead Rider) 2 27 4}
		{UNIT (Chocobone) (Undead Rider) 2 25 4}
#ifdef NORMAL	
		{UNIT (Chocobone) (Undead Rider) 2 28 3}
		{UNIT (Chocobone) (Undead Rider) 2 24 3}
#endif

#ifdef HARD
		{UNIT (Chocobone) (Undead Rider) 2 28 3}
		{UNIT (Chocobone) (Undead Rider) 2 24 3}
#endif

		[message]
			id=msgT19_12
			description=Familiar
			message= _ "Neep! Neep!"
		[/message]

		[kill]
			description=Familiar
		[/kill]
		
		[move_unit_fake]
			type=Blood Bat
			x=28,28,29
			y=2,1,1
		[/move_unit_fake]
		
		[place_shroud]
			side=1
			x=1-40
			y=1-40
		[/place_shroud]
	[/event]
	
	[event]
		name=time over
		[message]
			id=msgT19_13
			description=Lt. Aethyr
			message= _ "I see masts on the horizon. Jevyan's fleet is here! It's all over."
		[/message]
	[/event]

	[event]
		name=moveto
		[filter]
			side=1
			x=10
			y=34
		[/filter]
		[message]
			id=msgT19_14
			speaker=narrator
			message= _ "Please Diembark in an Orderly Fashion and Proceed South"
		[/message]
		[message]
			id=msgT19_15
			speaker=unit
			message= _ "Hmm, they left off the 'or the Orcs will eat you' part."
		[/message]
	[/event]
	
	[event]
		name=turn 7
		
		[set_variable]
			name=jessica_store.x
			value=14
		[/set_variable]
		[set_variable]
			name=jessica_store.y
			value=38
		[/set_variable]
		
		[move_unit_fake]
			type=$jessica_store.type
			x=16,15,14,14
			y=40,40,39,38
		[/move_unit_fake]
		
		[unstore_unit]
			variable=jessica_store
			find_vacant=yes
		[/unstore_unit]
		
		{CLEAR_VARIABLE jessica_store}
		
		[message]
			id=msgT19_16
			description=Lady Jessica
			message= _ "I'm back, things went well! Haldric, I sure hope you know what you're doing."
		[/message]
		[message]
			id=msgT19_17
			description=Prince Haldric
			message= _ "Umm, we'll talk about it later. I'm just a little busy at the moment. I'm glad you made it back in one piece."
		[/message]
		[message]
			id=msgT19_18
			description=Lady Jessica
			message= _ "Yeah, it looks like you could use all of the help you can get."
		[/message]
	[/event]

[event]
		name=victory
		[message]
			id=msgT19_19
			description=Prince Haldric
			message= _ "We've defeated Jevyan's forces. The ships must diembark their passengers quickly-"
		[/message]
		[message]
			id=msgT19_20
			description=Lady Jessica
			message= _ "Haldric, what's going on? What's the plan?"
		[/message]
		[message]
			id=msgT19_21
			description=Prince Haldric
			message= _ "Well, we're going to confront Jevyan and destroy him."
		[/message]
		[message]
			id=msgT19_22
			description=Lady Jessica
			message= _ "That will be easier said than done. Even if we defeat him, the other Lich-Lords will follow. It's because of that Ruby. If I were paranoid I'd say that our dear old 'tree-friend' might have known as much."
		[/message]
		[message]
			id=msgT19_23
			description=Prince Haldric
			message= _ "We should discuss this in private. Here, come with me."
		[/message]
	[/event]

	[event]
		name=moveto
		[filter]
			side=1
			x=1-25
			y=13-20
		[/filter]

		#No campaign is complete without a cuttlefish
		{UNIT (Cuttle Fish) (Cuttle Fish) 3 11 17}
#ifdef NORMAL	
		{UNIT (Cuttle Fish) (Cuttle Fish) 3 11 18}
#endif

#ifdef HARD
		{UNIT (Cuttle Fish) (Cuttle Fish) 3 11 18}
		{UNIT (Cuttle Fish) (Cuttle Fish) 3 12 16}
#endif
		[message]
			id=msgT19_24
			description=Cuttle Fish
			message= _ "Slurp, click, click, click!"
		[/message]
		[message]
			id=msgT19_25
			description=Prince Haldric
			message= _ "I don't know what that is, but it doesn't sound friendly."
		[/message]
	[/event]

	[event]
		name=moveto
		[filter]
			side=1
			x=25-40
			y=13-18
		[/filter]
		{UNIT (Saurian Warrior) (Hug Bah) 4 34 15}
		{UNIT (Saurian) (Trok) 4 34 16}
		{UNIT (Saurian) (Kar) 4 33 16}
#ifdef NORMAL	
		{UNIT (Saurian) (Zog) 4 35 15}
#endif

#ifdef HARD
		{UNIT (Saurian) (Kub) 4 35 15}
		{UNIT (Saurian) (Zof) 4 34 16}
		{UNIT (Saurian) (Pag) 4 33 15}
#endif
		[message]
			id=msgT19_26
			description=Hug Bah
			message= _ "You Again. You will sssuffer for your attack against my people! Shek'kahan, our Naga friendsss- You'll pay! We have new friends now."
		[/message]
		
		[allow_recruit]
			type=Saurian
			side=3,4
		[/allow_recruit]

#ifdef HARD
		[allow_recruit]
			type=Saurian Warrior
			side=3,4
		[/allow_recruit]
#endif

	[/event]

	[event]
		name=die

		[filter]
			description=Lt. Aethyr
		[/filter]
		
		[message]
			id=msgT19_27
			speaker=Lt. Aethyr
			message= _ "Oh, to join my family again! Do not mourn my passing."
		[/message]
		
		[endlevel]
			result=defeat
		[/endlevel]
	[/event]

	[event]
		name=die
		[filter]
			description=Tan-Halg
		[/filter]
		
		[filter_second]
			side=1
		[/filter_second]

		[message]
			description=Tan-Halg
			id=msgT19_28
			message= _ "My people are like a rock slide, you can run, but we will crush you- Ahhck!"
		[/message]
		
		[gold]
			side=4
			amount=80
		[/gold]
	[/event]
	
	[event]
		name=die
		[filter]
			description=Tan-Rinak
		[/filter]
		
		[filter_second]
			side=1
		[/filter_second]

		[message]
			description=Tan-Rinak
			id=msgT19_29
			message= _ "I- I die?"
		[/message]
		
		[gold]
			side=3
			amount=80
		[/gold]
	[/event]
[/scenario]
