#define TS_MAP_DATA
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ss,    Ss,    Gs,    Ss,    Ww,    Xu,    Xu,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Dd,    Ww,    Ww,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ss,    Ss,    Vs,    Ft,    Mm,    Gs,    Gs,    Ww,    Ww,    Xu,    Xu,    Xu,    Ww,    Ww,    Ft,    Dd,    Do,    Dd,    Gs,    Ww,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ss,    Ww,    Ss,    Gs,    Hh,    Re,    Gs,    Hh,    Ft,    Ft,    Ww,    Xu,    Ww,    Ff,    Gs,    Gs,    Hd,    Md,    Hd,    Ft,    Ww,    Ww,    Ss,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Gs,    Ww,    Ds,    Ww,  Bww/,    Re,    Ft,    Re,    Re,   Vht,    Gs,    Ww,    Xu,    Ww,   Veg,    Gg,    Gg,    Ft,    Re,    Re,    Re,    Ds,    Ww,    Ss,    Vs,    Ss,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Dd,    Dd,    Hd,    Ft,    Re,    Re,    Ds,    Ww,    Ww,    Gs,    Re,    Gs,   Wwf,    Ww,    Xu,    Ww,    Gg,    Hh,    Gg,    Re,    Gg,    Gg,    Gg,    Re,  Bww\,    Gs,    Hh,    Ft,    Gs,    Ss,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Dd,    Do,    Md,    Re,    Gg,    Gg,    Ww,    Ww,    Ww,    Hh,    Re,    Ww,    Ff,    Ww,    Xu,    Ww,    Ww,    Ff,    Ww,    Re,    Ww,   Vwm,    Ww,    Ds,    Ww,    Re,    Re,    Mm,    Gs,    Ss,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Ft,    Hd,    Ft,    Re,    Gg,   Vwm,    Wo,    Wo,    Ww,    Ft,  Bww|,    Ww,    Gg,    Ww,    Xu,    Ww,    Ff,   Wwf,    Gg,  Bww|,    Ww,    Wo,    Wo,    Ww,    Ww,    Ft,    Re,    Gs,    Gs,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Gs,    Gs,    Gg,    Re,    Re,    Ww,    Ww,    Ww,    Ff,    Ww,    Rr,    Ww,   Wwf,    Ww,    Xu,    Ww,    Gg,    Gg,    Rr,    Rr,    Hh,    Ww,    Ww,    Ww,    Hh,    Gs,    Re,    Hh,    Ft,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Ff,    Gg,    Hh,    Gg,    Ww,  Bww\,    Rr,    Hh,   Vhm,    Hh,    Rr,    Ff,    Gg,    Ww,    Xu,    Ww,    Gg,    Hh,    Rr,    Ff,   Vhm,    Ff,    Ww,    Ft,    Re,    Re,    Gs,   Vht,    Ft,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Ww,   Veg,    Gg,    Ff,   Wwf,    Gg,    Rr,    Ff,    Rr,    Rr,    Gg,    Gg,    Gg,    Ww,    Xu,    Ww,    Gg,    Gg,    Gg,    Rr,    Rr,    Hh,    Rr,  Bww/,    Ww,    Ww,   Wwf,    Gs,    Ww,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Xu,    Xu,    Ww,    Ww,    Ww,    Ff,    Gg,    Hh,    Rr,    Gg,    Rr,    Ch,    Hh,    Gg,    Ww,    Xu,    Ww,    Gg,    Ff,    Ch,    Rr,    Gg,    Rr,    Ff,    Ww,    Gg,    Ff,    Ww,    Ww,    Xu,    Xu,    Ww,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Ft,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,    Gg,    Gg,    Ff,    Ch,  2 Kh,    Ch,    Gg,    Ww,    Xu,    Ww,    Gg,    Ch,  3 Kh,    Ch,    Hh,    Gg,    Gg,   Wwf,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Ff,    Ww,    Ww,    Xu,    Xu,    _s,    _s,    _s
    _s,    Xu,    Xu,    Ss,    Ww,    Gs,    Ft,   Vht,    Gs,   Wwf,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,    Gg,    Ch,    Ww,    Ww,    Ww,    Ww,    Xu,    Ww,    Ww,    Ww,    Ww,    Ch,    Gg,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,   Veg,    Gg,    Gs,    Ft,    Ww,    Ww,    Xu,    Xu,    _s
    _s,    Xu,    Ss,    Gs,    Gs,    Gs,    Hh,    Re,    Gs,    Ww,    Ff,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,    Ww,    Wo,    Xu,    Xu,    Ql,    Xu,    Xu,    Wo,    Ww,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Ff,    Ww,    Ff,    Hh,    Gg,    Gs,    Hd,    Dd,    Dd,    Ww,    Xu,    _s
    _s,    Xu,    Ss,    Ft,    Mm,    Re,    Re,    Gs,    Re,    Re,    Ww,    Ww,   Wwf,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Xu,    Xu,    Xu,    Ql,    Xu,    Ql,    Xu,    Xu,    Xu,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,    Gg,    Gg,   Wwf,    Ww,    Gg,    Re,    Ft,    Md,    Do,    Dd,    Ww,    Xu,    _s
    _s,    Xu,    Ss,    Vs,    Hh,    Re,    Ft,    Ww,    Hh,    Ft,  Bww\,    Rr,    Ff,    Gg,    Gg,    Gg,    Ww,    Ww,    Xu,    Ql,    Ql,    Ql,    Ql,    Xu,    Ql,    Ql,    Ql,    Ql,    Xu,    Ww,    Ww,    Gg,    Gg,    Gg,    Hh,    Rr,    Gg,  Bww/,    Re,    Gg,    Re,    Re,    Hd,    Gs,    Ww,    Xu,    _s
    _s,    Xu,    Ss,    Ss,    Gs,  Bww|,    Ww,    Ww,    Ww,    Ww,    Ww,    Hh,    Rr,    Gg,    Hh,    Ch,    Gg,    Ww,    Xu,    Ql,    Xu,    Xu,    Xu,   Uui,    Xu,    Xu,    Xu,    Ql,    Xu,    Ww,    Gg,    Ch,    Ff,    Gg,    Rr,    Ff,    Rr,    Ww,    Ww,   Vwm,    Gg,    Re,    Ft,    Ww,    Ww,    Xu,    _s
    _s,    Xu,    Ss,    Ww,    Ww,    Re,    Ds,    Ww,    Wo,    Ww,    Ff,   Vhm,    Rr,    Rr,    Ch,  7 Kh,    Ww,    Wo,    Xu,    Xu,    Ql,    Xu,   Uui,  1 Kh,   Uui,    Xu,    Ql,    Xu,    Xu,    Wo,    Ww,  4 Kh,    Ch,    Rr,    Rr,   Vhm,    Hh,    Ww,    Wo,    Ww,    Gg,    Re,    Ds,    Ww,    Ss,    Xu,    _s
    _s,    Xu,    Ss,    Ww,    Ds,    Re,    Gg,   Vwm,    Wo,    Ww,    Hh,    Ff,    Rr,    Gg,    Ch,    Ch,    Ww,    Ww,    Xu,    Ql,    Ql,    Xu,   Uui,   Uui,   Uui,    Xu,    Ql,    Ql,    Xu,    Ww,    Ww,    Ch,    Ch,    Gg,    Rr,    Hh,    Ff,    Ww,    Wo,    Ww,    Ds,  Bww|,    Ww,    Ss,    Ss,    Xu,    _s
    _s,    Xu,    Ww,    Gs,    Ft,    Re,    Gg,    Gg,    Ww,  Bww/,    Rr,    Rr,    Rr,    Gg,    Ff,    Gg,    Gg,    Ww,    Xu,    Ql,    Xu,    Ql,    Xu,    Xu,    Xu,    Ql,    Xu,    Ql,    Xu,    Ww,    Gg,    Gg,    Hh,    Gg,    Rr,    Rr,    Ww,    Ft,    Ww,    Ww,    Ww,    Re,    Gs,    Vs,    Ss,    Xu,    _s
    _s,    Xu,    Ww,    Dd,    Hd,    Md,    Re,    Re,    Re,    Ww,    Gg,    Gg,    Hh,    Gg,    Gg,    Ww,    Ww,    Xu,    Xu,    Xu,    Ql,    Xu,    Ql,    Xu,    Ql,    Xu,    Ql,    Xu,    Xu,    Xu,    Ww,    Ww,    Gg,    Gg,    Ff,    Ww,  Bww\,    Re,    Hh,    Gs,    Ft,    Re,    Hh,    Ft,    Ss,    Xu,    _s
    _s,    Xu,    Ww,    Dd,    Do,    Hd,    Ft,    Gg,    Gg,    Ff,   Wwf,    Ff,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Ww,    Xu,    Xu,    Ql,    Ql,    Ql,    Xu,    Xu,    Ww,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,   Wwf,    Gg,    Ww,    Ww,    Re,    Re,    Re,    Gs,    Mm,    Gs,    Ss,    Xu,    _s
    _s,    Xu,    Ww,    Ww,    Dd,    Ft,    Gs,    Gg,    Hh,    Gg,    Ww,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,    Gg,    Ww,    Wo,    Ww,    Xu,    Xu,    Xu,    Ww,    Wo,    Ww,    Gg,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Ff,   Wwf,    Gs,   Vht,    Hh,    Gs,    Gs,    Ss,    Ss,    Xu,    _s
    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Gs,    Ff,   Veg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,    Gg,    Hh,    Ch,  6 Kh,    Ww,    Gg,    Ww,    Xu,    Ww,    Gg,    Ww,  5 Kh,    Ch,    Ff,    Gg,    Gg,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gs,    Ft,    Ft,    Ww,    Ww,    Xu,    Xu,    _s,    _s
    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Gg,   Wwf,    Ff,    Gg,    Gg,    Ch,    Ch,    Ch,    Gg,    Ww,    Xu,    Ww,    Gg,    Ch,    Ch,    Ch,    Gg,    Gg,    Hh,    Gg,    Ff,    Ww,    Ww,    Xu,    Xu,    Ww,    Ww,    Ww,    Xu,    Xu,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Xu,    Ww,    Ww,   Wwf,    Ff,    Ww,    Ww,    Rr,    Rr,    Rr,    Rr,    Gg,    Ff,    Gg,    Ww,    Xu,    Ww,    Gg,    Hh,    Gg,    Rr,    Rr,    Rr,    Rr,    Gg,   Wwf,    Ww,    Gg,    Ww,    Ww,    Xu,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Ft,    Gs,    Gs,    Ww,    Re,  Bww/,    Ww,    Hh,   Vhm,    Rr,    Rr,    Gg,    Gg,    Ww,    Xu,    Ww,    Gg,    Gg,    Rr,    Rr,   Vhm,    Ff,    Rr,    Gg,    Ww,    Ff,    Hh,   Veg,    Ff,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Ft,   Vht,    Re,    Re,    Hh,    Ft,    Ww,    Ff,    Hh,    Ff,    Rr,    Hh,    Gg,    Ww,    Xu,    Ww,   Wwf,    Ff,    Rr,    Hh,    Ff,    Hh,    Ww,  Bww\,    Re,    Gg,    Gg,    Gg,    Gs,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Gs,    Hh,    Re,    Gs,    Ww,    Ww,    Wo,    Ww,    Ww,    Rr,    Gg,    Gg,    Ff,    Ww,    Xu,    Ww,    Gg,    Ww,  Bww|,    Ww,    Ww,    Ww,    Wo,    Ww,    Gg,    Re,    Ft,    Gs,    Ft,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ww,    Gs,    Gs,    Re,    Ft,    Ww,    Ww,    Ww,    Wo,    Ww,  Bww|,    Ww,   Wwf,    Ww,    Ww,    Xu,    Ww,    Ff,    Ww,    Re,    Ft,    Ww,    Wo,    Ww,   Vwm,    Gg,    Re,    Md,    Hd,    Dd,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ss,    Gs,    Mm,    Hh,    Re,  Bww\,    Ds,    Gg,   Vwm,    Gg,    Re,    Gg,    Ff,    Gg,    Ww,    Xu,    Ww,   Wwf,    Ww,    Re,    Hh,    Ww,    Ww,    Ds,    Gg,    Re,    Re,    Hd,    Do,    Dd,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Ss,    Ss,    Ft,    Vs,    Gs,    Ww,    Re,    Re,    Gg,    Re,    Re,    Gg,    Hh,   Veg,    Ww,    Xu,    Ww,    Gs,    Gs,    Re,    Gs,    Ft,    Ww,  Bww/,    Re,    Ds,    Ft,    Gs,    Dd,    Ww,    Ww,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ss,    Ss,    Ss,    Ww,    Ds,    Ft,    Re,    Md,    Ft,    Gs,    Gg,    Ff,    Ww,    Xu,    Ww,    Ft,   Vht,    Hh,    Re,    Re,    Re,    Gs,    Ww,    Ww,    Ww,    Ww,    Ww,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ss,    Ss,    Ww,    Gs,    Hd,    Do,    Hd,    Ft,    Gs,    Ww,    Ww,    Xu,    Ww,    Ww,    Ft,    Gs,    Gs,    Mm,    Hh,    Vs,    Ss,    Ss,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Dd,    Dd,    Dd,    Ww,    Ww,    Xu,    Xu,    _s,    Xu,    Xu,    Ww,    Ww,    Gs,    Gs,    Ft,    Ss,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ww,    Ww,    Ww,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Ss,    Ss,    Ss,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Xu,    Xu,    Xu,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
#enddef

#define TS_WALL_MASK_NORTH
    Ww,    Ww,    Ww
    Gs,    Ww,    Gg
    Ww,    Ww,    Gg
    Gg,    Gg,    Ww
    Mm,    Hh,    Gg
    Ff,    Gg,    Gg
    Ww,    Ww,    Gg
    Gg,   Wwf,    Ff
    Gg,   Wwf,    Gg
    Ff,    Ww,    Gg
    Ww,    Xu,    Ww
#enddef

#define TS_WALL_MASK_NORTH_EAST
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Gs,    Ww,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Gg,    Ww,    Ww,    Ww,    Ww
    _s,    _s,    _s,    _s,    _s,    Ff,    Mm,    Gg,    Ww,    Gg,    Gg,    _s
    _s,    _s,    _s,    Gg,    Ww,    Gg,    Hh,    Gg,    Ww,    _s,    _s,    _s
    _s,    Ff,    Gg,   Wwf,    Ww,    Gg,    Gg,    _s,    _s,    _s,    _s,    _s
    Ww,    Ww,   Wwf,    Gg,    Ff,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    Xu,    Ww,    Gg,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
#enddef

#define TS_WALL_MASK_NORTH_WEST
    _s,    _s,    Ww,    Gg,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    Ww,    Ww,    Ww,    Gg,    Ww,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    Gs,    Ww,    Ww,    Gg,    Gg,    Gg,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    Gg,    Mm,    Hh,    Gg,    Gg,    Ff,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    Ff,    Ww,    Ww,   Wwf,    Gg,    Gg,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Gg,    Gg,   Wwf,    Ww,    Ww
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Ff,    Ww,    Xu
#enddef

#define TS_WALL_MASK_SOUTH
    _s,    Xu,    _s
    Ww,    Ww,    Ww
    Gg,   Wwf,    Ff
    Gg,   Wwf,    Gg
    Ff,    Ww,    Gg
    Gg,    Gg,    Ww
    Gg,    Hh,    Ff
    Gg,    Gg,    Mm
    Ww,    Ww,    Gg
    Gg,    Ww,    Ww
    Gg,    Ww,    Gs
    Ww,    _s,    Ww
#enddef

#define TS_WALL_MASK_SOUTH_EAST
    _s,    Ww,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    Xu,    Ww,    Ff,    Gg,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    Ww,    Gg,   Wwf,   Wwf,    Gg,    Ww,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    Gg,    Ff,    Ww,    Gg,    Ff,    Mm,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    _s,    Gg,    Gg,    Hh,    Gg,    Gg,    Ww,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    Gg,    Ww,    Ww,    Ww,    Gs,    Ww
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Gg,    Gg,    Ww,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Ww,    _s
#enddef

#define TS_WALL_MASK_SOUTH_WEST
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Ww,    _s
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Gg,    Gg,    Ww,    Xu
    _s,    _s,    _s,    _s,    _s,    _s,    _s,    Gg,    Ff,   Wwf,   Wwf,    Ff,    Ww
    _s,    _s,    _s,    _s,    _s,    Gg,    Gg,    Gg,    Ww,    Gg,    Gg,    _s,    _s
    _s,    _s,    _s,    Gg,    Ww,    Gg,    Hh,    Ff,    Ww,    _s,    _s,    _s,    _s
    _s,    Ww,    Gg,    Ww,    Ww,    Gg,    Mm,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    Ww,    Gs,    Ww,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    Ww,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s,    _s
#enddef

#define TS_CASTLE_MASK
    _s,    _s,    _s,    _s,    _s,    Gg,    _s,    _s,    _s,    Gg,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    Ch,    Ch,    Ff,    _s,    _s,    _s,    Ff,    Ch,    Ch,    _s,    _s,    _s
    _s,    _s,    Gg,    Ff,    Gg,    _s,    _s,    Ww,    _s,    _s,    Gg,    Ff,    Gg,    _s,    _s
    _s,    _s,    _s,    _s,    _s,    Gg,    Ff,    Hh,    Mm,    Gg,    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    Ww,    Mm,    Ff,    Gg,    Ch,    Ff,    Gg,    Ff,    Ww,    _s,    _s,    _s
    Gg,    Ff,    _s,    Ff,    Hh,    Ch,    Ch,    Ch,    Ch,    Ch,    Hh,    Mm,    _s,    Ff,    Gg
    Ch,    Gg,    _s,    Gg,    Gg,    Ch,    Ch,    Kh,    Ch,    Ch,    Ff,    Gg,    _s,    Gg,    Ch
    Ch,    Ff,    _s,    Mm,    Ff,    Ch,    Ch,    Ch,    Ch,    Ch,    Gg,    Ff,    _s,    Ff,    Ch
    Gg,    _s,    _s,    Ww,    Hh,    Gg,    Ch,    Ch,    Ch,    Ff,    Hh,    Ww,    _s,    _s,    Gg
    _s,    _s,    _s,    _s,    Ff,    Gg,    Ff,    Hh,    Gg,    Gg,    Mm,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    Ff,    _s,    _s,    Mm,    Ww,    Ff,    _s,    _s,    Ff,    _s,    _s,    _s
    _s,    _s,    Gg,    Ch,    Gg,    Ff,    _s,    _s,    _s,    Ff,    Gg,    Ch,    Gg,    _s,    _s
    _s,    _s,    _s,    _s,    Ch,    Gg,    _s,    _s,    _s,    Gg,    Ch,    _s,    _s,    _s,    _s
#enddef

#define TS_OPEN_MASK_NORTH_WEST
    _s,    _s,    _s,    _s,    _s
    _s,    _s,    _s,    Gg,    Ww
    _s,    Ww,    Hh,    _s,    _s
#enddef

#define TS_OPEN_MASK_NORTH_EAST
    Ww,    Hh,    _s,    _s
    _s,    _s,    Gg,    Ww
#enddef

#define TS_OPEN_MASK_EAST
    Ww
    Hh
    Gg
    Ww
#enddef

#define TS_OPEN_MASK_SOUTH_WEST
    _s,    _s,    _s,    _s,    _s
    _s,    Ww,    _s,    _s,    _s
    _s,    _s,    Gg,    Hh,    _s
    _s,    _s,    _s,    _s,    Ww
#enddef

#define TS_OPEN_MASK_SOUTH_EAST
    _s,    _s,    _s,    _s
    _s,    _s,    _s,    Ww
    _s,    Gg,    Hh,    _s
    Ww,    _s,    _s,    _s
#enddef

#define TS_OPEN_MASK_WEST
    Ww
    Gg
    Hh
    Ww
#enddef

#define TS_SET_LABELS
	{SET_LABEL_PERSISTANT 24 18 (_ "Turn 2: Loyalists")}
	{SET_LABEL_PERSISTANT 27 20 (_ "Turn 5: Knalgans")}
	{SET_LABEL_PERSISTANT 27 23 (_ "Turn 8: Rebels")}
	{SET_LABEL_PERSISTANT 24 24 (_ "Turn 11: Northerners")}
	{SET_LABEL_PERSISTANT 21 23 (_ "Turn 14: Drakes")}
	{SET_LABEL_PERSISTANT 21 20 (_ "Turn 17: Undead")}
	{SET_LABEL_PERSISTANT 24 21 (_ "Tower of Doom")}
#enddef

#define TS_OPEN_WALLS
	{EARTHQUAKE (
		{IF_ALLIED 7 2 ({MODIFY_TERRAIN_MASK 7 13 ("{TS_WALL_MASK_NORTH_WEST}") ()} )}
		{IF_ALLIED 2 3 ({MODIFY_TERRAIN_MASK 23 6 ("{TS_WALL_MASK_NORTH}") ()} )}
		{IF_ALLIED 3 4 ({MODIFY_TERRAIN_MASK 29 13 ("{TS_WALL_MASK_NORTH_EAST}") ()} )}
		{IF_ALLIED 4 5 ({MODIFY_TERRAIN_MASK 29 23 ("{TS_WALL_MASK_SOUTH_EAST}") ()} )}
		{IF_ALLIED 5 6 ({MODIFY_TERRAIN_MASK 23 26 ("{TS_WALL_MASK_SOUTH}") ()} )}
		{IF_ALLIED 6 7 ({MODIFY_TERRAIN_MASK 7 23 ("{TS_WALL_MASK_SOUTH_WEST}") ()} )}
	)}
#enddef

#define TS_BUILD_CASTLE
	{EARTHQUAKE ({MODIFY_TERRAIN_MASK 17 15 ("{TS_CASTLE_MASK}") ()})}
#enddef

#define TS_OPEN_CASTLE
	{EARTHQUAKE (
		{IF_ALIVE 2 ({MODIFY_TERRAIN_MASK 19 16 ("{TS_OPEN_MASK_NORTH_WEST}") ()} )}
		{IF_ALIVE 3 ({MODIFY_TERRAIN_MASK 25 17 ("{TS_OPEN_MASK_NORTH_EAST}") ()} )}
		{IF_ALIVE 4 ({MODIFY_TERRAIN_MASK 29 20 ("{TS_OPEN_MASK_EAST}") ()} )}
		{IF_ALIVE 5 ({MODIFY_TERRAIN_MASK 25 23 ("{TS_OPEN_MASK_SOUTH_EAST}") ()} )}
		{IF_ALIVE 6 ({MODIFY_TERRAIN_MASK 19 23 ("{TS_OPEN_MASK_SOUTH_WEST}") ()} )}
		{IF_ALIVE 7 ({MODIFY_TERRAIN_MASK 19 20 ("{TS_OPEN_MASK_WEST}") ()} )}
	)}
#enddef

#define TS_SPAWN1 UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 12 10 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 29 7 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 41 18 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 36 32 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 19 36 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 7 25 () ()})}
#enddef

#define TS_SPAWN2 UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 19 7 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 36 10 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 41 25 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 29 36 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 12 32 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 7 18 () ()})}
#enddef

#define TS_SWAMP_SPAWN UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 15 6 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 35 7 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 44 22 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 33 37 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 13 36 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 4 20 () ()})}
#enddef

#define TS_LAKE_SPAWN UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 17 10 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 32 10 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 39 22 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 31 33 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 16 32 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 9 21 () ()})}
#enddef

#define TS_HOME_SPAWN UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 18 12 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 30 12 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 36 21 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 30 30 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 18 13 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 12 21 () ()})}
#enddef

#define TS_SPAWNS
	{ON_TURN 2 (
		{TS_SPAWN1 "Footpad"}{TS_SPAWN1 "Peasant"}
		{TS_SPAWN2 "Bowman"}{TS_SPAWN2 "Cavalryman"}
	)}
	{ON_TURN 5 (
		{TS_SPAWN1 "Thief"}{TS_SPAWN1 "Poacher"}
		{TS_SPAWN2 "Dwarvish Guardsman"}{TS_SPAWN2 "Dwarvish Fighter"}
	)}
	{ON_TURN 8 (
		{TS_SPAWN1 "Elvish Archer"}{TS_SPAWN1 "Elvish Shaman"}
		{TS_LAKE_SPAWN "Merman Hunter"}
		{TS_SPAWN2 "Elvish Archer"}
	)}
	{ON_TURN 11 (
		{TS_SPAWN1 "Orcish Slayer"}
		{TS_LAKE_SPAWN "Naga Fighter"}
		{TS_SPAWN2 "Troll Hero"}{TS_SPAWN2 "Troll Whelp"}
	)}
	{ON_TURN 14 (
		{TS_SPAWN1 "Drake Warrior"}{TS_SPAWN1 "Drake Glider"}
		{TS_SPAWN2 "Fire Drake"}{TS_SPAWN2 "Drake Fighter"}
	)}
	{ON_TURN 17 (
		{TS_SPAWN1 "Death Knight"}{TS_SPAWN1 "Walking Corpse"}{TS_SPAWN1 "Walking Corpse"}{TS_SPAWN1 "Walking Corpse"}{TS_SPAWN1 "Vampire Bat"}
		{TS_SWAMP_SPAWN "Tentacle of the Deep"}
		{TS_SPAWN2 "Lich"}{TS_SPAWN2 "Walking Corpse"}{TS_SPAWN2 "Walking Corpse"}{TS_SPAWN2 "Walking Corpse"}{TS_SPAWN2 "Vampire Bat"}
	)}
	{ON_TURN 20 (
		{TS_SPAWN1 "Drake Enforcer"}
		{TS_LAKE_SPAWN "Mermaid Diviner"}{TS_LAKE_SPAWN "Merman Entangler"}
		{TS_SPAWN2 "Drake Enforcer"}
	)}
	{ON_TURN 23 (
		{TS_SPAWN1 "Dark Sorcerer"}
		{TS_LAKE_SPAWN "Shadow"}{TS_LAKE_SPAWN "Shadow"}{TS_LAKE_SPAWN "Shadow"}
		{TS_SPAWN2 "Dark Sorcerer"}
	)}
	{ON_TURN 26 (
		{TS_SPAWN1 "Goblin Rouser"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}
		{TS_SWAMP_SPAWN "Cuttle Fish"}
		{TS_SPAWN2 "Goblin Rouser"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}
	)}
#enddef

# Ends the game with the result RESULT (can be either victory or defeat)
# For example, we could win:
# {ENDGAME victory}
#
#define ENDGAME RESULT
	[endlevel]
		result={RESULT}
	[/endlevel]
#enddef

[multiplayer]
	id=multiplayer_6p_Team_Survival
	name= _ "6p - Team Survival"
	map_data="{TS_MAP_DATA}"

	description= _ "Scenario where the objective is to survive for as long as possible."
	experience_modifier=70
	turns=32
	turn_at=1
	victory_when_enemies_defeated=yes

	{ON_PRESTART (
		{SET_OBJECTIVES 0 (_ "Survive for 32 turns.") (_ "Hint: Learning the enemy spawnpoints and types helps alot.") (
			{VICTORY_CONDITION (_ "Survive all enemy attacks.")}
			{DEFEAT_CONDITION (_ "Death of your team leaders.")}
		)}
	)}
	{ON_START (
		{TS_SET_LABELS}
		{TS_OPEN_WALLS}
	)}

	{TS_SPAWNS}

	{ON_TURN 25 {TS_BUILD_CASTLE}}
	{ON_TURN 26 {TS_OPEN_CASTLE}}
	{ON_TURN 32 (
		{IF_ALIVE 2 ({ENDGAME victory})}
		{IF_ALIVE 3 ({ENDGAME victory})}
		{IF_ALIVE 4 ({ENDGAME victory})}
		{IF_ALIVE 5 ({ENDGAME victory})}
		{IF_ALIVE 6 ({ENDGAME victory})}
		{IF_ALIVE 7 ({ENDGAME victory})}
	)}

	{ON_VICTORY (
		{MESSAGE narrator (units/elves-wood/shyde.png) (Faery) (_ "Congratulations for surviving the map that so many people claim is impossible. Frankly, I haven't got a clue as to how you did it, so send me the replay by mail to: roze@roze.mine.nu. Thank You!")}
	)}
	{ON_DEFEAT (
		{MESSAGE narrator (units/undead/wraith.png) (Death) (_ "You have lost this game, but fear not. You can always try again. And again. And again. *Muahahaha*")}
	)}

	{DEFAULT_MUSIC_PLAYLIST}

	{DAWN}
	{MORNING}
	{AFTERNOON}
	{DUSK}
	{FIRST_WATCH}
	{SECOND_WATCH}

	{SIDE_COMPUTER 1 Attacker (Attacker) 1000 47 () (
		leader_value=7.0
		aggression=1.0
	)}
	{SIDE_PLAYER 2 Defenders-1 (North-West) 125 -2 ()}
	{SIDE_PLAYER 3 Defenders-2 (North-East) 125 -2 ()}
	{SIDE_PLAYER 4 Defenders-3 (Middle-East) 125 -2 ()}
	{SIDE_PLAYER 5 Defenders-4 (South-East) 125 -2 ()}
	{SIDE_PLAYER 6 Defenders-5 (South-West) 125 -2 ()}
	{SIDE_PLAYER 7 Defenders-6 (Middle-West) 125 -2 ()}

[/multiplayer]

#undef TS_MAP_DATA
#undef TS_WALL_MASK_NORTH
#undef TS_WALL_MASK_NORTH_EAST
#undef TS_WALL_MASK_NORTH_WEST
#undef TS_WALL_MASK_SOUTH
#undef TS_WALL_MASK_SOUTH_EAST
#undef TS_WALL_MASK_SOUTH_WEST
#undef TS_CASTLE_MASK
#undef TS_OPEN_MASK_NORTH_WEST
#undef TS_OPEN_MASK_NORTH_EAST
#undef TS_OPEN_MASK_EAST
#undef TS_OPEN_MASK_SOUTH_WEST
#undef TS_OPEN_MASK_SOUTH_EAST
#undef TS_OPEN_MASK_WEST
#undef TS_SET_LABELS
#undef TS_OPEN_WALLS
#undef TS_BUILD_CASTLE
#undef TS_OPEN_CASTLE
#undef TS_SPAWN1
#undef TS_SPAWN2
#undef TS_SWAMP_SPAWN
#undef TS_LAKE_SPAWN
#undef TS_HOME_SPAWN
#undef TS_SPAWNS
