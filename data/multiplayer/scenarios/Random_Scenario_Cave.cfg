#textdomain wesnoth-multiplayer

#define CLEAR_TERRAINS
Rb,Rb,Rb,Rb,Rb,Rb,Rb,Rb^Tf,Rb^Ii,Sm,Sm,Uue,Rb^Fetd,Rb^Fdw#enddef

#define ROAD_COSTS
    [road_cost]
        terrain=Rb
        cost=2
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Rb^Tf
        cost=20
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Rb^Fdw
        cost=20
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Uue
        cost=10
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Rb^Ii
        cost=2
        convert_to=Ur^Ii
    [/road_cost]
    [road_cost]
        terrain=Uue
        cost=50
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Sm
        cost=75
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Rb^Fetd
        cost=75
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Rb^Fdw
        cost=75
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Wwg
        cost=100
        convert_to_bridge=Wwg^Bw|,Wwg^Bw/,Wwg^Bw\
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Wwf
        cost=100
        convert_to_bridge=Wwf^Bw|,Wwf^Bw/,Wwf^Bw\
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Ur
        cost=2
        convert_to=Ur
    [/road_cost]
    [road_cost]
        terrain=Ur^Ii
        cost=2
        convert_to=Ur^Ii
    [/road_cost]
    [road_cost]
        terrain=Rb^Vu
        cost=5
        convert_to=Ur^Vu
    [/road_cost]
    [road_cost]
        terrain=Rb^Vud
        cost=5
        convert_to=Ur^Vud
    [/road_cost]
    [road_cost]
        terrain=Uue^Vud
        cost=55
        convert_to=Ur^Vud
    [/road_cost]
    # We don't want to carve a new tunnel now,
    # so give walls a ridiculously high cost.
    [road_cost]
        terrain=Xue
        cost=1000
        convert_to=Uue
    [/road_cost]
#enddef

#define PLAYER_CHAMBER NUMBER X Y REL
    [chamber]
        id=player_{NUMBER}
        require_player={NUMBER}
        x={X}
        y={Y}
        relative_to={REL}
        size=5
        jagged=2
        [item_location]
            id={NUMBER}
            place_castle=yes
        [/item_location]
        [items]
            id=items_{NUMBER}
            [side]
                side={NUMBER}
            [/side]
        [/items]
        [passage]
            destination=central_chamber
            windiness=3
            laziness=2
            jagged=3
            width=3
            terrain_clear={CLEAR_TERRAINS}
            place_villages=yes
            # Try not to plow thru the lake, but if we must, use ford
            [road_cost]
                terrain=Wwg
                cost=100
                convert_to=Wwf
            [/road_cost]
        [/passage]
        [passage]
            ignore=no
            destination=central_chamber
            windiness=2
            jagged=2
            width=2
            {ROAD_COSTS}
        [/passage]
    [/chamber]
#enddef

[multiplayer]
    # This id is currently hardcoded by the random map generator of the editor
    id=multiplayer_Random_Map_Cave
    name= _ "Random map (Cave)"
    description= _ "A random map set in a cave. Note: random maps are often unbalanced, but if you have time, you can regenerate them until you get a good one."
    scenario_generation=lua
    [generator]
        id="cavegen"
        config_name=_"Lua Cave Generator"
        create_scenario=<<
        	return wesnoth.require("lua/cave_map_generator.lua").generate_scenario(...)
        >>
        user_config=<<
			return wesnoth.dofile("multiplayer/gui/cave_map_settings.lua", ...)
		>>
        [scenario]
            name= _ "Random map (Cave)"
            id=multiplayer_Random_Map_Cave
            {DEFAULT_MUSIC_PLAYLIST}
            {DEFAULT_SCHEDULE}
        [/scenario]
        terrain_clear={CLEAR_TERRAINS}
        terrain_wall=Xue
        terrain_castle=Co
        terrain_keep=Ko
        terrain_village=Rb^Vu,Rb^Vu,Rb^Vu,Rb^Vu,Rb^Vu,Rb^Vud,Rb^Vud,Uue^Vud

        map_width=40
        map_height=40
        village_density=25
        nplayers=4

        [chamber]
            id=central_chamber
            x=14-26
            y=14-26
            size=20
            jagged=30
        [/chamber]
        [chamber]
            id=lake
            x=14-26
            y=14-26
            size=5
            jagged=12
            terrain_clear=Wwg
            # Without this, there is a chance that the lake is entirely disconnected from everything else
            [passage]
                destination=central_chamber
                windiness=5
                laziness=3
                jagged=4
                width=1
                terrain_clear=Wwg
            [/passage]
        [/chamber]
        {PLAYER_CHAMBER 1 3-10 3-10 top-left}
        {PLAYER_CHAMBER 2 3-10 3-10 bottom-right}
        {PLAYER_CHAMBER 3 3-10 3-10 bottom-left}
        {PLAYER_CHAMBER 4 3-10 3-10 top-right}
        {PLAYER_CHAMBER 5 3-10 3-10 top-middle}
        {PLAYER_CHAMBER 6 3-10 3-10 bottom-middle}
        {PLAYER_CHAMBER 7 3-10 3-10 middle-left}
        {PLAYER_CHAMBER 8 3-10 3-10 middle-right}
    [/generator]
[/multiplayer]

#undef CLEAR_TERRAINS
#undef ROAD_COSTS
#undef PLAYER_CHAMBER
#undef MAP_OPTION_CONTROL
