.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program; if not, write to the Free Software
.\" Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
.\"
.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH WESNOTHD 6 2009 wesnothd 韦诺之战多人游戏服务器
.
.SH 命名
.
wesnothd \- 韦诺之战 \fBWesnoth\fP 多人游戏服务器
.
.SH 摘要
.
\fBwesnothd\fP [\|\fB\-dv\fP\|] [\|\fB\-c\fP \fIpath\fP\|] [\|\fB\-p\fP \fIport\fP\|] [\|\fB\-t\fP
\fInumber\fP\|] [\|\fB\-T\fP \fInumber\fP\|]
.br
\fBwesnothd\fP \fB\-V\fP
.
.SH 描述
.
管理韦诺之战多人游戏。查看http://www.wesnoth.org/wiki/ServerAdministration
获取服务器接受的命令列表。客户端使用/query 或 fifo 会显示这一列表。
.
.SH 选项
.
.TP 
\fB\-c\ \fP\fIpath\fP\fB,\ \-\-config\fP\fI\ path\fP
指定wesnothd查找配置文件的目录。查看下面的\fBSERVER CONFIG\fP通过发送SIGHUP信号给服务进程可以重新装载配置文件。
.TP 
\fB\-d, \-\-daemon\fP
以守护进程方式(daemon)运行wesnothd
.TP 
\fB\-h, \-\-help\fP
显示命令行选项的作用
.TP 
\fB\-\-log\-\fP\fIlevel\fP\fB=\fP\fIdomain1\fP\fB,\fP\fIdomain2\fP\fB,\fP\fI...\fP
设置日志记录的级别.\fBall\fP用来匹配任意日志域(log domain)级别。可选的级别有：\fBerror\fP,\ \fBwarning\fP,\
\fBinfo\fP,\ \fBdebug\fP。默认的级别是\fBerror\fP，对\fB服务器\fP域默认级别是\fBinfo\fP。
.TP 
\fB\-p\ \fP\fIport\fP\fB,\ \-\-port\fP\fI\ port\fP
绑定服务到指定的端口。如果不指定端口将使用\fB15000\fP端口。
.TP 
\fB\-t\ \fP\fInumber\fP\fB,\ \-\-threads\fP\fI\ number\fP
设置网络I/O的最大挂起线程数(waiting worker threads)为n (默认值为\fB5\fP，\ 最大为\ \fB30\fP)。
.TP 
\fB\-T\ \fP\fInumber\fP\fB,\ \-\-max\-threads\fP\fI\ number\fP
设置允许创建的最大正常线程数(worker threads)。如果设置为\fB0\fP则不限制线程数（默认值：\fB0\fP）
.TP 
\fB\-V, \-\-version\fP
显示版本号并退出
.TP 
\fB\-v, \-\-verbose\fP
开启调试日志记录
.
.SH "SERVER CONFIG"
.
.SS "The general syntax is:"
.
.P
[\fItag\fP]
.IP
\fIkey\fP="\fIvalue\fP"
.IP
\fIkey\fP="\fIvalue\fP,\fIvalue\fP,..."
.P
[/\fItag\fP]
.
.SS "Global keys:"
.
.TP 
\fBallow_remote_shutdown\fP
如果设置为 \fBno\fP (默认值), 关闭和重启请求将被忽略，除非来自fifo。如果设为 \fByes\fP 则允许管理员通过 /query 远程关闭。
.TP 
\fBban_save_file\fP
一个服务器可读可写的（经gzip压缩的）文件的完整路径或相对路径。封禁信息会自动保存在这个文件，并在服务器重启时读取。
.TP 
\fBcompress_stored_rooms\fP
制定房间文件是否应该压缩。 默认值为 \fByes\fP.
.TP 
\fBconnections_allowed\fP
同一IP允许的连接数。\fB0\fP 表示无限制。(默认值：\fB5\fP)
.TP 
\fBdisallow_names\fP
服务器不允许使用的用户名/昵称。可以使用\fB*\fP和\fB?\fP通配符。更多信息请查看 \fBglob\fP(7)
。默认值(如果用户没有指定则自动使用)是：\fB*admin*,*admln*,*server*,ai,ai?,computer,human,network,player\fP.
.TP 
\fBfifo_path\fP
你能通过调用服务器命令的fifo路径（与在wesnoth中使用 /query
功能相同）。如果不指定，则默认为编译时指定的路径(默认：\fB/var/run/socket/wesnothd/socket\fP).
.TP 
\fBmax_messages\fP
\fBmessages_time_period\fP中允许存在的消息数。 (默认值: \fB4\fP)
.TP 
\fBmessages_time_period\fP
消息泛滥(message flooding)检测时间间隔(秒)。 (默认值: \fB10\fP 秒)
.TP 
\fBmotd\fP
当日新闻
.TP 
\fBnew_room_policy\fP
指定谁能在服务器上创建房间。可选值为 \fBeveryone\fP, \fBregistered\fP, \fBadmin\fP and \fBnobody\fP,
分别表示所有人，注册用户，管理员用户，禁止创建房间。 默认值为 \fBeveryone\fP.
.TP 
\fBpasswd\fP
用来获取管理员权限的密码 (通过 \fB/query admin \fP\fIpassword\fP).
.TP 
\fBreplay_save_path\fP
存放游戏录像的目录。(必须以/结尾!)默认为`'(空),也就是wesnothd 启动时的目录。
.TP 
\fBrestart_command\fP
这是服务器使用\fBrestart\fP命令开启新进程时使用的命令。（只能通过fifo来调用。参考\fBallow_remote_shutdown\fP设置。）
.TP 
\fBroom_save_file\fP
制定存放房间信息的文件路径。这个文件在服务器启动时读取，之后会写入。如果设为空或者不设置，则房间不自动加载和保存。
.TP 
\fBsave_replays\fP
设置服务器是否自动保存游戏录像。(默认值: \fBfalse\fP)
.TP 
\fBversions_accepted\fP
用逗号分隔的服务器接受的版本号列表。支持\fB*\fP和\fB?\fP通配符。（默认为(与服务器)一致的wesnoth版本）
.br
例如: \fBversions_accepted="*"\fP 允许所有版本连接。
.TP  
\fBuser_handler\fP
希望使用的用户处理单元。目前可选的有\fBforum\fP(将wesnothd与phpbb 论坛的数据库连接起来)
和\fBsample\fP(一个实现用户处理的示例,如果你真的(直接)用这个那你一定是疯了)。默认值是\fBforum\fP同时你必须添加一个\fB[user_handler]\fP部分,看下面。
.
.SS "Global tags:"
.
.P
\fB[redirect]\fP 服务器用来重定向特定客户端版本的标签。
.RS
.TP 
\fBhost\fP
重定向到的服务器地址
.TP 
\fBport\fP
连接端口
.TP 
\fBversion\fP
用逗号分隔的需要重定向的版本号列表。同样可以使用`*'和`?'通配符。
.RE
.P
\fB[ban_time]\fP 这个标签定义一些常用的封禁时间长度的关键字。
.RS
.TP 
\fBname\fP
给封禁时间起一个名字
.TP 
\fBtime\fP
时间长度定义。 格式为：%d[%s[%d%s[...]]]
其中%s是s（秒），m（分钟），h（小时），D（天），M（月），Y（年），%d是一个数字。如果不指定时间单位，默认为分钟（m）例如：\fBtime=\"1D12h30m\"\fP结果是1天，12小时，30分钟的封禁。
.RE
.P
\fB[proxy]\fP 这个标签告诉服务器扮演代理服务器角色，把用户连接重定向到另一台服务器。与\fB[redirect]\fP接受一样的参数。
.RE
.P
\fB[user_handler]\fP
设置用户处理单元。可设置的键值很大程度上取决于通过\fBuser_handler\fP设置的用户处理单元的值。如果配置文件中没有\fB[user_handler]\fP部分,服务器以不提供昵称注册服务的方式运行。
.RS
.TP  
\fBdb_host\fP
(如果用户处理单元设置为 forum) 数据库服务器的主机名
.TP  
\fBdb_name\fP
(如果用户处理单元设置为 forum) 数据库名
.TP  
\fBdb_user\fP
(如果用户处理单元设置为 forum) 数据库登录用户名
.TP  
\fBdb_password\fP
(如果用户处理单元设置为 forum) 数据库登录密码
.TP  
\fBdb_users_table\fP
(如果用户处理单元设置为 forum) phpbb 论坛中存放用户数据的表名。很可能是<table\-prefix>_users
(例如phpbb3_users)。
.TP  
\fBdb_extra_table\fP
(如果用户处理单元设置为 forum) wesnothd存放用户游戏数据的表名。你必须自己创建这个表,例如:\fBCREATE TABLE
<table\-name>(username VARCHAR(255) PRIMARY KEY, user_lastvisit INT
UNSIGNED NOT NULL DEFAULT 0, user_is_moderator TINYINT(4) NOT NULL DEFAULT
0);\fP
.TP  
\fBuser_expiration\fP
(如果用户处理单元设置为 sample) 注册昵称失效时间(天数)。
.RE
.P
\fB[mail]\fP 设置一个SMTP服务器,通过它用户处理单元可以发送邮件。目前只在sample 用户处理单元中使用。
.RS
.TP  
\fBserver\fP
邮件服务器的主机名
.TP  
\fBusername\fP
登录到邮件服务器的用户名。
.TP  
\fBpassword\fP
这个用户的密码。
.TP  
\fBfrom_address\fP
"回复到"邮件地址
.TP  
\fBmail_port\fP
邮件服务器的端口。默认值位5。
.
.SH "EXIT STATUS"
.
Normal exit status is 0 when the server was properly shutdown. An exit
status of 2 indicates an error with the command line options.
.
.SH 作者
.
由 David White <davidnwhite@verizon.net>编写。经 Nils Kneuper
<crazy\-ivanovic@gmx.net>, ott <ott@gaon.net>, Soliton
<soliton.de@gmail.com> 和 Thomas Baumhauer
<thomas.baumhauer@gmail.com>. 修改。这个帮助页最早由Cyril Bouthors
<cyril@bouthors.org>编写。
.br
访问官方网站: http://www.wesnoth.org/
以及Wesnoth中文网站：http://www.wesnoth.cn
.
.SH COPYRIGHT
.
Copyright \(co 2003\-2009 David White <davidnwhite@verizon.net>
.br
这是一个自由软件；使用由FSF发布的GPL v2协议授权。原文如下：This is Free Software; this software is
licensed under the GPL version 2, as published by the Free Software
Foundation.  There is NO warranty; not even for MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.There is NO warranty; not even for MERCHANTABILITY
or FITNESS FOR A PARTICULAR PURPOSE.
.
.SH 参见
.
\fBwesnoth\fP(6), \fBwesnoth_editor\fP(6)
